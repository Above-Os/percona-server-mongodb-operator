


    <title>PSMDB API Documentation &mdash; Percona Kubernetes Operator for Percona Server for MongoDB Documentation</title>
    
  <head>
    
    
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Percona Kubernetes Operator for Percona Server for MongoDB Documentation" href="index.html" />
    <link rel="next" title="Frequently Asked Questions" href="faq.html" />
    <link rel="prev" title="Percona certified images" href="images.html" /> 
  </head>
  <body>
    <div class="container">  

    <div class="document row">
      <div class="documentwrapper col-md-9 col-md-push-3">
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="faq.html" title="Frequently Asked Questions"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="images.html" title="Percona certified images"
             accesskey="P">previous</a></li>
        <li><a href="index.html">Percona Kubernetes Operator for Percona Server for MongoDB Documentation</a></li> 
      </ul>
    </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="psmdb-api-documentation">
<h1>PSMDB API Documentation</h1>
<style>

.toggle {
     background: none repeat scroll 0 0 #ffebcc;
     padding: 12px;
     max-width: 850px;
     line-height: 24px;
     margin-bottom: 24px;
 }

.toggle .header {
    display: block;
    clear: both;
    cursor: pointer;
}

.toggle .header:after {
    content: " ▶";
}

.toggle .header.open:after {
    content: " ▼";
}
</style><p>Percona Operator Operator for Percona Server for MongoDB provides an <a class="reference external" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/">aggregation-layer extension for the Kubernetes API</a>. Please refer to the
<a class="reference external" href="https://kubernetes.io/docs/reference/">official Kubernetes API documentation</a> on the API access and usage details.
The following subsections describe the Percona XtraDB Cluster API provided by the Operator.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#prerequisites" id="id1">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#create-new-psmdb-cluster" id="id2">Create new PSMDB cluster</a></p></li>
<li><p><a class="reference internal" href="#list-psmdb-cluster" id="id3">List PSMDB cluster</a></p></li>
<li><p><a class="reference internal" href="#get-status-of-psmdb-cluster" id="id4">Get status of PSMDB cluster</a></p></li>
<li><p><a class="reference internal" href="#scale-up-down-psmdb-cluster" id="id5">Scale up/down PSMDB cluster</a></p></li>
<li><p><a class="reference internal" href="#update-psmdb-cluster-image" id="id6">Update PSMDB cluster image</a></p></li>
<li><p><a class="reference internal" href="#backup-psmdb-cluster" id="id7">Backup PSMDB cluster</a></p></li>
<li><p><a class="reference internal" href="#restore-psmdb-cluster" id="id8">Restore PSMDB cluster</a></p></li>
</ul>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id1">Prerequisites</a></h2>
<ol class="arabic">
<li><p>Create the namespace name you will use, if not exist:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">kubectl create namespace my-namespace-name</span>
</pre></div>
</div>
<p>Trying to create an already-existing namespace will show you a
self-explanatory error message. Also, you can use the <code class="docutils literal notranslate"><span class="pre">defalut</span></code> namespace.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this document <code class="docutils literal notranslate"><span class="pre">default</span></code> namespace is used in all examples.
Substitute <code class="docutils literal notranslate"><span class="pre">default</span></code> with your namespace name if you use a different
one.</p>
</div>
</li>
<li><p>Prepare:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># set correct API address</span>
<span class="l l-Scalar l-Scalar-Plain">KUBE_CLUSTER=$(kubectl config view --minify -o jsonpath=&#39;{.clusters[0].name}&#39;)</span>
<span class="l l-Scalar l-Scalar-Plain">API_SERVER=$(kubectl config view -o jsonpath=&quot;{.clusters[?(@.name==\&quot;$KUBE_CLUSTER\&quot;)].cluster.server}&quot; | sed -e &#39;s#https://##&#39;)</span>

<span class="l l-Scalar l-Scalar-Plain"># create service account and get token</span>
<span class="l l-Scalar l-Scalar-Plain">kubectl apply -f deploy/crd.yaml -f deploy/rbac.yaml -n default</span>
<span class="l l-Scalar l-Scalar-Plain">KUBE_TOKEN=$(kubectl get secret $(kubectl get serviceaccount percona-server-mongodb-operator -o jsonpath=&#39;{.secrets[0].name}&#39; -n default) -o jsonpath=&#39;{.data.token}&#39; -n default | base64 --decode )</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="create-new-psmdb-cluster">
<h2><a class="toc-backref" href="#id2">Create new PSMDB cluster</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>The <span class="nb">command</span> to create a new PSMDB cluster creating all of its resources and it depends on the PSMDB Operator
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f percona-server-mongodb-operator/deploy/cr.yaml
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1-6-0/namespaces/default/perconaservermongodbs
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XPOST <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1-6-0/namespaces/default/perconaservermongodbs&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
            -d <span class="s2">&quot;@cluster.json&quot;</span>
</pre></div>
</div>
<p><strong>Request Body (cluster.json):</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;PerconaServerMongoDB&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my-cluster-name&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;percona/percona-server-mongodb:4.2.8-8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;imagePullPolicy&quot;</span><span class="p">:</span> <span class="s2">&quot;Always&quot;</span><span class="p">,</span>
      <span class="nt">&quot;allowUnsafeConfigurations&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;updateStrategy&quot;</span><span class="p">:</span> <span class="s2">&quot;SmartUpdate&quot;</span><span class="p">,</span>
      <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;users&quot;</span><span class="p">:</span> <span class="s2">&quot;my-cluster-name-secrets&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;pmm&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-pmm&quot;</span><span class="p">,</span>
         <span class="nt">&quot;serverHost&quot;</span><span class="p">:</span> <span class="s2">&quot;monitoring-service&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;rs0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;affinity&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;antiAffinityTopologyKey&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;podDisruptionBudget&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;maxUnavailable&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="nt">&quot;expose&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
               <span class="nt">&quot;exposeType&quot;</span><span class="p">:</span> <span class="s2">&quot;LoadBalancer&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;arbiter&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
               <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
               <span class="nt">&quot;affinity&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;antiAffinityTopologyKey&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;limits&quot;</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">},</span>
            <span class="nt">&quot;volumeSpec&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;persistentVolumeClaim&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;storageClassName&quot;</span><span class="p">:</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;accessModes&quot;</span><span class="p">:</span> <span class="p">[</span>
                     <span class="s2">&quot;ReadWriteOnce&quot;</span>
                  <span class="p">],</span>
                  <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">{</span>
                     <span class="nt">&quot;requests&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="s2">&quot;3Gi&quot;</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;mongod&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;net&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="mi">27017</span><span class="p">,</span>
            <span class="nt">&quot;hostPort&quot;</span><span class="p">:</span> <span class="mi">0</span>
         <span class="p">},</span>
         <span class="nt">&quot;security&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;redactClientLogData&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;enableEncryption&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;encryptionKeySecret&quot;</span><span class="p">:</span> <span class="s2">&quot;my-cluster-name-mongodb-encryption-key&quot;</span><span class="p">,</span>
            <span class="nt">&quot;encryptionCipherMode&quot;</span><span class="p">:</span> <span class="s2">&quot;AES256-CBC&quot;</span>
         <span class="p">},</span>
         <span class="nt">&quot;setParameter&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;ttlMonitorSleepSecs&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:</span> <span class="mi">128</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:</span> <span class="mi">128</span>
         <span class="p">},</span>
         <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;engine&quot;</span><span class="p">:</span> <span class="s2">&quot;wiredTiger&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inMemory&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;inMemorySizeRatio&quot;</span><span class="p">:</span> <span class="mf">0.9</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;mmapv1&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;nsSize&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
               <span class="nt">&quot;smallfiles&quot;</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">},</span>
            <span class="nt">&quot;wiredTiger&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;cacheSizeRatio&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
                  <span class="nt">&quot;directoryForIndexes&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                  <span class="nt">&quot;journalCompressor&quot;</span><span class="p">:</span> <span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;collectionConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;blockCompressor&quot;</span><span class="p">:</span> <span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;indexConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;prefixCompression&quot;</span><span class="p">:</span> <span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">},</span>
         <span class="nt">&quot;operationProfiling&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;slowOp&quot;</span><span class="p">,</span>
            <span class="nt">&quot;slowOpThresholdMs&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="nt">&quot;rateLimit&quot;</span><span class="p">:</span> <span class="mi">100</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;backup&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;restartOnFailure&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-backup&quot;</span><span class="p">,</span>
         <span class="nt">&quot;serviceAccountName&quot;</span><span class="p">:</span> <span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
         <span class="nt">&quot;storages&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
         <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><strong>Inputs:</strong></p>
<blockquote>
<div><p><strong>Metadata</strong>:</p>
<ol class="arabic simple">
<li><p>Name (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">contains</span> <span class="pre">name</span> <span class="pre">of</span> <span class="pre">cluster</span></code></p></li>
</ol>
<p><strong>Spec</strong>:</p>
<ol class="arabic simple">
<li><p>secrets[users] (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">contains</span> <span class="pre">name</span> <span class="pre">of</span> <span class="pre">secret</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">users</span></code></p></li>
<li><p>allowUnsafeConfigurations (Boolean, Default: false) : <code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">unsafe</span> <span class="pre">configurations</span> <span class="pre">to</span> <span class="pre">run</span></code></p></li>
<li><p>image (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">psmdb</span> <span class="pre">cluster</span> <span class="pre">image</span></code></p></li>
</ol>
<p>replsets:</p>
<ol class="arabic simple">
<li><p>name (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">monogo</span> <span class="pre">replicaset</span></code></p></li>
<li><p>size (Integer, min-value: 1) : <code class="docutils literal notranslate"><span class="pre">contains</span> <span class="pre">size</span> <span class="pre">of</span> <span class="pre">MongoDB</span> <span class="pre">replicaset</span></code></p></li>
<li><p>expose[exposeType] (Integer, min-value: 1) : <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">of</span> <span class="pre">service</span> <span class="pre">to</span> <span class="pre">expose</span> <span class="pre">replicaset</span></code></p></li>
<li><p>arbiter (Object) : <code class="docutils literal notranslate"><span class="pre">configuration</span> <span class="pre">for</span> <span class="pre">mongo</span> <span class="pre">arbiter</span></code></p></li>
</ol>
<p>mongod:</p>
<ol class="arabic simple">
<li><p>net:</p>
<ol class="arabic simple">
<li><p>port (Integer, min-value: 0) : <code class="docutils literal notranslate"><span class="pre">contains</span> <span class="pre">mongod</span> <span class="pre">container</span> <span class="pre">port</span></code></p></li>
<li><p>hostPort (Integer, min-value: 0) : <code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">port</span> <span class="pre">to</span> <span class="pre">expose</span> <span class="pre">mongod</span> <span class="pre">on</span></code></p></li>
</ol>
</li>
<li><p>security:</p>
<ol class="arabic simple">
<li><p>enableEncryption (Boolean, Default: true) : <code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">encrypting</span> <span class="pre">mongod</span> <span class="pre">storage</span></code></p></li>
<li><p>encryptionKeySecret (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">encryption</span> <span class="pre">key</span> <span class="pre">secret</span></code></p></li>
<li><p>encryptionCipherMode (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">of</span> <span class="pre">encryption</span> <span class="pre">cipher</span> <span class="pre">to</span> <span class="pre">use</span></code></p></li>
</ol>
</li>
<li><p>setParameter (Object): <code class="docutils literal notranslate"><span class="pre">configure</span> <span class="pre">mongod</span> <span class="pre">enginer</span> <span class="pre">paramters</span></code></p></li>
<li><p>storage:</p>
<ol class="arabic simple">
<li><p>engine (String, min-length: 1, default “wiredTiger”): <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">mongod</span> <span class="pre">storage</span> <span class="pre">engine</span></code></p></li>
<li><p>inMemory (Object) : <code class="docutils literal notranslate"><span class="pre">wiredTiger</span> <span class="pre">engine</span> <span class="pre">configuration</span></code></p></li>
<li><p>wiredTiger (Object) : <code class="docutils literal notranslate"><span class="pre">wiredTiger</span> <span class="pre">engine</span> <span class="pre">configuration</span></code></p></li>
</ol>
</li>
</ol>
<p>pmm:</p>
<ol class="arabic simple">
<li><p>serverHost (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">serivce</span> <span class="pre">name</span> <span class="pre">for</span> <span class="pre">monitoring</span></code></p></li>
<li><p>image (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">pmm</span> <span class="pre">image</span></code></p></li>
</ol>
<p>backup:</p>
<ol class="arabic simple">
<li><p>image (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">MngoDB</span> <span class="pre">backup</span> <span class="pre">docker</span> <span class="pre">image</span></code></p></li>
<li><p>serviceAccountName (String, min-length: 1) <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">service</span> <span class="pre">account</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">for</span> <span class="pre">backup</span></code></p></li>
<li><p>storages (Object) : <code class="docutils literal notranslate"><span class="pre">storage</span> <span class="pre">configuration</span> <span class="pre">object</span> <span class="pre">for</span> <span class="pre">backup</span></code></p></li>
</ol>
</div></blockquote>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDB&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1-5-0\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDB\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;my-cluster-name\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;allowUnsafeConfigurations\&quot;:false,\&quot;backup\&quot;:{\&quot;enabled\&quot;:true,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-backup\&quot;,\&quot;restartOnFailure\&quot;:true,\&quot;serviceAccountName\&quot;:\&quot;percona-server-mongodb-operator\&quot;,\&quot;storages\&quot;:null,\&quot;tasks\&quot;:null},\&quot;image\&quot;:\&quot;percona/percona-server-mongodb:4.2.8-8\&quot;,\&quot;imagePullPolicy\&quot;:\&quot;Always\&quot;,\&quot;mongod\&quot;:{\&quot;net\&quot;:{\&quot;hostPort\&quot;:0,\&quot;port\&quot;:27017},\&quot;operationProfiling\&quot;:{\&quot;mode\&quot;:\&quot;slowOp\&quot;,\&quot;rateLimit\&quot;:100,\&quot;slowOpThresholdMs\&quot;:100},\&quot;security\&quot;:{\&quot;enableEncryption\&quot;:true,\&quot;encryptionCipherMode\&quot;:\&quot;AES256-CBC\&quot;,\&quot;encryptionKeySecret\&quot;:\&quot;my-cluster-name-mongodb-encryption-key\&quot;,\&quot;redactClientLogData\&quot;:false},\&quot;setParameter\&quot;:{\&quot;ttlMonitorSleepSecs\&quot;:60,\&quot;wiredTigerConcurrentReadTransactions\&quot;:128,\&quot;wiredTigerConcurrentWriteTransactions\&quot;:128},\&quot;storage\&quot;:{\&quot;engine\&quot;:\&quot;wiredTiger\&quot;,\&quot;inMemory\&quot;:{\&quot;engineConfig\&quot;:{\&quot;inMemorySizeRatio\&quot;:0.9}},\&quot;mmapv1\&quot;:{\&quot;nsSize\&quot;:16,\&quot;smallfiles\&quot;:false},\&quot;wiredTiger\&quot;:{\&quot;collectionConfig\&quot;:{\&quot;blockCompressor\&quot;:\&quot;snappy\&quot;},\&quot;engineConfig\&quot;:{\&quot;cacheSizeRatio\&quot;:0.5,\&quot;directoryForIndexes\&quot;:false,\&quot;journalCompressor\&quot;:\&quot;snappy\&quot;},\&quot;indexConfig\&quot;:{\&quot;prefixCompression\&quot;:true}}}},\&quot;pmm\&quot;:{\&quot;enabled\&quot;:false,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-pmm\&quot;,\&quot;serverHost\&quot;:\&quot;monitoring-service\&quot;},\&quot;replsets\&quot;:[{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;arbiter\&quot;:{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;enabled\&quot;:false,\&quot;size\&quot;:1},\&quot;expose\&quot;:{\&quot;enabled\&quot;:false,\&quot;exposeType\&quot;:\&quot;LoadBalancer\&quot;},\&quot;name\&quot;:\&quot;rs0\&quot;,\&quot;podDisruptionBudget\&quot;:{\&quot;maxUnavailable\&quot;:1},\&quot;resources\&quot;:{\&quot;limits\&quot;:null},\&quot;size\&quot;:3,\&quot;volumeSpec\&quot;:{\&quot;persistentVolumeClaim\&quot;:{\&quot;accessModes\&quot;:[\&quot;ReadWriteOnce\&quot;],\&quot;resources\&quot;:{\&quot;requests\&quot;:{\&quot;storage\&quot;:\&quot;3Gi\&quot;}},\&quot;storageClassName\&quot;:\&quot;standard\&quot;}}}],\&quot;secrets\&quot;:{\&quot;users\&quot;:\&quot;my-cluster-name-secrets\&quot;},\&quot;updateStrategy\&quot;:\&quot;SmartUpdate\&quot;}}\n&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:allowUnsafeConfigurations&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:enabled&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:restartOnFailure&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serviceAccountName&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:storages&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:tasks&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:imagePullPolicy&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:mongod&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:net&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:hostPort&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:port&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:operationProfiling&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:mode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:rateLimit&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:slowOpThresholdMs&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:security&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:enableEncryption&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionCipherMode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionKeySecret&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:redactClientLogData&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:setParameter&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ttlMonitorSleepSecs&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:storage&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:engine&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:inMemory&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:inMemorySizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:mmapv1&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:nsSize&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:smallfiles&quot;</span><span class="p">:{</span>

                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTiger&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:collectionConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:blockCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:cacheSizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:directoryForIndexes&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:journalCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:indexConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:prefixCompression&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:pmm&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:enabled&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serverHost&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:users&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:updateStrategy&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1268922&quot;</span><span class="p">,</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1-5-0/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;5207e71a-c83f-4707-b892-63aa93fb615c&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;allowUnsafeConfigurations&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;backup&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-backup&quot;</span><span class="p">,</span>
         <span class="nt">&quot;restartOnFailure&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;serviceAccountName&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
         <span class="nt">&quot;storages&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
         <span class="nt">&quot;tasks&quot;</span><span class="p">:</span><span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb:4.2.8-8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;imagePullPolicy&quot;</span><span class="p">:</span><span class="s2">&quot;Always&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mongod&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;net&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;hostPort&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="mi">27017</span>
         <span class="p">},</span>
         <span class="nt">&quot;operationProfiling&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;slowOp&quot;</span><span class="p">,</span>
            <span class="nt">&quot;rateLimit&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
            <span class="nt">&quot;slowOpThresholdMs&quot;</span><span class="p">:</span><span class="mi">100</span>
         <span class="p">},</span>
         <span class="nt">&quot;security&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;enableEncryption&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;encryptionCipherMode&quot;</span><span class="p">:</span><span class="s2">&quot;AES256-CBC&quot;</span><span class="p">,</span>
            <span class="nt">&quot;encryptionKeySecret&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-mongodb-encryption-key&quot;</span><span class="p">,</span>
            <span class="nt">&quot;redactClientLogData&quot;</span><span class="p">:</span><span class="kc">false</span>
         <span class="p">},</span>
         <span class="nt">&quot;setParameter&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ttlMonitorSleepSecs&quot;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:</span><span class="mi">128</span>
         <span class="p">},</span>
         <span class="nt">&quot;storage&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="s2">&quot;wiredTiger&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inMemory&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;inMemorySizeRatio&quot;</span><span class="p">:</span><span class="mf">0.9</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;mmapv1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;nsSize&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span>
               <span class="nt">&quot;smallfiles&quot;</span><span class="p">:</span><span class="kc">false</span>
            <span class="p">},</span>
            <span class="nt">&quot;wiredTiger&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;collectionConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;blockCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;cacheSizeRatio&quot;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
                  <span class="nt">&quot;directoryForIndexes&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                  <span class="nt">&quot;journalCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;indexConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;prefixCompression&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;pmm&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-pmm&quot;</span><span class="p">,</span>
         <span class="nt">&quot;serverHost&quot;</span><span class="p">:</span><span class="s2">&quot;monitoring-service&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;affinity&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;antiAffinityTopologyKey&quot;</span><span class="p">:</span><span class="s2">&quot;none&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;arbiter&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;affinity&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;antiAffinityTopologyKey&quot;</span><span class="p">:</span><span class="s2">&quot;none&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
               <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">1</span>
            <span class="p">},</span>
            <span class="nt">&quot;expose&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
               <span class="nt">&quot;exposeType&quot;</span><span class="p">:</span><span class="s2">&quot;LoadBalancer&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;rs0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;podDisruptionBudget&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;maxUnavailable&quot;</span><span class="p">:</span><span class="mi">1</span>
            <span class="p">},</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;limits&quot;</span><span class="p">:</span><span class="kc">null</span>
            <span class="p">},</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;volumeSpec&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;persistentVolumeClaim&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;accessModes&quot;</span><span class="p">:[</span>
                     <span class="s2">&quot;ReadWriteOnce&quot;</span>
                  <span class="p">],</span>
                  <span class="nt">&quot;resources&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;requests&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;storage&quot;</span><span class="p">:</span><span class="s2">&quot;3Gi&quot;</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;storageClassName&quot;</span><span class="p">:</span><span class="s2">&quot;standard&quot;</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;secrets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-secrets&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;updateStrategy&quot;</span><span class="p">:</span><span class="s2">&quot;SmartUpdate&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="list-psmdb-cluster">
<h2><a class="toc-backref" href="#id3">List PSMDB cluster</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Lists all PSMDB clusters that exist in your kubernetes cluster
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get psmdb
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs?limit<span class="o">=</span><span class="m">500</span>
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XGET <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs?limit=500&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Accept: application/json;as=Table;v=v1;g=meta.k8s.io,application/json;as=Table;v=v1beta1;g=meta.k8s.io,application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><strong>Request Body:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;Table&quot;</span><span class="p">,</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;meta.k8s.io/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1273793&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;columnDefinitions&quot;</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span>
         <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
         <span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
         <span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Name must be unique within a namespace. Is required when creating resources, although some resources may allow a client to request the generation of an appropriate name automatically. Name is primarily intended for creation idempotence and configuration definition. Cannot be updated. More info: http://kubernetes.io/docs/user-guide/identifiers#names&quot;</span><span class="p">,</span>
         <span class="nt">&quot;priority&quot;</span><span class="p">:</span><span class="mi">0</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Status&quot;</span><span class="p">,</span>
         <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
         <span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
         <span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Custom resource definition column (in JSONPath format): .status.state&quot;</span><span class="p">,</span>
         <span class="nt">&quot;priority&quot;</span><span class="p">:</span><span class="mi">0</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Age&quot;</span><span class="p">,</span>
         <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;date&quot;</span><span class="p">,</span>
         <span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
         <span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;Custom resource definition column (in JSONPath format): .metadata.creationTimestamp&quot;</span><span class="p">,</span>
         <span class="nt">&quot;priority&quot;</span><span class="p">:</span><span class="mi">0</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="nt">&quot;rows&quot;</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="nt">&quot;cells&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ready&quot;</span><span class="p">,</span>
            <span class="s2">&quot;37m&quot;</span>
         <span class="p">],</span>
         <span class="nt">&quot;object&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PartialObjectMetadata&quot;</span><span class="p">,</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;meta.k8s.io/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
               <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
               <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span><span class="p">,</span>
               <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;5207e71a-c83f-4707-b892-63aa93fb615c&quot;</span><span class="p">,</span>
               <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1273788&quot;</span><span class="p">,</span>
               <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
               <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span><span class="p">,</span>
               <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1-5-0\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDB\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;my-cluster-name\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;allowUnsafeConfigurations\&quot;:false,\&quot;backup\&quot;:{\&quot;enabled\&quot;:true,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-backup\&quot;,\&quot;restartOnFailure\&quot;:true,\&quot;serviceAccountName\&quot;:\&quot;percona-server-mongodb-operator\&quot;,\&quot;storages\&quot;:null,\&quot;tasks\&quot;:null},\&quot;image\&quot;:\&quot;percona/percona-server-mongodb:4.2.8-8\&quot;,\&quot;imagePullPolicy\&quot;:\&quot;Always\&quot;,\&quot;mongod\&quot;:{\&quot;net\&quot;:{\&quot;hostPort\&quot;:0,\&quot;port\&quot;:27017},\&quot;operationProfiling\&quot;:{\&quot;mode\&quot;:\&quot;slowOp\&quot;,\&quot;rateLimit\&quot;:100,\&quot;slowOpThresholdMs\&quot;:100},\&quot;security\&quot;:{\&quot;enableEncryption\&quot;:true,\&quot;encryptionCipherMode\&quot;:\&quot;AES256-CBC\&quot;,\&quot;encryptionKeySecret\&quot;:\&quot;my-cluster-name-mongodb-encryption-key\&quot;,\&quot;redactClientLogData\&quot;:false},\&quot;setParameter\&quot;:{\&quot;ttlMonitorSleepSecs\&quot;:60,\&quot;wiredTigerConcurrentReadTransactions\&quot;:128,\&quot;wiredTigerConcurrentWriteTransactions\&quot;:128},\&quot;storage\&quot;:{\&quot;engine\&quot;:\&quot;wiredTiger\&quot;,\&quot;inMemory\&quot;:{\&quot;engineConfig\&quot;:{\&quot;inMemorySizeRatio\&quot;:0.9}},\&quot;mmapv1\&quot;:{\&quot;nsSize\&quot;:16,\&quot;smallfiles\&quot;:false},\&quot;wiredTiger\&quot;:{\&quot;collectionConfig\&quot;:{\&quot;blockCompressor\&quot;:\&quot;snappy\&quot;},\&quot;engineConfig\&quot;:{\&quot;cacheSizeRatio\&quot;:0.5,\&quot;directoryForIndexes\&quot;:false,\&quot;journalCompressor\&quot;:\&quot;snappy\&quot;},\&quot;indexConfig\&quot;:{\&quot;prefixCompression\&quot;:true}}}},\&quot;pmm\&quot;:{\&quot;enabled\&quot;:false,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-pmm\&quot;,\&quot;serverHost\&quot;:\&quot;monitoring-service\&quot;},\&quot;replsets\&quot;:[{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;arbiter\&quot;:{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;enabled\&quot;:false,\&quot;size\&quot;:1},\&quot;expose\&quot;:{\&quot;enabled\&quot;:false,\&quot;exposeType\&quot;:\&quot;LoadBalancer\&quot;},\&quot;name\&quot;:\&quot;rs0\&quot;,\&quot;podDisruptionBudget\&quot;:{\&quot;maxUnavailable\&quot;:1},\&quot;resources\&quot;:{\&quot;limits\&quot;:null},\&quot;size\&quot;:3,\&quot;volumeSpec\&quot;:{\&quot;persistentVolumeClaim\&quot;:{\&quot;accessModes\&quot;:[\&quot;ReadWriteOnce\&quot;],\&quot;resources\&quot;:{\&quot;requests\&quot;:{\&quot;storage\&quot;:\&quot;3Gi\&quot;}},\&quot;storageClassName\&quot;:\&quot;standard\&quot;}}}],\&quot;secrets\&quot;:{\&quot;users\&quot;:\&quot;my-cluster-name-secrets\&quot;},\&quot;updateStrategy\&quot;:\&quot;SmartUpdate\&quot;}}\n&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
                  <span class="p">{</span>
                     <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:allowUnsafeConfigurations&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:enabled&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:serviceAccountName&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:imagePullPolicy&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:mongod&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:net&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:port&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;f:operationProfiling&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:mode&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:rateLimit&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:slowOpThresholdMs&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;f:security&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:enableEncryption&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:encryptionCipherMode&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:encryptionKeySecret&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;f:setParameter&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:ttlMonitorSleepSecs&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;f:storage&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:engine&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:inMemory&quot;</span><span class="p">:{</span>
                                    <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                    <span class="p">},</span>
                                    <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                                       <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                       <span class="p">},</span>
                                       <span class="nt">&quot;f:inMemorySizeRatio&quot;</span><span class="p">:{</span>

                                       <span class="p">}</span>
                                    <span class="p">}</span>
                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:mmapv1&quot;</span><span class="p">:{</span>
                                    <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                    <span class="p">},</span>
                                    <span class="nt">&quot;f:nsSize&quot;</span><span class="p">:{</span>

                                    <span class="p">}</span>
                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:wiredTiger&quot;</span><span class="p">:{</span>
                                    <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                    <span class="p">},</span>
                                    <span class="nt">&quot;f:collectionConfig&quot;</span><span class="p">:{</span>
                                       <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                       <span class="p">},</span>
                                       <span class="nt">&quot;f:blockCompressor&quot;</span><span class="p">:{</span>

                                       <span class="p">}</span>
                                    <span class="p">},</span>
                                    <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                                       <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                       <span class="p">},</span>
                                       <span class="nt">&quot;f:cacheSizeRatio&quot;</span><span class="p">:{</span>

                                       <span class="p">},</span>
                                       <span class="nt">&quot;f:journalCompressor&quot;</span><span class="p">:{</span>

                                       <span class="p">}</span>
                                    <span class="p">},</span>
                                    <span class="nt">&quot;f:indexConfig&quot;</span><span class="p">:{</span>
                                       <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                       <span class="p">},</span>
                                       <span class="nt">&quot;f:prefixCompression&quot;</span><span class="p">:{</span>

                                       <span class="p">}</span>
                                    <span class="p">}</span>
                                 <span class="p">}</span>
                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:pmm&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:serverHost&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:users&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:updateStrategy&quot;</span><span class="p">:{</span>

                           <span class="p">}</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                     <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T15:04:55Z&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
                     <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;f:containerSecurityContext&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:runAsNonRoot&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:runAsUser&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;f:podSecurityContext&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:fsGroup&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:clusterServiceDNSSuffix&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:runUid&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;f:ssl&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:sslInternal&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:conditions&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:observedGeneration&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:rs0&quot;</span><span class="p">:{</span>
                                 <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:ready&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:size&quot;</span><span class="p">:{</span>

                                 <span class="p">},</span>
                                 <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>

                                 <span class="p">}</span>
                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:state&quot;</span><span class="p">:{</span>

                           <span class="p">}</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">]</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-status-of-psmdb-cluster">
<h2><a class="toc-backref" href="#id4">Get status of PSMDB cluster</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Gets all information about specified PSMDB cluster
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get psmdb/my-cluster-name -o json
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XGET <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><strong>Request Body:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDB&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1-5-0\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDB\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;my-cluster-name\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;allowUnsafeConfigurations\&quot;:false,\&quot;backup\&quot;:{\&quot;enabled\&quot;:true,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-backup\&quot;,\&quot;restartOnFailure\&quot;:true,\&quot;serviceAccountName\&quot;:\&quot;percona-server-mongodb-operator\&quot;,\&quot;storages\&quot;:null,\&quot;tasks\&quot;:null},\&quot;image\&quot;:\&quot;percona/percona-server-mongodb:4.2.8-8\&quot;,\&quot;imagePullPolicy\&quot;:\&quot;Always\&quot;,\&quot;mongod\&quot;:{\&quot;net\&quot;:{\&quot;hostPort\&quot;:0,\&quot;port\&quot;:27017},\&quot;operationProfiling\&quot;:{\&quot;mode\&quot;:\&quot;slowOp\&quot;,\&quot;rateLimit\&quot;:100,\&quot;slowOpThresholdMs\&quot;:100},\&quot;security\&quot;:{\&quot;enableEncryption\&quot;:true,\&quot;encryptionCipherMode\&quot;:\&quot;AES256-CBC\&quot;,\&quot;encryptionKeySecret\&quot;:\&quot;my-cluster-name-mongodb-encryption-key\&quot;,\&quot;redactClientLogData\&quot;:false},\&quot;setParameter\&quot;:{\&quot;ttlMonitorSleepSecs\&quot;:60,\&quot;wiredTigerConcurrentReadTransactions\&quot;:128,\&quot;wiredTigerConcurrentWriteTransactions\&quot;:128},\&quot;storage\&quot;:{\&quot;engine\&quot;:\&quot;wiredTiger\&quot;,\&quot;inMemory\&quot;:{\&quot;engineConfig\&quot;:{\&quot;inMemorySizeRatio\&quot;:0.9}},\&quot;mmapv1\&quot;:{\&quot;nsSize\&quot;:16,\&quot;smallfiles\&quot;:false},\&quot;wiredTiger\&quot;:{\&quot;collectionConfig\&quot;:{\&quot;blockCompressor\&quot;:\&quot;snappy\&quot;},\&quot;engineConfig\&quot;:{\&quot;cacheSizeRatio\&quot;:0.5,\&quot;directoryForIndexes\&quot;:false,\&quot;journalCompressor\&quot;:\&quot;snappy\&quot;},\&quot;indexConfig\&quot;:{\&quot;prefixCompression\&quot;:true}}}},\&quot;pmm\&quot;:{\&quot;enabled\&quot;:false,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-pmm\&quot;,\&quot;serverHost\&quot;:\&quot;monitoring-service\&quot;},\&quot;replsets\&quot;:[{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;arbiter\&quot;:{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;enabled\&quot;:false,\&quot;size\&quot;:1},\&quot;expose\&quot;:{\&quot;enabled\&quot;:false,\&quot;exposeType\&quot;:\&quot;LoadBalancer\&quot;},\&quot;name\&quot;:\&quot;rs0\&quot;,\&quot;podDisruptionBudget\&quot;:{\&quot;maxUnavailable\&quot;:1},\&quot;resources\&quot;:{\&quot;limits\&quot;:null},\&quot;size\&quot;:3,\&quot;volumeSpec\&quot;:{\&quot;persistentVolumeClaim\&quot;:{\&quot;accessModes\&quot;:[\&quot;ReadWriteOnce\&quot;],\&quot;resources\&quot;:{\&quot;requests\&quot;:{\&quot;storage\&quot;:\&quot;3Gi\&quot;}},\&quot;storageClassName\&quot;:\&quot;standard\&quot;}}}],\&quot;secrets\&quot;:{\&quot;users\&quot;:\&quot;my-cluster-name-secrets\&quot;},\&quot;updateStrategy\&quot;:\&quot;SmartUpdate\&quot;}}\n&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:allowUnsafeConfigurations&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:enabled&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serviceAccountName&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:imagePullPolicy&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:mongod&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:net&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:port&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:operationProfiling&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:mode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:rateLimit&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:slowOpThresholdMs&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:security&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:enableEncryption&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionCipherMode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionKeySecret&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:setParameter&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ttlMonitorSleepSecs&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:storage&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:engine&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:inMemory&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:inMemorySizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:mmapv1&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:nsSize&quot;</span><span class="p">:{</span>

                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTiger&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:collectionConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:blockCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:cacheSizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:journalCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:indexConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:prefixCompression&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:pmm&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serverHost&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:users&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:updateStrategy&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;f:containerSecurityContext&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:runAsNonRoot&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:runAsUser&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:podSecurityContext&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:fsGroup&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:clusterServiceDNSSuffix&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:runUid&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;f:ssl&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:sslInternal&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:conditions&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:observedGeneration&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:rs0&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ready&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:size&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:state&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T15:09:40Z&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1274523&quot;</span><span class="p">,</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;5207e71a-c83f-4707-b892-63aa93fb615c&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;allowUnsafeConfigurations&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;backup&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-backup&quot;</span><span class="p">,</span>
         <span class="nt">&quot;restartOnFailure&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;serviceAccountName&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
         <span class="nt">&quot;storages&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
         <span class="nt">&quot;tasks&quot;</span><span class="p">:</span><span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb:4.2.8-8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;imagePullPolicy&quot;</span><span class="p">:</span><span class="s2">&quot;Always&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mongod&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;net&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;hostPort&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="mi">27017</span>
         <span class="p">},</span>
         <span class="nt">&quot;operationProfiling&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;slowOp&quot;</span><span class="p">,</span>
            <span class="nt">&quot;rateLimit&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
            <span class="nt">&quot;slowOpThresholdMs&quot;</span><span class="p">:</span><span class="mi">100</span>
         <span class="p">},</span>
         <span class="nt">&quot;security&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;enableEncryption&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;encryptionCipherMode&quot;</span><span class="p">:</span><span class="s2">&quot;AES256-CBC&quot;</span><span class="p">,</span>
            <span class="nt">&quot;encryptionKeySecret&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-mongodb-encryption-key&quot;</span><span class="p">,</span>
            <span class="nt">&quot;redactClientLogData&quot;</span><span class="p">:</span><span class="kc">false</span>
         <span class="p">},</span>
         <span class="nt">&quot;setParameter&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ttlMonitorSleepSecs&quot;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:</span><span class="mi">128</span>
         <span class="p">},</span>
         <span class="nt">&quot;storage&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="s2">&quot;wiredTiger&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inMemory&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;inMemorySizeRatio&quot;</span><span class="p">:</span><span class="mf">0.9</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;mmapv1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;nsSize&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span>
               <span class="nt">&quot;smallfiles&quot;</span><span class="p">:</span><span class="kc">false</span>
            <span class="p">},</span>
            <span class="nt">&quot;wiredTiger&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;collectionConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;blockCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;cacheSizeRatio&quot;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
                  <span class="nt">&quot;directoryForIndexes&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                  <span class="nt">&quot;journalCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;indexConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;prefixCompression&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;pmm&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-pmm&quot;</span><span class="p">,</span>
         <span class="nt">&quot;serverHost&quot;</span><span class="p">:</span><span class="s2">&quot;monitoring-service&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;affinity&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;antiAffinityTopologyKey&quot;</span><span class="p">:</span><span class="s2">&quot;none&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;arbiter&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;affinity&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;antiAffinityTopologyKey&quot;</span><span class="p">:</span><span class="s2">&quot;none&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
               <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">1</span>
            <span class="p">},</span>
            <span class="nt">&quot;expose&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
               <span class="nt">&quot;exposeType&quot;</span><span class="p">:</span><span class="s2">&quot;LoadBalancer&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;rs0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;podDisruptionBudget&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;maxUnavailable&quot;</span><span class="p">:</span><span class="mi">1</span>
            <span class="p">},</span>
            <span class="nt">&quot;resources&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;limits&quot;</span><span class="p">:</span><span class="kc">null</span>
            <span class="p">},</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;volumeSpec&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;persistentVolumeClaim&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;accessModes&quot;</span><span class="p">:[</span>
                     <span class="s2">&quot;ReadWriteOnce&quot;</span>
                  <span class="p">],</span>
                  <span class="nt">&quot;resources&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;requests&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;storage&quot;</span><span class="p">:</span><span class="s2">&quot;3Gi&quot;</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;storageClassName&quot;</span><span class="p">:</span><span class="s2">&quot;standard&quot;</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;secrets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-secrets&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;updateStrategy&quot;</span><span class="p">:</span><span class="s2">&quot;SmartUpdate&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;status&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;conditions&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:03Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:39Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:41Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:41Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:29:10Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterReady&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:49:46Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:50:00Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:52:31Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:52:43Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:01Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:05Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:05Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterReady&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;observedGeneration&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;rs0&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;ready&quot;</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="s2">&quot;ready&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="scale-up-down-psmdb-cluster">
<h2><a class="toc-backref" href="#id5">Scale up/down PSMDB cluster</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Increase or decrease the size of the PSMDB cluster nodes to fit the current high availability needs
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl patch psmdb my-cluster-name --type<span class="o">=</span>merge --patch <span class="s1">&#39;{</span>
<span class="s1">&quot;spec&quot;: {&quot;replsets&quot;:{ &quot;size&quot;: &quot;5&quot; }</span>
<span class="s1">}}&#39;</span>
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XPATCH <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Content-Type: application/merge-patch+json&quot;</span>
            -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
            -d <span class="s1">&#39;{</span>
<span class="s1">                  &quot;spec&quot;: {&quot;replsets&quot;:{ &quot;size&quot;: &quot;5&quot; }</span>
<span class="s1">                  }}&#39;</span>
</pre></div>
</div>
<p><strong>Request Body:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;replsets&quot;</span><span class="p">:{</span> <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span> <span class="p">}</span>
<span class="p">}}</span>
</pre></div>
</div>
</div>
<p><strong>Input:</strong></p>
<blockquote>
<div><p><strong>spec</strong>:</p>
<p>replsets</p>
<ol class="arabic simple">
<li><p>size (Int or String, Defaults: 3): <code class="docutils literal notranslate"><span class="pre">Specifiy</span> <span class="pre">the</span> <span class="pre">sie</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">replsets</span> <span class="pre">cluster</span> <span class="pre">to</span> <span class="pre">scale</span> <span class="pre">up</span> <span class="pre">or</span> <span class="pre">down</span> <span class="pre">to</span></code></p></li>
</ol>
</div></blockquote>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDB&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1-5-0\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDB\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;my-cluster-name\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;allowUnsafeConfigurations\&quot;:false,\&quot;backup\&quot;:{\&quot;enabled\&quot;:true,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-backup\&quot;,\&quot;restartOnFailure\&quot;:true,\&quot;serviceAccountName\&quot;:\&quot;percona-server-mongodb-operator\&quot;,\&quot;storages\&quot;:null,\&quot;tasks\&quot;:null},\&quot;image\&quot;:\&quot;percona/percona-server-mongodb:4.2.8-8\&quot;,\&quot;imagePullPolicy\&quot;:\&quot;Always\&quot;,\&quot;mongod\&quot;:{\&quot;net\&quot;:{\&quot;hostPort\&quot;:0,\&quot;port\&quot;:27017},\&quot;operationProfiling\&quot;:{\&quot;mode\&quot;:\&quot;slowOp\&quot;,\&quot;rateLimit\&quot;:100,\&quot;slowOpThresholdMs\&quot;:100},\&quot;security\&quot;:{\&quot;enableEncryption\&quot;:true,\&quot;encryptionCipherMode\&quot;:\&quot;AES256-CBC\&quot;,\&quot;encryptionKeySecret\&quot;:\&quot;my-cluster-name-mongodb-encryption-key\&quot;,\&quot;redactClientLogData\&quot;:false},\&quot;setParameter\&quot;:{\&quot;ttlMonitorSleepSecs\&quot;:60,\&quot;wiredTigerConcurrentReadTransactions\&quot;:128,\&quot;wiredTigerConcurrentWriteTransactions\&quot;:128},\&quot;storage\&quot;:{\&quot;engine\&quot;:\&quot;wiredTiger\&quot;,\&quot;inMemory\&quot;:{\&quot;engineConfig\&quot;:{\&quot;inMemorySizeRatio\&quot;:0.9}},\&quot;mmapv1\&quot;:{\&quot;nsSize\&quot;:16,\&quot;smallfiles\&quot;:false},\&quot;wiredTiger\&quot;:{\&quot;collectionConfig\&quot;:{\&quot;blockCompressor\&quot;:\&quot;snappy\&quot;},\&quot;engineConfig\&quot;:{\&quot;cacheSizeRatio\&quot;:0.5,\&quot;directoryForIndexes\&quot;:false,\&quot;journalCompressor\&quot;:\&quot;snappy\&quot;},\&quot;indexConfig\&quot;:{\&quot;prefixCompression\&quot;:true}}}},\&quot;pmm\&quot;:{\&quot;enabled\&quot;:false,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-pmm\&quot;,\&quot;serverHost\&quot;:\&quot;monitoring-service\&quot;},\&quot;replsets\&quot;:[{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;arbiter\&quot;:{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;enabled\&quot;:false,\&quot;size\&quot;:1},\&quot;expose\&quot;:{\&quot;enabled\&quot;:false,\&quot;exposeType\&quot;:\&quot;LoadBalancer\&quot;},\&quot;name\&quot;:\&quot;rs0\&quot;,\&quot;podDisruptionBudget\&quot;:{\&quot;maxUnavailable\&quot;:1},\&quot;resources\&quot;:{\&quot;limits\&quot;:null},\&quot;size\&quot;:3,\&quot;volumeSpec\&quot;:{\&quot;persistentVolumeClaim\&quot;:{\&quot;accessModes\&quot;:[\&quot;ReadWriteOnce\&quot;],\&quot;resources\&quot;:{\&quot;requests\&quot;:{\&quot;storage\&quot;:\&quot;3Gi\&quot;}},\&quot;storageClassName\&quot;:\&quot;standard\&quot;}}}],\&quot;secrets\&quot;:{\&quot;users\&quot;:\&quot;my-cluster-name-secrets\&quot;},\&quot;updateStrategy\&quot;:\&quot;SmartUpdate\&quot;}}\n&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span>
      <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:allowUnsafeConfigurations&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:enabled&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serviceAccountName&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:imagePullPolicy&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:mongod&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:net&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:port&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:operationProfiling&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:mode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:rateLimit&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:slowOpThresholdMs&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:security&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:enableEncryption&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionCipherMode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionKeySecret&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:setParameter&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ttlMonitorSleepSecs&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:storage&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:engine&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:inMemory&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:inMemorySizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:mmapv1&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:nsSize&quot;</span><span class="p">:{</span>

                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTiger&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:collectionConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:blockCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:cacheSizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:journalCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:indexConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:prefixCompression&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:pmm&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serverHost&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:users&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:updateStrategy&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;f:containerSecurityContext&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:runAsNonRoot&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:runAsUser&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:podSecurityContext&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:fsGroup&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:clusterServiceDNSSuffix&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:runUid&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;f:ssl&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:sslInternal&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:conditions&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:observedGeneration&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:rs0&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ready&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:size&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:state&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T15:35:14Z&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:size&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T15:43:19Z&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1279009&quot;</span><span class="p">,</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;5207e71a-c83f-4707-b892-63aa93fb615c&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;allowUnsafeConfigurations&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;backup&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-backup&quot;</span><span class="p">,</span>
         <span class="nt">&quot;restartOnFailure&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;serviceAccountName&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
         <span class="nt">&quot;storages&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
         <span class="nt">&quot;tasks&quot;</span><span class="p">:</span><span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb:4.2.8-8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;imagePullPolicy&quot;</span><span class="p">:</span><span class="s2">&quot;Always&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mongod&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;net&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;hostPort&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="mi">27017</span>
         <span class="p">},</span>
         <span class="nt">&quot;operationProfiling&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;slowOp&quot;</span><span class="p">,</span>
            <span class="nt">&quot;rateLimit&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
            <span class="nt">&quot;slowOpThresholdMs&quot;</span><span class="p">:</span><span class="mi">100</span>
         <span class="p">},</span>
         <span class="nt">&quot;security&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;enableEncryption&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;encryptionCipherMode&quot;</span><span class="p">:</span><span class="s2">&quot;AES256-CBC&quot;</span><span class="p">,</span>
            <span class="nt">&quot;encryptionKeySecret&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-mongodb-encryption-key&quot;</span><span class="p">,</span>
            <span class="nt">&quot;redactClientLogData&quot;</span><span class="p">:</span><span class="kc">false</span>
         <span class="p">},</span>
         <span class="nt">&quot;setParameter&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ttlMonitorSleepSecs&quot;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:</span><span class="mi">128</span>
         <span class="p">},</span>
         <span class="nt">&quot;storage&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="s2">&quot;wiredTiger&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inMemory&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;inMemorySizeRatio&quot;</span><span class="p">:</span><span class="mf">0.9</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;mmapv1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;nsSize&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span>
               <span class="nt">&quot;smallfiles&quot;</span><span class="p">:</span><span class="kc">false</span>
            <span class="p">},</span>
            <span class="nt">&quot;wiredTiger&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;collectionConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;blockCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;cacheSizeRatio&quot;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
                  <span class="nt">&quot;directoryForIndexes&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                  <span class="nt">&quot;journalCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;indexConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;prefixCompression&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;pmm&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-pmm&quot;</span><span class="p">,</span>
         <span class="nt">&quot;serverHost&quot;</span><span class="p">:</span><span class="s2">&quot;monitoring-service&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;5&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;secrets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-secrets&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;updateStrategy&quot;</span><span class="p">:</span><span class="s2">&quot;SmartUpdate&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;status&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;conditions&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:03Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:39Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:41Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:41Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:29:10Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterReady&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:49:46Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:50:00Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:52:31Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:52:43Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:01Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:05Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:05Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterReady&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;observedGeneration&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;rs0&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;ready&quot;</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="s2">&quot;ready&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="update-psmdb-cluster-image">
<h2><a class="toc-backref" href="#id6">Update PSMDB cluster image</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Change the image of PSMDB containers inside the cluster
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl patch psmdb my-cluster-name --type<span class="o">=</span>merge --patch <span class="s1">&#39;{</span>
<span class="s1">&quot;spec&quot;: {&quot;psmdb&quot;:{ &quot;image&quot;: &quot;percona/percona-server-mongodb-operator:1.4.0-mongod4.2&quot; }</span>
<span class="s1">}}&#39;</span>
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XPATCH <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Content-Type: application/merge-patch+json&quot;</span>
            -d <span class="s1">&#39;{</span>
<span class="s1">              &quot;spec&quot;: {&quot;psmdb&quot;:{ &quot;image&quot;: &quot;percona/percona-server-mongodb-operator:1.4.0-mongod4.2&quot; }</span>
<span class="s1">              }}&#39;</span>
</pre></div>
</div>
<p><strong>Request Body:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;image &quot;</span><span class="p">:</span> <span class="s2">&quot;percona/percona-server-mongodb:4.2.8-8&quot;</span> <span class="p">}</span>
<span class="p">}}</span>
</pre></div>
</div>
</div>
<p><strong>Input:</strong></p>
<blockquote>
<div><p><strong>spec</strong>:</p>
<p>psmdb:</p>
<ol class="arabic simple">
<li><p>image (String, min-length: 1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">image</span> <span class="pre">to</span> <span class="pre">update</span> <span class="pre">for</span> <span class="pre">PSMDB</span></code></p></li>
</ol>
</div></blockquote>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDB&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1-5-0\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDB\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;my-cluster-name\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;allowUnsafeConfigurations\&quot;:false,\&quot;backup\&quot;:{\&quot;enabled\&quot;:true,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-backup\&quot;,\&quot;restartOnFailure\&quot;:true,\&quot;serviceAccountName\&quot;:\&quot;percona-server-mongodb-operator\&quot;,\&quot;storages\&quot;:null,\&quot;tasks\&quot;:null},\&quot;image\&quot;:\&quot;percona/percona-server-mongodb:4.2.8-8\&quot;,\&quot;imagePullPolicy\&quot;:\&quot;Always\&quot;,\&quot;mongod\&quot;:{\&quot;net\&quot;:{\&quot;hostPort\&quot;:0,\&quot;port\&quot;:27017},\&quot;operationProfiling\&quot;:{\&quot;mode\&quot;:\&quot;slowOp\&quot;,\&quot;rateLimit\&quot;:100,\&quot;slowOpThresholdMs\&quot;:100},\&quot;security\&quot;:{\&quot;enableEncryption\&quot;:true,\&quot;encryptionCipherMode\&quot;:\&quot;AES256-CBC\&quot;,\&quot;encryptionKeySecret\&quot;:\&quot;my-cluster-name-mongodb-encryption-key\&quot;,\&quot;redactClientLogData\&quot;:false},\&quot;setParameter\&quot;:{\&quot;ttlMonitorSleepSecs\&quot;:60,\&quot;wiredTigerConcurrentReadTransactions\&quot;:128,\&quot;wiredTigerConcurrentWriteTransactions\&quot;:128},\&quot;storage\&quot;:{\&quot;engine\&quot;:\&quot;wiredTiger\&quot;,\&quot;inMemory\&quot;:{\&quot;engineConfig\&quot;:{\&quot;inMemorySizeRatio\&quot;:0.9}},\&quot;mmapv1\&quot;:{\&quot;nsSize\&quot;:16,\&quot;smallfiles\&quot;:false},\&quot;wiredTiger\&quot;:{\&quot;collectionConfig\&quot;:{\&quot;blockCompressor\&quot;:\&quot;snappy\&quot;},\&quot;engineConfig\&quot;:{\&quot;cacheSizeRatio\&quot;:0.5,\&quot;directoryForIndexes\&quot;:false,\&quot;journalCompressor\&quot;:\&quot;snappy\&quot;},\&quot;indexConfig\&quot;:{\&quot;prefixCompression\&quot;:true}}}},\&quot;pmm\&quot;:{\&quot;enabled\&quot;:false,\&quot;image\&quot;:\&quot;percona/percona-server-mongodb-operator:1.5.0-pmm\&quot;,\&quot;serverHost\&quot;:\&quot;monitoring-service\&quot;},\&quot;replsets\&quot;:[{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;arbiter\&quot;:{\&quot;affinity\&quot;:{\&quot;antiAffinityTopologyKey\&quot;:\&quot;none\&quot;},\&quot;enabled\&quot;:false,\&quot;size\&quot;:1},\&quot;expose\&quot;:{\&quot;enabled\&quot;:false,\&quot;exposeType\&quot;:\&quot;LoadBalancer\&quot;},\&quot;name\&quot;:\&quot;rs0\&quot;,\&quot;podDisruptionBudget\&quot;:{\&quot;maxUnavailable\&quot;:1},\&quot;resources\&quot;:{\&quot;limits\&quot;:null},\&quot;size\&quot;:3,\&quot;volumeSpec\&quot;:{\&quot;persistentVolumeClaim\&quot;:{\&quot;accessModes\&quot;:[\&quot;ReadWriteOnce\&quot;],\&quot;resources\&quot;:{\&quot;requests\&quot;:{\&quot;storage\&quot;:\&quot;3Gi\&quot;}},\&quot;storageClassName\&quot;:\&quot;standard\&quot;}}}],\&quot;secrets\&quot;:{\&quot;users\&quot;:\&quot;my-cluster-name-secrets\&quot;},\&quot;updateStrategy\&quot;:\&quot;SmartUpdate\&quot;}}\n&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1-5-0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:allowUnsafeConfigurations&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:enabled&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serviceAccountName&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:imagePullPolicy&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:mongod&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:net&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:port&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:operationProfiling&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:mode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:rateLimit&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:slowOpThresholdMs&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:security&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:enableEncryption&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionCipherMode&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:encryptionKeySecret&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:setParameter&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ttlMonitorSleepSecs&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:storage&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:engine&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:inMemory&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:inMemorySizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:mmapv1&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:nsSize&quot;</span><span class="p">:{</span>

                           <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;f:wiredTiger&quot;</span><span class="p">:{</span>
                           <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                           <span class="p">},</span>
                           <span class="nt">&quot;f:collectionConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:blockCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:engineConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:cacheSizeRatio&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:journalCompressor&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">},</span>
                           <span class="nt">&quot;f:indexConfig&quot;</span><span class="p">:{</span>
                              <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                              <span class="p">},</span>
                              <span class="nt">&quot;f:prefixCompression&quot;</span><span class="p">:{</span>

                              <span class="p">}</span>
                           <span class="p">}</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:pmm&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:image&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:serverHost&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:users&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:updateStrategy&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:27:58Z&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:backup&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;f:containerSecurityContext&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:runAsNonRoot&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:runAsUser&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">},</span>
                     <span class="nt">&quot;f:podSecurityContext&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:fsGroup&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:clusterServiceDNSSuffix&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:runUid&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:secrets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;f:ssl&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:sslInternal&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:conditions&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:observedGeneration&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:rs0&quot;</span><span class="p">:{</span>
                        <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:ready&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:size&quot;</span><span class="p">:{</span>

                        <span class="p">},</span>
                        <span class="nt">&quot;f:status&quot;</span><span class="p">:{</span>

                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;f:state&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T15:35:14Z&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:image &quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:replsets&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:size&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-27T12:21:39Z&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1279853&quot;</span><span class="p">,</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;5207e71a-c83f-4707-b892-63aa93fb615c&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;allowUnsafeConfigurations&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;backup&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-backup&quot;</span><span class="p">,</span>
         <span class="nt">&quot;restartOnFailure&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
         <span class="nt">&quot;serviceAccountName&quot;</span><span class="p">:</span><span class="s2">&quot;percona-server-mongodb-operator&quot;</span><span class="p">,</span>
         <span class="nt">&quot;storages&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
         <span class="nt">&quot;tasks&quot;</span><span class="p">:</span><span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;image &quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb:4.2.8-8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;imagePullPolicy&quot;</span><span class="p">:</span><span class="s2">&quot;Always&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mongod&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;net&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;hostPort&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="mi">27017</span>
         <span class="p">},</span>
         <span class="nt">&quot;operationProfiling&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;slowOp&quot;</span><span class="p">,</span>
            <span class="nt">&quot;rateLimit&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
            <span class="nt">&quot;slowOpThresholdMs&quot;</span><span class="p">:</span><span class="mi">100</span>
         <span class="p">},</span>
         <span class="nt">&quot;security&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;enableEncryption&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;encryptionCipherMode&quot;</span><span class="p">:</span><span class="s2">&quot;AES256-CBC&quot;</span><span class="p">,</span>
            <span class="nt">&quot;encryptionKeySecret&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-mongodb-encryption-key&quot;</span><span class="p">,</span>
            <span class="nt">&quot;redactClientLogData&quot;</span><span class="p">:</span><span class="kc">false</span>
         <span class="p">},</span>
         <span class="nt">&quot;setParameter&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ttlMonitorSleepSecs&quot;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentReadTransactions&quot;</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span>
            <span class="nt">&quot;wiredTigerConcurrentWriteTransactions&quot;</span><span class="p">:</span><span class="mi">128</span>
         <span class="p">},</span>
         <span class="nt">&quot;storage&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="s2">&quot;wiredTiger&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inMemory&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;inMemorySizeRatio&quot;</span><span class="p">:</span><span class="mf">0.9</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;mmapv1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;nsSize&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span>
               <span class="nt">&quot;smallfiles&quot;</span><span class="p">:</span><span class="kc">false</span>
            <span class="p">},</span>
            <span class="nt">&quot;wiredTiger&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;collectionConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;blockCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;engineConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;cacheSizeRatio&quot;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
                  <span class="nt">&quot;directoryForIndexes&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                  <span class="nt">&quot;journalCompressor&quot;</span><span class="p">:</span><span class="s2">&quot;snappy&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;indexConfig&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;prefixCompression&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;pmm&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
         <span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="s2">&quot;percona/percona-server-mongodb-operator:1.5.0-pmm&quot;</span><span class="p">,</span>
         <span class="nt">&quot;serverHost&quot;</span><span class="p">:</span><span class="s2">&quot;monitoring-service&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;5&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;secrets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;users&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name-secrets&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;updateStrategy&quot;</span><span class="p">:</span><span class="s2">&quot;SmartUpdate&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;status&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;conditions&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:03Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:39Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:41Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:28:41Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:29:10Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterReady&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:49:46Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:50:00Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:52:31Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:52:43Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;Error&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:01Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:05Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterInitializing&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;lastTransitionTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-24T14:53:05Z&quot;</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;ClusterReady&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;observedGeneration&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;replsets&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;rs0&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;ready&quot;</span>
         <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="s2">&quot;ready&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="backup-psmdb-cluster">
<h2><a class="toc-backref" href="#id7">Backup PSMDB cluster</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Takes a backup of the PSMDB cluster containers data to be able to recover from disasters or make a roll-back later
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f percona-server-mongodb-operator/deploy/backup/backup.yaml
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbbackups
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XPOST <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbbackups&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
            -d <span class="s2">&quot;@backup.json&quot;</span> -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><strong>Request Body (backup.json):</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDBBackup&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;backup1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;psmdbCluster&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storageName&quot;</span><span class="p">:</span><span class="s2">&quot;s3-us-west&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><strong>Input:</strong></p>
<ol class="arabic">
<li><p><strong>metadata</strong>:</p>
<blockquote>
<div><p>name(String, min-length:1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">backup</span> <span class="pre">to</span> <span class="pre">create</span></code></p>
</div></blockquote>
</li>
<li><p><strong>spec</strong>:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>psmdbCluster(String, min-length:1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">PSMDB</span> <span class="pre">cluster</span></code></p></li>
<li><p>storageName(String, min-length:1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">storage</span> <span class="pre">claim</span> <span class="pre">to</span> <span class="pre">use</span></code></p></li>
</ol>
</div></blockquote>
</li>
</ol>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDBBackup&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDBBackup\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;backup1\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;psmdbCluster\&quot;:\&quot;my-cluster-name\&quot;,\&quot;storageName\&quot;:\&quot;s3-us-west\&quot;}}\n&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-27T13:45:43Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:psmdbCluster&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:storageName&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-27T13:45:43Z&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;backup1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1290243&quot;</span><span class="p">,</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbbackups/backup1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;e695d1c7-898e-44b0-b356-537284f6c046&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;psmdbCluster&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;storageName&quot;</span><span class="p">:</span><span class="s2">&quot;s3-us-west&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="restore-psmdb-cluster">
<h2><a class="toc-backref" href="#id8">Restore PSMDB cluster</a></h2>
<p><strong>Description:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Restores PSMDB cluster data to an earlier version to recover from a problem or to make a roll-back
</pre></div>
</div>
<p><strong>Kubectl Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f percona-server-mongodb-operator/deploy/backup/restore.yaml
</pre></div>
</div>
<p><strong>URL:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://<span class="nv">$API_SERVER</span>/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbrestores
</pre></div>
</div>
<p><strong>Authentication:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Authorization: Bearer <span class="nv">$KUBE_TOKEN</span>
</pre></div>
</div>
<p><strong>cURL Request:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -k -v -XPOST <span class="s2">&quot;https://</span><span class="nv">$API_SERVER</span><span class="s2">/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbrestores&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
            -d <span class="s2">&quot;@restore.json&quot;</span> <span class="se">\</span>
            -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$KUBE_TOKEN</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><strong>Request Body (restore.json):</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDBRestore&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;restore1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;backupName&quot;</span><span class="p">:</span><span class="s2">&quot;backup1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;clusterName&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><strong>Input:</strong></p>
<ol class="arabic">
<li><p><strong>metadata</strong>:</p>
<blockquote>
<div><p>name(String, min-length:1): <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">restore</span> <span class="pre">to</span> <span class="pre">create</span></code></p>
</div></blockquote>
</li>
<li><p><strong>spec</strong>:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>clusterName(String, min-length:1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">PSMDB</span> <span class="pre">cluster</span></code></p></li>
<li><p>backupName(String, min-length:1) : <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">of</span> <span class="pre">backup</span> <span class="pre">to</span> <span class="pre">restore</span> <span class="pre">from</span></code></p></li>
</ol>
</div></blockquote>
</li>
</ol>
<p><strong>Response:</strong></p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>JSON:</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
   <span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="s2">&quot;PerconaServerMongoDBRestore&quot;</span><span class="p">,</span>
   <span class="nt">&quot;metadata&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;annotations&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;apiVersion\&quot;:\&quot;psmdb.percona.com/v1\&quot;,\&quot;kind\&quot;:\&quot;PerconaServerMongoDBRestore\&quot;,\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{},\&quot;name\&quot;:\&quot;restore1\&quot;,\&quot;namespace\&quot;:\&quot;default\&quot;},\&quot;spec\&quot;:{\&quot;backupName\&quot;:\&quot;backup1\&quot;,\&quot;clusterName\&quot;:\&quot;my-cluster-name\&quot;}}\n&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;creationTimestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-27T13:52:56Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;managedFields&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="s2">&quot;psmdb.percona.com/v1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsType&quot;</span><span class="p">:</span><span class="s2">&quot;FieldsV1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fieldsV1&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;f:metadata&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;f:annotations&quot;</span><span class="p">:{</span>
                     <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                     <span class="p">},</span>
                     <span class="nt">&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;</span><span class="p">:{</span>

                     <span class="p">}</span>
                  <span class="p">}</span>
               <span class="p">},</span>
               <span class="nt">&quot;f:spec&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;.&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:backupName&quot;</span><span class="p">:{</span>

                  <span class="p">},</span>
                  <span class="nt">&quot;f:clusterName&quot;</span><span class="p">:{</span>

                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;manager&quot;</span><span class="p">:</span><span class="s2">&quot;kubectl&quot;</span><span class="p">,</span>
            <span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span>
            <span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;2020-07-27T13:52:56Z&quot;</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;restore1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resourceVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1291198&quot;</span><span class="p">,</span>
      <span class="nt">&quot;selfLink&quot;</span><span class="p">:</span><span class="s2">&quot;/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbrestores/restore1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;17e982fe-ac41-47f4-afba-fea380b0c76e&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;spec&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;backupName&quot;</span><span class="p">:</span><span class="s2">&quot;backup1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;clusterName&quot;</span><span class="p">:</span><span class="s2">&quot;my-cluster-name&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
    <div class="related row">
      
      <ul class="nav nav-pills">
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="faq.html" title="Frequently Asked Questions"
             >next</a></li>
        <li class="right" >
          <a href="images.html" title="Percona certified images"
             >previous</a></li>
        <li><a href="index.html">Percona Kubernetes Operator for Percona Server for MongoDB Documentation</a></li> 
      </ul>
    </div>
      </div>
      <div class="sphinxsidebar  col-md-3 col-md-pull-9">
        <div class="sphinxsidebarwrapper">
  
          {@ product_logo @}          

          {@ product_pdf_download @}
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PSMDB API Documentation</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#create-new-psmdb-cluster">Create new PSMDB cluster</a></li>
<li><a class="reference internal" href="#list-psmdb-cluster">List PSMDB cluster</a></li>
<li><a class="reference internal" href="#get-status-of-psmdb-cluster">Get status of PSMDB cluster</a></li>
<li><a class="reference internal" href="#scale-up-down-psmdb-cluster">Scale up/down PSMDB cluster</a></li>
<li><a class="reference internal" href="#update-psmdb-cluster-image">Update PSMDB cluster image</a></li>
<li><a class="reference internal" href="#backup-psmdb-cluster">Backup PSMDB cluster</a></li>
<li><a class="reference internal" href="#restore-psmdb-cluster">Restore PSMDB cluster</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="images.html"
                        title="previous chapter">Percona certified images</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="faq.html"
                        title="next chapter">Frequently Asked Questions</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">jQuery(document).ready(function(){ jQuery('#searchbox').show(0); });</script>
          {@ product_series @}
        </div>
      </div>
      <div class="clearer"></div>
    </div>
 <script type="text/javascript">
   ( function($) {
     $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
           $(this).parent().children().not(".header").toggle(400);
           $(this).parent().children(".header").toggleClass("open");
        })
     });
   } ) ( jQuery );
</script>

  </div>
  </body>
