%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}


\usepackage{sphinxmessages}
\setcounter{tocdepth}{-1}



\title{Percona Kubernetes Operator for Percona Server for MongoDB Documentation}
\date{Dec 22, 2020}
\release{1.6.0}
\author{Percona LLC and/or its affiliates 2009-2020}
\newcommand{\sphinxlogo}{\sphinxincludegraphics{percona-logo.jpg}\par}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


The \sphinxhref{https://github.com/percona/percona-server-mongodb-operator}{Percona Kubernetes Operator for Percona Server for MongoDB} automates the creation, modification, or deletion of items in your Percona Server for MongoDB environment. The Operator contains the necessary Kubernetes settings to maintain a consistent Percona Server for MongoDB instance.

The Percona Kubernetes Operators are based on best practices for the configuration of a Percona Server for MongoDB replica set. The Operator provides many benefits but saving time, a consistent environment are the most important.


\part{Requirements}
\label{\detokenize{index:requirements}}

\chapter{System Requirements}
\label{\detokenize{System-Requirements:system-requirements}}\label{\detokenize{System-Requirements::doc}}
The Operator was developed and tested with Percona Server for MongoDB 3.6, 4.0,
and 4.2. Other options may or may not work.

\begin{sphinxadmonition}{note}{Note:}
The already deprecated \sphinxhref{https://docs.mongodb.com/manual/core/storage-engines/}{MMAPv1 storage engine}
for Percona Server for MongoDB 3.6 and 4.0 is not supported by the Operator
starting from version 1.6.
\end{sphinxadmonition}

Also, Operator 1.6 supports Percona Server for MongoDB sharding with only one
Replica Set.


\section{Officially supported platforms}
\label{\detokenize{System-Requirements:officially-supported-platforms}}
The following platforms were tested and are officially supported by the Operator
1.6.0:
\begin{itemize}
\item {} 
OpenShift 3.11

\item {} 
OpenShift 4.5

\item {} 
Google Kubernetes Engine (GKE) 1.15 \sphinxhyphen{} 1.17

\item {} 
Amazon Elastic Container Service for Kubernetes (EKS) 1.15

\item {} 
Minikube 1.10

\item {} 
VMWare Tanzu

\end{itemize}

Other Kubernetes platforms may also work but have not been tested.


\section{Resource Limits}
\label{\detokenize{System-Requirements:resource-limits}}
A cluster running an officially supported platform contains at least 3
Nodes, with the following resources:
\begin{itemize}
\item {} 
2GB of RAM,

\item {} 
2 CPU threads per Node for Pods provisioning,

\item {} 
at least 60GB of available storage for Private Volumes provisioning.

\end{itemize}

Also, the number of Replica Set Nodes should not be odd
if {\hyperref[\detokenize{arbiter:arbiter}]{\sphinxcrossref{\DUrole{std,std-ref}{Arbiter}}}} is not enabled.

\begin{sphinxadmonition}{note}{Note:}
Use Storage Class with XFS as the default filesystem if possible
\end{sphinxadmonition}

\sphinxhref{https://dba.stackexchange.com/questions/190578/is-xfs-still-the-best-choice-for-mongodb}{to achieve better MongoDB performance}.


\section{Platform\sphinxhyphen{}specific limitations}
\label{\detokenize{System-Requirements:platform-specific-limitations}}
The Operator is subsequent to specific platform limitations.
\begin{itemize}
\item {} 
Minikube doesn’t support multi\sphinxhyphen{}node cluster configurations because of its
local nature, which is in collision with the default affinity requirements
of the Operator. To arrange this, the {\hyperref[\detokenize{minikube:install-minikube}]{\sphinxcrossref{\DUrole{std,std-ref}{Install Percona Server for MongoDB on Minikube}}}} instruction
includes an additional step which turns off the requirement of having not
less than three Nodes.

\end{itemize}


\chapter{Design overview}
\label{\detokenize{architecture:design-overview}}\label{\detokenize{architecture::doc}}
The design of the operator is tighly bound to the Percona Server for
MongoDB replica set, which is briefly described in the following
diagram.

\noindent{\hspace*{\fill}\sphinxincludegraphics[width=250\sphinxpxdimen,height=250\sphinxpxdimen]{{replication}.png}\hspace*{\fill}}

A replica set consists of one primary server and several secondary ones
(two in the picture), and the client application accesses the servers
via a driver.

To provide high availability the Operator uses \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#affinity-and-anti-affinity}{node
affinity}
to run MongoDB instances on separate worker nodes if possible, and the
database cluster is deployed as a single Replica Set with at least three
nodes. If a node fails, the pod with the mongod process is automatically
re\sphinxhyphen{}created on another node. If the failed node was hosting the primary
server, the replica set initiates elections to select a new primary. If
the failed node was running the Operator, Kubernetes will restart the Operator on
another node, so normal operation will not be interrupted.

Client applications should use a mongo+srv URI for the connection. This
allows the drivers (3.6 and up) to retrieve the list of replica set
members from DNS SRV entries without having to list hostnames for the
dynamically assigned nodes.

\begin{sphinxadmonition}{note}{Note:}
The Operator uses security settings which are more secure
than the default Percona Server for MongoDB setup. The initial
configuration contains default passwords for all needed user accounts,
which should be changed in the production environment, as stated in
the  \sphinxhref{openshift.html}{installation instructions}.
\end{sphinxadmonition}

\noindent{\hspace*{\fill}\sphinxincludegraphics[width=250\sphinxpxdimen,height=250\sphinxpxdimen]{{operator}.png}\hspace*{\fill}}

To provide data storage for stateful applications, Kubernetes uses
Persistent Volumes. A \sphinxstyleemphasis{PersistentVolumeClaim} (PVC) is used to implement
the automatic storage provisioning to pods. If a failure occurs, the
Container Storage Interface (CSI) should be able to re\sphinxhyphen{}mount storage on
a different node. The PVC StorageClass must support this feature
(Kubernetes and OpenShift support this in versions 1.9 and 3.9
respectively).

The Operator functionality extends the Kubernetes API with
\sphinxstyleemphasis{PerconaServerMongoDB} object, and it is implemented as a golang
application. Each \sphinxstyleemphasis{PerconaServerMongoDB} object maps to one separate
PSMDB setup. The Operator listens to all events on the created objects.
When a new PerconaServerMongoDB object is created, or an existing one
undergoes some changes or deletion, the operator automatically
creates/changes/deletes all needed Kubernetes objects with the
appropriate settings to provide a properly operating replica set.


\part{Quickstart guides}
\label{\detokenize{index:quickstart-guides}}

\chapter{Install Percona Server for MongoDB on Minikube}
\label{\detokenize{minikube:install-percona-server-for-mongodb-on-minikube}}\label{\detokenize{minikube:install-minikube}}\label{\detokenize{minikube::doc}}
Installing the PSMDB Operator on \sphinxhref{https://github.com/kubernetes/minikube}{Minikube}
is the easiest way to try it locally without a cloud provider. Minikube runs
Kubernetes on GNU/Linux, Windows, or macOS system using a system\sphinxhyphen{}wide
hypervisor, such as VirtualBox, KVM/QEMU, VMware Fusion or Hyper\sphinxhyphen{}V. Using it is
a popular way to test Kubernetes application locally prior to deploying it on a
cloud.

The following steps are needed to run PSMDB Operator on minikube:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{-1}
\item {} 
\sphinxhref{https://kubernetes.io/docs/tasks/tools/install-minikube/}{Install minikube}, using a way recommended for your system. This includes the installation of the following three components:
\#. kubectl tool,
\#. a hypervisor, if it is not already installed,
\#. actual minikube package

After the installation, run \sphinxcode{\sphinxupquote{minikube start \sphinxhyphen{}\sphinxhyphen{}memory=4096 \sphinxhyphen{}\sphinxhyphen{}cpus=3}}
(parameters increase the virtual machine limits for the CPU cores and memory,
to ensure stable work of the Operator). Being executed, this command will
download needed virtualized images, then initialize and run the
cluster. After Minikube is successfully started, you can optionally run the
Kubernetes dashboard, which visually represents the state of your cluster.
Executing \sphinxcode{\sphinxupquote{minikube dashboard}} will start the dashboard and open it in your
default web browser.

\item {} 
Clone the percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator repository:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{git} \PYG{n}{clone} \PYG{o}{\PYGZhy{}}\PYG{n}{b} \PYG{n}{v1}\PYG{o}{.}\PYG{l+m+mf}{6.0} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{percona}\PYG{o}{/}\PYG{n}{percona}\PYG{o}{\PYGZhy{}}\PYG{n}{server}\PYG{o}{\PYGZhy{}}\PYG{n}{mongodb}\PYG{o}{\PYGZhy{}}\PYG{n}{operator}
\PYG{n}{cd} \PYG{n}{percona}\PYG{o}{\PYGZhy{}}\PYG{n}{server}\PYG{o}{\PYGZhy{}}\PYG{n}{mongodb}\PYG{o}{\PYGZhy{}}\PYG{n}{operator}
\end{sphinxVerbatim}

\item {} 
Deploy the operator with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{apply} \PYG{o}{\PYGZhy{}}\PYG{n}{f} \PYG{n}{deploy}\PYG{o}{/}\PYG{n}{bundle}\PYG{o}{.}\PYG{n}{yaml}
\end{sphinxVerbatim}

\item {} 
Because minikube runs locally, the default \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file should
be edited to adapt the Operator for the the local installation with limited
resources. Change the following keys in the \sphinxcode{\sphinxupquote{replsets}} section:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
comment \sphinxcode{\sphinxupquote{resources.requests.memory}} and \sphinxcode{\sphinxupquote{resources.requests.cpu}} keys
(this will fit the Operator in minikube default limitations)

\item {} 
set \sphinxcode{\sphinxupquote{affinity.antiAffinityTopologyKey}} key to \sphinxcode{\sphinxupquote{"none"}} (the Operator
will be unable to spread the cluster on several nodes)

\end{enumerate}

Also, switch \sphinxcode{\sphinxupquote{allowUnsafeConfigurations}} key to \sphinxcode{\sphinxupquote{true}} (this option turns
off the Operator’s control over the cluster configuration, making it possible to
deploy Percona Server for MongoDB as a one\sphinxhyphen{}node cluster).

\item {} 
Now apply the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{apply} \PYG{o}{\PYGZhy{}}\PYG{n}{f} \PYG{n}{deploy}\PYG{o}{/}\PYG{n}{cr}\PYG{o}{.}\PYG{n}{yaml}
\end{sphinxVerbatim}

\item {} 
During previous steps, the Operator has generated several \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{secrets},
including the password for the admin user, which you will need to access the
cluster. Use \sphinxcode{\sphinxupquote{kubectl get secrets}} to see the list of Secrets objects (by
default Secrets object you are interested in has \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}}
name). Then \sphinxcode{\sphinxupquote{kubectl get secret my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets \sphinxhyphen{}o yaml}} will return
the YAML file with generated secrets, including the \sphinxcode{\sphinxupquote{MONGODB\_USER\_ADMIN}}
and \sphinxcode{\sphinxupquote{MONGODB\_USER\_ADMIN\_PASSWORD}} strings, which should look as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{data}\PYG{p}{:}
  \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
  \PYG{n}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}PASSWORD}\PYG{p}{:} \PYG{n}{aDAzQ0pCY3NSWEZ2ZUIzS1I}\PYG{o}{=}
  \PYG{n}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}USER}\PYG{p}{:} \PYG{n}{dXNlckFkbWlu}
\end{sphinxVerbatim}

Here the actual login name and password are base64\sphinxhyphen{}encoded, and
\sphinxcode{\sphinxupquote{echo \textquotesingle{}aDAzQ0pCY3NSWEZ2ZUIzS1I=\textquotesingle{} | base64 \sphinxhyphen{}\sphinxhyphen{}decode}} will bring it back to a
human\sphinxhyphen{}readable form.

\item {} 
Check connectivity to a newly created cluster.

First of all, run percona\sphinxhyphen{}client and connect its console output to your
terminal (running it may require some time to deploy the correspondent Pod):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
\end{sphinxVerbatim}

Now run \sphinxcode{\sphinxupquote{mongo}} tool in the percona\sphinxhyphen{}client command shell using the login
(which is \sphinxcode{\sphinxupquote{userAdmin}}) and password obtained from the secret:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://userAdmin:userAdminPassword@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.default.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
\end{sphinxVerbatim}

\end{enumerate}


\chapter{Install Percona server for MongoDB on Google Kubernetes Engine (GKE)}
\label{\detokenize{gke:install-percona-server-for-mongodb-on-google-kubernetes-engine-gke}}\label{\detokenize{gke::doc}}
This quickstart shows you how to configure a Percona server for MongoDB operator with the Google Kubernetes Engine. The document assumes some experience with Google Kubernetes Engine (GKE). For more information on the GKE, see the \sphinxhref{https://cloud.google.com/kubernetes-engine/docs/quickstart}{Kubernetes Engine Quickstart}.


\section{Prerequisites}
\label{\detokenize{gke:prerequisites}}
All commands from this quickstart can be run either in the \sphinxstylestrong{Google Cloud shell} or in \sphinxstylestrong{your local shell}.

To use \sphinxstyleemphasis{Google Cloud shell}, you need nothing but a modern web browser.

If you would like to use \sphinxstyleemphasis{your local shell}, install the following:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxhref{https://cloud.google.com/sdk/docs/quickstarts}{gcloud}. This tool is part of the Google Cloud SDK. To install it, select your operating system on the \sphinxhref{https://cloud.google.com/sdk/docs}{official Google Cloud SDK documentation page} and then follow the instructions.

\item {} 
\sphinxhref{https://cloud.google.com/kubernetes-engine/docs/quickstart\#choosing\_a\_shell}{kubectl}. It is the Kubernetes command\sphinxhyphen{}line tool you will use to manage and deploy applications. To install the tool, run the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} gcloud auth login
\PYGZdl{} gcloud components install kubectl
\end{sphinxVerbatim}

\end{enumerate}


\section{Configuring default settings for the cluster}
\label{\detokenize{gke:configuring-default-settings-for-the-cluster}}
You can configure the settings using the \sphinxcode{\sphinxupquote{gcloud}} tool. You can run it either in the \sphinxhref{https://cloud.google.com/shell/docs/quickstart}{Cloud Shell} or in your local shell (if you have installed Google Cloud SDK locally on the previous step). The following command will create a cluster named \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} gcloud container clusters create my\PYGZhy{}cluster\PYGZhy{}name \PYGZhy{}\PYGZhy{}project \PYGZlt{}project name\PYGZgt{} \PYGZhy{}\PYGZhy{}zone us\PYGZhy{}central1\PYGZhy{}a \PYGZhy{}\PYGZhy{}cluster\PYGZhy{}version \PYG{l+m}{1}.15 \PYGZhy{}\PYGZhy{}machine\PYGZhy{}type n1\PYGZhy{}standard\PYGZhy{}4 \PYGZhy{}\PYGZhy{}num\PYGZhy{}nodes\PYG{o}{=}\PYG{l+m}{3}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
You must edit the following command and other command\sphinxhyphen{}line statements to replace the \sphinxcode{\sphinxupquote{\textless{}project name\textgreater{}}} placeholder with your project name. You may also be required to edit the \sphinxstyleemphasis{zone location}, which is set to \sphinxcode{\sphinxupquote{us\sphinxhyphen{}central1}} in the above example. Other parameters specify that we are creating a cluster with 3 nodes and with machine type of 4 vCPUs and 45 GB memory.
\end{sphinxadmonition}

You may wait a few minutes for the cluster to be generated, and then you will see it listed in the Google Cloud console (select \sphinxstyleemphasis{Kubernetes Engine} \(\rightarrow\) \sphinxstyleemphasis{Clusters} in the left menu panel):

\noindent{\hspace*{\fill}\sphinxincludegraphics{{gke-quickstart-cluster-connect}.png}\hspace*{\fill}}

Now you should configure the command\sphinxhyphen{}line access to your newly created cluster to make \sphinxcode{\sphinxupquote{kubectl}} be able to use it.

In the Google Cloud Console, select your cluster and then click the \sphinxstyleemphasis{Connect} shown on the above image. You will see the connect statement configures command\sphinxhyphen{}line access. After you have edited the statement, you may run the command in your local shell:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} gcloud container clusters get\PYGZhy{}credentials my\PYGZhy{}cluster\PYGZhy{}name \PYGZhy{}\PYGZhy{}zone us\PYGZhy{}central1\PYGZhy{}a \PYGZhy{}\PYGZhy{}project \PYGZlt{}project name\PYGZgt{}
\end{sphinxVerbatim}


\section{Installing the Operator}
\label{\detokenize{gke:installing-the-operator}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
First of all, use your \sphinxhref{https://cloud.google.com/iam}{Cloud Identity and Access Management (Cloud IAM)} to control access to the cluster. The following command will give you the ability to create Roles and RoleBindings:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl create clusterrolebinding cluster\PYGZhy{}admin\PYGZhy{}binding \PYGZhy{}\PYGZhy{}clusterrole cluster\PYGZhy{}admin \PYGZhy{}\PYGZhy{}user \PYG{k}{\PYGZdl{}(}gcloud config get\PYGZhy{}value core/account\PYG{k}{)}
\end{sphinxVerbatim}

The return statement confirms the creation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
clusterrolebinding.rbac.authorization.k8s.io/cluster\PYGZhy{}admin\PYGZhy{}binding created
\end{sphinxVerbatim}

\item {} 
Create a namespace and set the context for the namespace. The resource names must be unique within the namespace and provide a way to divide cluster resources between users spread across multiple projects.

So, create the namespace and save it in the namespace context for subsequent commands as follows (replace the \sphinxcode{\sphinxupquote{\textless{}namespace name\textgreater{}}} placeholder with some descriptive name):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl create namespace \PYGZlt{}namespace name\PYGZgt{}
\PYGZdl{} kubectl config set\PYGZhy{}context \PYG{k}{\PYGZdl{}(}kubectl config current\PYGZhy{}context\PYG{k}{)} \PYGZhy{}\PYGZhy{}namespace\PYG{o}{=}\PYGZlt{}namespace name\PYGZgt{}
\end{sphinxVerbatim}

At success, you will see the message that namespace/\textless{}namespace name\textgreater{} was created, and the context (gke\_\textless{}project name\textgreater{}\_\textless{}zone location\textgreater{}\_\textless{}cluster name\textgreater{}) was modified.

\item {} 
Use the following \sphinxcode{\sphinxupquote{git clone}} command to download the correct branch of the percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator repository:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git clone \PYGZhy{}b v1.6.0 https://github.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\end{sphinxVerbatim}

After the repository is downloaded, change the directory to run the rest of the commands in this document:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd} percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\end{sphinxVerbatim}

\item {} 
Deploy the Operator with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f deploy/bundle.yaml
\end{sphinxVerbatim}

The following confirmation is returned:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
customresourcedefinition.apiextensions.k8s.io/perconaservermongodbs.psmdb.percona.com created
customresourcedefinition.apiextensions.k8s.io/perconaservermongodbbackups.psmdb.percona.com created
customresourcedefinition.apiextensions.k8s.io/perconaservermongodbrestores.psmdb.percona.com created
role.rbac.authorization.k8s.io/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
serviceaccount/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
rolebinding.rbac.authorization.k8s.io/service\PYGZhy{}account\PYGZhy{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
deployment.apps/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
\end{sphinxVerbatim}

\item {} 
The operator has been started, and you can create the Percona Server for MongoDB:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/cr.yaml
\end{sphinxVerbatim}

The process could take some time.
The return statement confirms the creation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
perconaservermongodb.psmdb.percona.com/my\PYGZhy{}cluster\PYGZhy{}name created
\end{sphinxVerbatim}

\item {} 
During previous steps, the Operator has generated several \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{secrets}, including the password for the \sphinxcode{\sphinxupquote{root}} user, which you will need to access the cluster.

Use \sphinxcode{\sphinxupquote{kubectl get secrets}} command to see the list of Secrets objects (by default Secrets object you are interested in has \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}secrets}} name). Then \sphinxcode{\sphinxupquote{kubectl get secret my\sphinxhyphen{}cluster\sphinxhyphen{}secrets \sphinxhyphen{}o yaml}} will return the YAML file with generated secrets, including the \sphinxcode{\sphinxupquote{MONGODB\_USER\_ADMIN}}
and \sphinxcode{\sphinxupquote{MONGODB\_USER\_ADMIN\_PASSWORD}} strings, which should look as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nn}{...}
\PYG{n+nt}{data}\PYG{p}{:}
  \PYG{l+lScalar+lScalarPlain}{...}
  \PYG{l+lScalar+lScalarPlain}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}PASSWORD}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{aDAzQ0pCY3NSWEZ2ZUIzS1I=}
  \PYG{n+nt}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{dXNlckFkbWlu}
\end{sphinxVerbatim}

Here the actual password is base64\sphinxhyphen{}encoded, and \sphinxcode{\sphinxupquote{echo \textquotesingle{}aDAzQ0pCY3NSWEZ2ZUIzS1I=\textquotesingle{} | base64 \sphinxhyphen{}\sphinxhyphen{}decode}} will bring it back to a human\sphinxhyphen{}readable form.

\end{enumerate}


\section{Verifying the cluster operator}
\label{\detokenize{gke:verifying-the-cluster-operator}}
It may take ten minutes to get the cluster started. You  can verify its creation with the \sphinxcode{\sphinxupquote{kubectl get pods}} command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl get pods
NAME                                                      READY   STATUS    RESTARTS   AGE
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}0                                     2/2     Running   0          8m
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}1                                     2/2     Running   0          8m
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}2                                     2/2     Running   0          7m
percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZhy{}5bcc66fb65\PYGZhy{}lxzw5          1/1     Running   0          9m
\end{sphinxVerbatim}

Also, you can see the same information when browsing Pods of your cluster in Google Cloud console via the \sphinxstyleemphasis{Object Browser}:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{gke-quickstart-object-browser}.png}\hspace*{\fill}}

If all nodes are up and running, you can try to connect to the cluster.

First of all, run percona\sphinxhyphen{}client and connect its console output to your
terminal (running it may require some time to deploy the correspondent Pod):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
\end{sphinxVerbatim}

Now run \sphinxcode{\sphinxupquote{mongo}} tool in the percona\sphinxhyphen{}client command shell using the login
(which is \sphinxcode{\sphinxupquote{userAdmin}}) and password obtained from the secret:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://userAdmin:userAdminPassword@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.default.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
\end{sphinxVerbatim}


\section{Troubleshooting}
\label{\detokenize{gke:troubleshooting}}
If \sphinxcode{\sphinxupquote{kubectl get pods}} command had shown some errors, you can examine the problematic Pod with the \sphinxcode{\sphinxupquote{kubectl describe \textless{}pod name\textgreater{}}} command.  For example, this command returns information for the selected Pod:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl describe pod my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}2
\end{sphinxVerbatim}

Review the detailed information for \sphinxcode{\sphinxupquote{Warning}} statements and then correct the configuration. An example of a warning is as follows:
\begin{quote}

\sphinxstyleemphasis{Warning  FailedScheduling  68s (x4 over 2m22s)  default\sphinxhyphen{}scheduler  0/1 nodes are available: 1 node(s) didn’t match pod affinity/anti\sphinxhyphen{}affinity, 1 node(s) didn’t satisfy existing pods anti\sphinxhyphen{}affinity rules.}
\end{quote}

Alternatively, you can examine your Pods via the \sphinxstyleemphasis{object browser}. Errors will look as follows:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{gke-quickstart-object-browser-error}.png}\hspace*{\fill}}

Clicking the problematic Pod will bring you to the details page with the same warning:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{gke-quickstart-object-browser-details}.png}\hspace*{\fill}}


\section{Removing the GKE cluster}
\label{\detokenize{gke:removing-the-gke-cluster}}
There are several ways that you can delete the cluster.

You can clean up the cluster with the \sphinxcode{\sphinxupquote{gcloud}} command as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
gcloud container clusters delete \PYGZlt{}cluster name\PYGZgt{}
\end{sphinxVerbatim}

The return statement requests your confirmation of the deletion. Type \sphinxcode{\sphinxupquote{y}} to confirm.

Also, you can delete your cluster via the GKE console. Just click the appropriate trashcan icon in the clusters list:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{gke-quickstart-cluster-connect}.png}\hspace*{\fill}}

The cluster deletion may take time.


\chapter{Install Percona server for MongoDB on Amazon Elastic Kubernetes Service (EKS)}
\label{\detokenize{eks:install-percona-server-for-mongodb-on-amazon-elastic-kubernetes-service-eks}}\label{\detokenize{eks::doc}}
This quickstart shows you how to deploy Percona server for MongoDB operator on Amazon Elastic Kubernetes Service (EKS). The document assumes some experience with Amazon EKS. For more information on the EKS, see the \sphinxhref{https://aws.amazon.com/eks/}{Amazon EKS official documentation}.


\section{Prerequisites}
\label{\detokenize{eks:prerequisites}}
The following tools are used in this guide and therefore should be preinstalled:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxstylestrong{AWS Command Line Interface (AWS CLI)} for interacting with the different
parts of AWS. You can install it following the \sphinxhref{https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html}{official installation instructions for your system}.

\item {} 
\sphinxstylestrong{eksctl} to simplify cluster creation on EKS. It can be installed
along its \sphinxhref{https://github.com/weaveworks/eksctl\#installation}{installation notes on GitHub}.

\item {} 
\sphinxstylestrong{kubectl}  to manage and deploy applications on Kubernetes. Install
it \sphinxhref{https://kubernetes.io/docs/tasks/tools/install-kubectl/}{following the official installation instructions}.

\end{enumerate}

Also, you need to configure AWS CLI with your credentials according to the \sphinxhref{https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html}{official guide}.


\section{Create the EKS cluster}
\label{\detokenize{eks:create-the-eks-cluster}}
To create your cluster, you will need the following data:
\begin{itemize}
\item {} 
name of your EKS cluster,

\item {} 
AWS region in which you wish to deploy your cluster,

\item {} 
the amount of nodes you would like tho have,

\item {} 
the desired ratio between \sphinxhref{https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-on-demand-instances.html}{on\sphinxhyphen{}demand} and \sphinxhref{https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html}{spot} instances in the total number of nodes.

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxhref{https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html}{spot} instances
are not recommended for production environment, but may be useful e.g. for testing purposes.
\end{sphinxadmonition}

The most easy and visually clear way is to describe the desired cluster in YAML
and to pass this configuration to the \sphinxcode{\sphinxupquote{eksctl}} command.

The following example configures a EKS cluster with one \sphinxhref{https://docs.aws.amazon.com/eks/latest/userguide/managed-node-groups.html}{managed node group}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{eksctl.io/v1alpha5}
\PYG{n+nt}{kind}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ClusterConfig}

\PYG{n+nt}{metadata}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{test\PYGZhy{}cluster}
    \PYG{n+nt}{region}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{eu\PYGZhy{}west\PYGZhy{}2}

\PYG{n+nt}{nodeGroups}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ng\PYGZhy{}1}
      \PYG{n+nt}{minSize}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{3}
      \PYG{n+nt}{maxSize}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{5}
      \PYG{n+nt}{instancesDistribution}\PYG{p}{:}
        \PYG{n+nt}{maxPrice}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0.15}
        \PYG{n+nt}{instanceTypes}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{l+s}{\PYGZdq{}}\PYG{l+s}{m5.xlarge}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{,} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{m5.2xlarge}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{]} \PYG{c+c1}{\PYGZsh{} At least two instance types should be specified}
        \PYG{n+nt}{onDemandBaseCapacity}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0}
        \PYG{n+nt}{onDemandPercentageAboveBaseCapacity}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{50}
        \PYG{n+nt}{spotInstancePools}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{2}
      \PYG{n+nt}{tags}\PYG{p}{:}
        \PYG{l+s}{\PYGZsq{}}\PYG{l+s}{iit\PYGZhy{}billing\PYGZhy{}tag}\PYG{l+s}{\PYGZsq{}}\PYG{p+pIndicator}{:} \PYG{l+s}{\PYGZsq{}}\PYG{l+s}{cloud}\PYG{l+s}{\PYGZsq{}}
      \PYG{n+nt}{preBootstrapCommands}\PYG{p}{:}
          \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{echo}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}OPTIONS=}\PYG{l+s}{\PYGZbs{}\PYGZdq{}}\PYG{l+s}{\PYGZhy{}\PYGZhy{}default\PYGZhy{}ulimit}\PYG{n+nv}{ }\PYG{l+s}{nofile=1048576:1048576}\PYG{l+s}{\PYGZbs{}\PYGZdq{}}\PYG{l+s}{\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZgt{}\PYGZgt{}}\PYG{n+nv}{ }\PYG{l+s}{/etc/sysconfig/docker}\PYG{l+s}{\PYGZdq{}}
          \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{systemctl}\PYG{n+nv}{ }\PYG{l+s}{restart}\PYG{n+nv}{ }\PYG{l+s}{docker}\PYG{l+s}{\PYGZdq{}}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxcode{\sphinxupquote{preBootstrapCommands}} section is used in the
above example to increase the limits for the amount of opened files:
this is important and shouldn’t be omitted, taking into account the
default EKS soft limit of 65536 files.
\end{sphinxadmonition}

When the cluster configuration file is ready, you can actually create your cluster
by the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} eksctl create cluster \PYGZhy{}f \PYGZti{}/cluster.yaml
\end{sphinxVerbatim}


\section{Install the Operator}
\label{\detokenize{eks:install-the-operator}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Create a namespace and set the context for the namespace. The resource names must be unique within the namespace and provide a way to divide cluster resources between users spread across multiple projects.

So, create the namespace and save it in the namespace context for subsequent commands as follows (replace the \sphinxcode{\sphinxupquote{\textless{}namespace name\textgreater{}}} placeholder with some descriptive name):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl create namespace \PYGZlt{}namespace name\PYGZgt{}
\PYGZdl{} kubectl config set\PYGZhy{}context \PYG{k}{\PYGZdl{}(}kubectl config current\PYGZhy{}context\PYG{k}{)} \PYGZhy{}\PYGZhy{}namespace\PYG{o}{=}\PYGZlt{}namespace name\PYGZgt{}
\end{sphinxVerbatim}

At success, you will see the message that namespace/\textless{}namespace name\textgreater{} was created, and the context was modified.

\item {} 
Use the following \sphinxcode{\sphinxupquote{git clone}} command to download the correct branch of the percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator repository:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git clone \PYGZhy{}b v1.6.0 https://github.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\end{sphinxVerbatim}

After the repository is downloaded, change the directory to run the rest of the commands in this document:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nb}{cd} percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\end{sphinxVerbatim}

\item {} 
Deploy the Operator with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f deploy/bundle.yaml
\end{sphinxVerbatim}

The following confirmation is returned:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
customresourcedefinition.apiextensions.k8s.io/perconaservermongodbs.psmdb.percona.com created
customresourcedefinition.apiextensions.k8s.io/perconaservermongodbbackups.psmdb.percona.com created
customresourcedefinition.apiextensions.k8s.io/perconaservermongodbrestores.psmdb.percona.com created
role.rbac.authorization.k8s.io/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
serviceaccount/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
rolebinding.rbac.authorization.k8s.io/service\PYGZhy{}account\PYGZhy{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
deployment.apps/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator created
\end{sphinxVerbatim}

\item {} 
The operator has been started, and you can create the Percona Server for MongoDB:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/cr.yaml
\end{sphinxVerbatim}

The process could take some time.
The return statement confirms the creation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
perconaservermongodb.psmdb.percona.com/my\PYGZhy{}cluster\PYGZhy{}name created
\end{sphinxVerbatim}

\item {} 
During previous steps, the Operator has generated several \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{secrets}, including the password for the \sphinxcode{\sphinxupquote{root}} user, which you will need to access the cluster.

Use \sphinxcode{\sphinxupquote{kubectl get secrets}} command to see the list of Secrets objects (by default Secrets object you are interested in has \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}secrets}} name). Then \sphinxcode{\sphinxupquote{kubectl get secret my\sphinxhyphen{}cluster\sphinxhyphen{}secrets \sphinxhyphen{}o yaml}} will return the YAML file with generated secrets, including the \sphinxcode{\sphinxupquote{MONGODB\_USER\_ADMIN}}
and \sphinxcode{\sphinxupquote{MONGODB\_USER\_ADMIN\_PASSWORD}} strings, which should look as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nn}{...}
\PYG{n+nt}{data}\PYG{p}{:}
  \PYG{l+lScalar+lScalarPlain}{...}
  \PYG{l+lScalar+lScalarPlain}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}PASSWORD}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{aDAzQ0pCY3NSWEZ2ZUIzS1I=}
  \PYG{n+nt}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{dXNlckFkbWlu}
\end{sphinxVerbatim}

Here the actual password is base64\sphinxhyphen{}encoded, and \sphinxcode{\sphinxupquote{echo \textquotesingle{}aDAzQ0pCY3NSWEZ2ZUIzS1I=\textquotesingle{} | base64 \sphinxhyphen{}\sphinxhyphen{}decode}} will bring it back to a human\sphinxhyphen{}readable form.

\item {} 
Check connectivity to a newly created cluster.

First of all, run percona\sphinxhyphen{}client and connect its console output to your
terminal (running it may require some time to deploy the correspondent Pod):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
\end{sphinxVerbatim}

Now run \sphinxcode{\sphinxupquote{mongo}} tool in the percona\sphinxhyphen{}client command shell using the login
(which is \sphinxcode{\sphinxupquote{userAdmin}}) and password obtained from the secret:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://userAdmin:userAdminPassword@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.default.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
\end{sphinxVerbatim}

\end{enumerate}


\part{Advanced Installation Guides}
\label{\detokenize{index:advanced-installation-guides}}

\chapter{Install Percona server for MongoDB on Kubernetes}
\label{\detokenize{kubernetes:install-percona-server-for-mongodb-on-kubernetes}}\label{\detokenize{kubernetes::doc}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{-1}
\item {} 
Clone the percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator repository:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git clone \PYGZhy{}b v1.6.0 https://github.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\PYG{n+nb}{cd} percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
It is crucial to specify the right branch with \sphinxcode{\sphinxupquote{\sphinxhyphen{}b}}
option while cloning the code on this step. Please be careful.
\end{sphinxadmonition}

\item {} 
The Custom Resource Definition for PSMDB should be created from the
\sphinxcode{\sphinxupquote{deploy/crd.yaml}} file. The Custom Resource Definition extends the
standard set of resources which Kubernetes “knows” about with the new
items (in our case resources which are the core of the operator).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/crd.yaml
\end{sphinxVerbatim}

This step should be done only once; the step does not need to be repeated
with any other Operator deployments.

\item {} 
Add the \sphinxcode{\sphinxupquote{psmdb}} namespace to Kubernetes,
and set the correspondent context for further steps:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl create namespace psmdb
\PYGZdl{} kubectl config set\PYGZhy{}context \PYG{k}{\PYGZdl{}(}kubectl config current\PYGZhy{}context\PYG{k}{)} \PYGZhy{}\PYGZhy{}namespace\PYG{o}{=}psmdb
\end{sphinxVerbatim}

\item {} 
The role\sphinxhyphen{}based access control (RBAC) for PSMDB is configured with the \sphinxcode{\sphinxupquote{deploy/rbac.yaml}} file. Role\sphinxhyphen{}based access is
based on defined roles and the available actions which correspond to
each role. The role and actions are defined for Kubernetes resources in the yaml file. Further details
about users and roles can be found in \sphinxhref{https://kubernetes.io/docs/reference/access-authn-authz/rbac/\#default-roles-and-role-bindings}{Kubernetes
documentation}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/rbac.yaml
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
Setting RBAC requires your user to have cluster\sphinxhyphen{}admin role
privileges. For example, those using Google Kubernetes Engine can
grant user needed privileges with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl create clusterrolebinding cluster\PYGZhy{}admin\PYGZhy{}binding \PYGZhy{}\PYGZhy{}clusterrole=cluster\PYGZhy{}admin \PYGZhy{}\PYGZhy{}user=\PYGZdl{}(gcloud config get\PYGZhy{}value core/account)
\end{sphinxVerbatim}
\end{sphinxadmonition}

\item {} 
Start the operator within Kubernetes:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/operator.yaml
\end{sphinxVerbatim}

\item {} 
Add the MongoDB Users secrets to Kubernetes. These secrets
should be placed as plain text in the stringData section of the
\sphinxcode{\sphinxupquote{deploy/secrets.yaml}} file as login name and
passwords for the user accounts (see \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{Kubernetes
documentation}
for details).

After editing the yaml file, MongoDB Users secrets should be created
using the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl create \PYGZhy{}f deploy/secrets.yaml
\end{sphinxVerbatim}

More details about secrets can be found in {\hyperref[\detokenize{users:users}]{\sphinxcrossref{\DUrole{std,std-ref}{Users}}}}.

\item {} 
Now certificates should be generated. By default, the Operator generates
certificates automatically, and no actions are required at this step. Still,
you can generate and apply your own certificates as secrets according
to the {\hyperref[\detokenize{TLS:tls}]{\sphinxcrossref{\DUrole{std,std-ref}{TLS instructions}}}}.

\item {} 
After the operator is started, Percona Server for MongoDB cluster can
be created with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/cr.yaml
\end{sphinxVerbatim}

The creation process may take some time. The process is over when both
operator and replica set pod have reached their Running status:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl get pods
NAME                                               READY   STATUS    RESTARTS   AGE
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}0                              \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          8m
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}1                              \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          8m
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}2                              \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          7m
percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZhy{}754846f95d\PYGZhy{}sf6h6   \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          9m
\end{sphinxVerbatim}

\item {} 
Check connectivity to newly created cluster

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
percona\PYGZhy{}client:/\PYGZdl{} mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://userAdmin:userAdmin123456@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.psmdb.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
\end{sphinxVerbatim}

\end{enumerate}


\chapter{Install Percona server for MongoDB on OpenShift}
\label{\detokenize{openshift:install-percona-server-for-mongodb-on-openshift}}\label{\detokenize{openshift::doc}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{-1}
\item {} 
Clone the percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator repository:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git clone \PYGZhy{}b v1.6.0 https://github.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\PYG{n+nb}{cd} percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
It is crucial to specify the right branch with \sphinxcode{\sphinxupquote{\sphinxhyphen{}b}}
option while cloning the code on this step. Please be careful.
\end{sphinxadmonition}

\item {} 
The Custom Resource Definition for PSMDB should be created from the
\sphinxcode{\sphinxupquote{deploy/crd.yaml}} file. The Custom Resource Definition extends the
standard set of resources which Kubernetes “knows” about with the new
items, in our case these items are the core of the operator.

This step should be done only once; it does not need to be repeated with other deployments.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc apply \PYGZhy{}f deploy/crd.yaml
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
Setting Custom Resource Definition requires your user to
have cluster\sphinxhyphen{}admin role privileges.
\end{sphinxadmonition}

If you want to manage PSMDB cluster with a non\sphinxhyphen{}privileged user, the
necessary permissions can be granted by applying the next clusterrole:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc create clusterrole psmdb\PYGZhy{}admin \PYGZhy{}\PYGZhy{}verb\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}*\PYGZdq{}} \PYGZhy{}\PYGZhy{}resource\PYG{o}{=}perconaservermongodbs.psmdb.percona.com,perconaservermongodbs.psmdb.percona.com/status,perconaservermongodbbackups.psmdb.percona.com,perconaservermongodbbackups.psmdb.percona.com/status,perconaservermongodbrestores.psmdb.percona.com,perconaservermongodbrestores.psmdb.percona.com/status
\PYGZdl{} oc adm policy add\PYGZhy{}cluster\PYGZhy{}role\PYGZhy{}to\PYGZhy{}user psmdb\PYGZhy{}admin \PYGZlt{}some\PYGZhy{}user\PYGZgt{}
\end{sphinxVerbatim}

If you have a \sphinxhref{https://docs.cert-manager.io/en/release-0.8/getting-started/install/openshift.html}{cert\sphinxhyphen{}manager} installed, then you have to execute two more commands to be able to manage certificates with a non\sphinxhyphen{}privileged user:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc create clusterrole cert\PYGZhy{}admin \PYGZhy{}\PYGZhy{}verb\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}*\PYGZdq{}} \PYGZhy{}\PYGZhy{}resource\PYG{o}{=}iissuers.certmanager.k8s.io,certificates.certmanager.k8s.io
\PYGZdl{} oc adm policy add\PYGZhy{}cluster\PYGZhy{}role\PYGZhy{}to\PYGZhy{}user cert\PYGZhy{}admin \PYGZlt{}some\PYGZhy{}user\PYGZgt{}
\end{sphinxVerbatim}

\item {} 
Create a new \sphinxcode{\sphinxupquote{psmdb}} project:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc new\PYGZhy{}project psmdb
\end{sphinxVerbatim}

\item {} 
Add role\sphinxhyphen{}based access control (RBAC) for PSMDB is configured with
the \sphinxcode{\sphinxupquote{deploy/rbac.yaml}} file. RBAC is
based on clearly defined roles and corresponding allowed actions. These actions are allowed on specific Kubernetes resources. The details
about users and roles can be found in \sphinxhref{https://docs.openshift.com/enterprise/3.0/architecture/additional\_concepts/authorization.html}{OpenShift
documentation}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc apply \PYGZhy{}f deploy/rbac.yaml
\end{sphinxVerbatim}

\item {} 
Start the Operator within OpenShift:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc apply \PYGZhy{}f deploy/operator.yaml
\end{sphinxVerbatim}

\item {} 
Add the MongoDB Users secrets to OpenShift. These secrets
should be placed as plain text in the stringData section of the
\sphinxcode{\sphinxupquote{deploy/secrets.yaml}} file as login name and
passwords for the user accounts (see \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{Kubernetes
documentation}
for details).

After editing the yaml file, the secrets should be created
with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc create \PYGZhy{}f deploy/secrets.yaml
\end{sphinxVerbatim}

More details about secrets can be found in {\hyperref[\detokenize{users:users}]{\sphinxcrossref{\DUrole{std,std-ref}{Users}}}}.

\item {} 
Now certificates should be generated. By default, the Operator generates
certificates automatically, and no actions are required at this step. Still,
you can generate and apply your own certificates as secrets according
to the {\hyperref[\detokenize{TLS:tls}]{\sphinxcrossref{\DUrole{std,std-ref}{TLS instructions}}}}.

\item {} 
Percona Server for MongoDB cluster can
be created at any time with the following two steps:
\begin{enumerate}
\sphinxsetlistlabels{\alph}{enumii}{enumiii}{}{.}%
\item {} 
Uncomment the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} field \sphinxcode{\sphinxupquote{\#platform:}} and edit the field
to \sphinxcode{\sphinxupquote{platform: openshift}}. The result should be like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{psmdb.percona.com/v1alpha1}
\PYG{n+nt}{kind}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{PerconaServerMongoDB}
\PYG{n+nt}{metadata}\PYG{p}{:}
  \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{my\PYGZhy{}cluster\PYGZhy{}name}
\PYG{n+nt}{spec}\PYG{p}{:}
  \PYG{n+nt}{platform}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{openshift}
\PYG{n+nn}{...}
\end{sphinxVerbatim}

\end{enumerate}

b (optional). In you’re using minishift, please adjust antiaffinity policy to \sphinxcode{\sphinxupquote{none}}
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
   \PYG{n+nt}{affinity}\PYG{p}{:}
     \PYG{n+nt}{antiAffinityTopologyKey}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{none}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\end{quote}
\begin{enumerate}
\sphinxsetlistlabels{\alph}{enumii}{enumiii}{}{.}%
\setcounter{enumii}{2}
\item {} 
Create/apply the CR file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc apply \PYGZhy{}f deploy/cr.yaml
\end{sphinxVerbatim}

\end{enumerate}

The creation process will take time. The process is complete when both the
operator and the replica set pod have reached their Running status:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc get pods
NAME                                               READY   STATUS    RESTARTS   AGE
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}0                              \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          8m
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}1                              \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          8m
my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}2                              \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          7m
percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZhy{}754846f95d\PYGZhy{}sf6h6   \PYG{l+m}{1}/1     Running   \PYG{l+m}{0}          9m
\end{sphinxVerbatim}

\item {} 
Check connectivity to newly created cluster. Please note that mongo client command shall be executed inside the container manually.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
percona\PYGZhy{}client:/\PYGZdl{} mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://userAdmin:userAdmin123456@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.psmdb.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
\end{sphinxVerbatim}

\end{enumerate}


\chapter{Use Docker images from a custom registry}
\label{\detokenize{custom-registry:use-docker-images-from-a-custom-registry}}\label{\detokenize{custom-registry:custom-registry}}\label{\detokenize{custom-registry::doc}}
Using images from a private Docker registry may required for
privacy, security or other reasons. In these cases, Percona Server for
MongoDB Operator allows the use of a custom registry This following example of the
Operator deployed in the OpenShift environment demonstrates the process:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Log into the OpenShift and create a project.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc login
Authentication required \PYG{k}{for} https://192.168.1.100:8443 \PYG{o}{(}openshift\PYG{o}{)}
Username: admin
Password:
Login successful.
\PYGZdl{} oc new\PYGZhy{}project psmdb
Now using project \PYG{l+s+s2}{\PYGZdq{}psmdb\PYGZdq{}} on server \PYG{l+s+s2}{\PYGZdq{}https://192.168.1.100:8443\PYGZdq{}}.
\end{sphinxVerbatim}

\item {} 
You need obtain the following objects to configure your custom registry
access:
\begin{itemize}
\item {} 
A user token

\item {} 
the registry IP address

\end{itemize}

You can view the token with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc whoami \PYGZhy{}t
ADO8CqCDappWR4hxjfDqwijEHei31yXAvWg61Jg210s
\end{sphinxVerbatim}

The following command returns the registry IP address:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl get services/docker\PYGZhy{}registry \PYGZhy{}n default
NAME              TYPE        CLUSTER\PYGZhy{}IP       EXTERNAL\PYGZhy{}IP   PORT\PYG{o}{(}S\PYG{o}{)}    AGE
docker\PYGZhy{}registry   ClusterIP   \PYG{l+m}{172}.30.162.173   \PYGZlt{}none\PYGZgt{}        \PYG{l+m}{5000}/TCP   1d
\end{sphinxVerbatim}

\item {} 
Use the user token and the registry IP address to login to the
registry:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} docker login \PYGZhy{}u admin \PYGZhy{}p ADO8CqCDappWR4hxjfDqwijEHei31yXAvWg61Jg210s \PYG{l+m}{172}.30.162.173:5000
Login Succeeded
\end{sphinxVerbatim}

\item {} 
Use the Docker commands to pull the needed image by its SHA digest:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} docker pull docker.io/perconalab/percona\PYGZhy{}server\PYGZhy{}mongodb@sha256:a66e889d3e986413e41083a9c887f33173da05a41c8bd107cf50eede4588a505
Trying to pull repository docker.io/perconalab/percona\PYGZhy{}server\PYGZhy{}mongodb ...
sha256:a66e889d3e986413e41083a9c887f33173da05a41c8bd107cf50eede4588a505: Pulling from docker.io/perconalab/percona\PYGZhy{}server\PYGZhy{}mongodb
Digest: sha256:a66e889d3e986413e41083a9c887f33173da05a41c8bd107cf50eede4588a505
Status: Image is up to date \PYG{k}{for} docker.io/perconalab/percona\PYGZhy{}server\PYGZhy{}mongodb@sha256:a66e889d3e986413e41083a9c887f33173da05a41c8bd107cf50eede4588a505
\end{sphinxVerbatim}

You can find correct names and SHA digests in the
{\hyperref[\detokenize{images:custom-registry-images}]{\sphinxcrossref{\DUrole{std,std-ref}{current list of the Operator\sphinxhyphen{}related images officially certified by Percona}}}}.

\item {} 
The following method can push an image to the custom registry
for the example OpenShift PSMDB project:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} docker tag \PYG{l+s+se}{\PYGZbs{}}
    docker.io/perconalab/percona\PYGZhy{}server\PYGZhy{}mongodb@sha256:a66e889d3e986413e41083a9c887f33173da05a41c8bd107cf50eede4588a505 \PYG{l+s+se}{\PYGZbs{}}
    \PYG{l+m}{172}.30.162.173:5000/psmdb/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}
\PYGZdl{} docker push \PYG{l+m}{172}.30.162.173:5000/psmdb/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
Verify the image is available in the OpenShift registry with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc get is
NAME                              DOCKER REPO                                                             TAGS             UPDATED
percona\PYGZhy{}server\PYGZhy{}mongodb            docker\PYGZhy{}registry.default.svc:5000/psmdb/percona\PYGZhy{}server\PYGZhy{}mongodb  \PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}  \PYG{l+m}{2} hours ago
\end{sphinxVerbatim}

\item {} 
When the custom registry image is available, edit the the \sphinxcode{\sphinxupquote{image:}} option in \sphinxcode{\sphinxupquote{deploy/operator.yaml}} configuration file with a Docker Repo + Tag string (it should look like\textasciigrave{}\textasciigrave{}docker\sphinxhyphen{}registry.default.svc:5000/psmdb/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:\{\{\{mongodb42recommended\}\}\}\textasciigrave{}\textasciigrave{})

\begin{sphinxadmonition}{note}{Note:}
If the registry requires authentication, you can specify the \sphinxcode{\sphinxupquote{imagePullSecrets}} option for all images.
\end{sphinxadmonition}

\item {} 
Repeat steps 3\sphinxhyphen{}5 for other images, and update corresponding options
in the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file.

\item {} 
Now follow the standard \sphinxhref{./openshift.html}{Percona Server for MongoDB Operator installation instruction}

\end{enumerate}


\chapter{Deploy Percona server for MongoDB with Service Broker}
\label{\detokenize{broker:deploy-percona-server-for-mongodb-with-service-broker}}\label{\detokenize{broker::doc}}
Percona Service Broker provides the \sphinxhref{https://www.openservicebrokerapi.org/}{Open Service Broker} object to facilitate the operator deployment within high\sphinxhyphen{}level visual tools. Following steps are needed to use it while installing the Percona Server for MongoDB on the OpenShift platform:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
The Percona Service Broker is to be deployed based on the \sphinxcode{\sphinxupquote{percona\sphinxhyphen{}broker.yaml}} file. To use it you should first enable the \sphinxhref{https://docs.openshift.com/container-platform/4.1/applications/service\_brokers/installing-service-catalog.html}{Service Catalog}, which can be done as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc patch servicecatalogapiservers cluster \PYGZhy{}\PYGZhy{}patch \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}\PYGZdq{}spec\PYGZdq{}:\PYGZob{}\PYGZdq{}managementState\PYGZdq{}:\PYGZdq{}Managed\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZsq{}} \PYGZhy{}\PYGZhy{}type\PYG{o}{=}merge
\PYGZdl{} oc patch servicecatalogcontrollermanagers cluster \PYGZhy{}\PYGZhy{}patch \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}\PYGZdq{}spec\PYGZdq{}:\PYGZob{}\PYGZdq{}managementState\PYGZdq{}:\PYGZdq{}Managed\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZsq{}} \PYGZhy{}\PYGZhy{}type\PYG{o}{=}merge
\end{sphinxVerbatim}

When Service Catalog is enabled, download and install the Percona Service
Broker in a typical OpenShift way:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} oc apply \PYGZhy{}f https://raw.githubusercontent.com/Percona\PYGZhy{}Lab/percona\PYGZhy{}dbaas\PYGZhy{}cli/broker/deploy/percona\PYGZhy{}broker.yaml
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
This step should be done only once; the step does not need to be repeated
with any other Operator deployments. It will automatically create and setup
the needed service and projects catalog with all necessary objects.
\end{sphinxadmonition}

\item {} 
Now login to your \sphinxhref{https://github.com/openshift/console}{OpenShift Console Web UI} and switch to the percona\sphinxhyphen{}service\sphinxhyphen{}broker project. You can check its Pod running on a correspondent page:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{broker-pods}.png}\hspace*{\fill}}

Now switch to the Developer Catalog and select Percona Kubernetes Operator
for MongoDB:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{broker-dev-catalog}.png}\hspace*{\fill}}

Choose \sphinxcode{\sphinxupquote{Percona Kubernetes Operator for Percona Server for MongoDB}} item.
This will lead you to the Operator page with the \sphinxstyleemphasis{Create Service Instance}
button.

\item {} 
Clicking the \sphinxstyleemphasis{Create Service Instance} button guides you to the next page:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{broker-create-service-instance}.png}\hspace*{\fill}}

The two necessary fields are \sphinxstyleemphasis{Service Instance Name} and \sphinxstyleemphasis{Cluster Name},
which should be unique for your project.

\item {} 
Clicking the \sphinxstyleemphasis{Create} button gets you to the \sphinxstyleemphasis{Overview} page, which reflects
the process of the cluster creation process:

\noindent{\hspace*{\fill}\sphinxincludegraphics{{broker-creation}.png}\hspace*{\fill}}

You can also track Pods to see when they are deployed and track any errors.

\end{enumerate}


\chapter{Install Percona Server for MongoDB using Helm}
\label{\detokenize{helm:install-percona-server-for-mongodb-using-helm}}\label{\detokenize{helm:install-helm}}\label{\detokenize{helm::doc}}
\sphinxhref{https://github.com/helm/helm}{Helm} is the package manager for Kubernetes.


\section{Pre\sphinxhyphen{}requisites}
\label{\detokenize{helm:pre-requisites}}
Install Helm following its \sphinxhref{https://docs.helm.sh/using\_helm/\#installing-helm}{official installation instructions}.

\begin{sphinxadmonition}{note}{Note:}
At least \sphinxcode{\sphinxupquote{2.4.0}} version of Helm is needed to run the following steps.
\end{sphinxadmonition}


\section{Installation}
\label{\detokenize{helm:installation}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Add the Percona’s Helm charts repository and make your Helm client up to
date with it:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
helm repo add percona https://percona.github.io/percona\PYGZhy{}helm\PYGZhy{}charts/
helm repo update
\end{sphinxVerbatim}

\item {} 
Install Percona Operator for Percona Server for MongoDB:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
helm install my\PYGZhy{}op percona/psmdb\PYGZhy{}operator
\end{sphinxVerbatim}

The \sphinxcode{\sphinxupquote{my\sphinxhyphen{}op}} parameter in the above example is the name of \sphinxhref{https://helm.sh/docs/intro/using\_helm/\#three-big-concepts}{a new release object}
which is created for the Operator when you install its Helm chart. Use any
arbitrary name with Helm 3.x or omit it with Helm 2.x.

\begin{sphinxadmonition}{note}{Note:}
If nothing explicitly specified, \sphinxcode{\sphinxupquote{helm install}} command will work
with \sphinxcode{\sphinxupquote{default}} namespace. To use different namespace, provide it with
the following additional parameter: \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}namespace my\sphinxhyphen{}namespace}}.
\end{sphinxadmonition}

\item {} 
Install Percona Server for MongoDB:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
helm install my\PYGZhy{}db percona/psmdb\PYGZhy{}db
\end{sphinxVerbatim}

The \sphinxcode{\sphinxupquote{my\sphinxhyphen{}db}} parameter in the above example is the name of \sphinxhref{https://helm.sh/docs/intro/using\_helm/\#three-big-concepts}{a new release object}
which is created for the Percona Server for MongoDB when you install its Helm
chart. Use any arbitrary name with Helm 3.x or omit it with Helm 2.x.

\end{enumerate}


\section{Installing Percona Server for MongoDB with customized parameters}
\label{\detokenize{helm:installing-percona-server-for-mongodb-with-customized-parameters}}
The command above installs Percona Server for MongoDB with {\hyperref[\detokenize{operator:operator-custom-resource-options}]{\sphinxcrossref{\DUrole{std,std-ref}{default parameters}}}}.
Custom options can be passed to a \sphinxcode{\sphinxupquote{helm install}} command as a
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set key=value{[},key=value{]}}} argument. The options passed with a chart can be
any of the Operator’s {\hyperref[\detokenize{operator:operator-custom-resource-options}]{\sphinxcrossref{\DUrole{std,std-ref}{Custom Resource options}}}}.

The following example will deploy a Percona Server for MongoDB Cluster in the
\sphinxcode{\sphinxupquote{psmdb}} namespace, with disabled backups and 20 Gi storage:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
helm install my\PYGZhy{}db percona/psmdb\PYGZhy{}db \PYGZhy{}\PYGZhy{}namespace psmdb \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set replset.volumeSpec.pvc.resources.requests.storage\PYG{o}{=}20Gi \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set backup.enabled\PYG{o}{=}\PYG{n+nb}{false}
\end{sphinxVerbatim}


\part{Configuration}
\label{\detokenize{index:configuration}}

\chapter{Users}
\label{\detokenize{users:users}}\label{\detokenize{users:id1}}\label{\detokenize{users::doc}}
MongoDB user accounts within the Cluster can be divided into two different groups:
\begin{itemize}
\item {} 
\sphinxstyleemphasis{application\sphinxhyphen{}level users}: the unprivileged user accounts,

\item {} 
\sphinxstyleemphasis{system\sphinxhyphen{}level users}: the accounts needed to automate the cluster deployment
and management tasks, such as MongoDB Health checks.

\end{itemize}

As these two groups of user accounts serve different purposes, they are
considered separately in the following sections.

\begin{sphinxShadowBox}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{users:id6}}{\hyperref[\detokenize{users:users-unprivileged-users}]{\sphinxcrossref{Unprivileged users}}}

\item {} 
\phantomsection\label{\detokenize{users:id7}}{\hyperref[\detokenize{users:users-system-users}]{\sphinxcrossref{System Users}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{users:id8}}{\hyperref[\detokenize{users:yaml-object-format}]{\sphinxcrossref{YAML Object Format}}}

\item {} 
\phantomsection\label{\detokenize{users:id9}}{\hyperref[\detokenize{users:password-rotation-policies-and-timing}]{\sphinxcrossref{Password Rotation Policies and Timing}}}

\end{itemize}

\item {} 
\phantomsection\label{\detokenize{users:id10}}{\hyperref[\detokenize{users:users-development-mode}]{\sphinxcrossref{Development Mode}}}

\item {} 
\phantomsection\label{\detokenize{users:id11}}{\hyperref[\detokenize{users:users-internal-authentication-key}]{\sphinxcrossref{MongoDB Internal Authentication Key (optional)}}}

\end{itemize}
\end{sphinxShadowBox}


\section{Unprivileged users}
\label{\detokenize{users:users-unprivileged-users}}\label{\detokenize{users:id2}}
There are no unprivileged (general purpose) user accounts created by
default. If you need general purpose users, please run commands below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
mongodb@percona\PYGZhy{}client:/\PYGZdl{} mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://userAdmin:userAdmin123456@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.psmdb.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
rs0:PRIMARY\PYGZgt{} db.createUser\PYG{o}{(}\PYG{o}{\PYGZob{}}
    user: \PYG{l+s+s2}{\PYGZdq{}myApp\PYGZdq{}},
    pwd: \PYG{l+s+s2}{\PYGZdq{}myAppPassword\PYGZdq{}},
    roles: \PYG{o}{[}
      \PYG{o}{\PYGZob{}} db: \PYG{l+s+s2}{\PYGZdq{}myApp\PYGZdq{}}, role: \PYG{l+s+s2}{\PYGZdq{}readWrite\PYGZdq{}} \PYG{o}{\PYGZcb{}}
    \PYG{o}{]},
    mechanisms: \PYG{o}{[}
       \PYG{l+s+s2}{\PYGZdq{}SCRAM\PYGZhy{}SHA\PYGZhy{}1\PYGZdq{}}
    \PYG{o}{]}

\PYG{o}{\PYGZcb{}}\PYG{o}{)}
\end{sphinxVerbatim}

Now check the newly created user:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm \PYGZhy{}\PYGZhy{}tty percona\PYGZhy{}client \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}\PYG{o}{\PYGZob{}}mongodb42recommended\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}}\PYG{o}{\PYGZcb{}} \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} bash \PYGZhy{}il
mongodb@percona\PYGZhy{}client:/\PYGZdl{} mongo \PYG{l+s+s2}{\PYGZdq{}mongodb+srv://myApp:myAppPassword@my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0.psmdb.svc.cluster.local/admin?replicaSet=rs0\PYGZam{}ssl=false\PYGZdq{}}
rs0:PRIMARY\PYGZgt{} use myApp
rs0:PRIMARY\PYGZgt{} db.test.insert\PYG{o}{(}\PYG{o}{\PYGZob{}} x: \PYG{l+m}{1} \PYG{o}{\PYGZcb{}}\PYG{o}{)}
rs0:PRIMARY\PYGZgt{} db.test.findOne\PYG{o}{(}\PYG{o}{)}
\end{sphinxVerbatim}


\section{System Users}
\label{\detokenize{users:users-system-users}}\label{\detokenize{users:id3}}
To automate the deployment and management of the cluster components,
the Operator requires system\sphinxhyphen{}level MongoDB users.

During installation, the Operator requires
Kubernetes Secrets to be deployed before the Operator is started. The name of the
required secrets can be set in \sphinxcode{\sphinxupquote{deploy/cr.yaml}} under the
\sphinxcode{\sphinxupquote{spec.secrets}} section.

\sphinxstyleemphasis{Default Secret name:} \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}}

\sphinxstyleemphasis{Secret name field:} \sphinxcode{\sphinxupquote{spec.secrets.users}}

\begin{sphinxadmonition}{warning}{Warning:}
These users should not be used to run an application.
\end{sphinxadmonition}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|}
\hline
\sphinxstyletheadfamily 
User Purpose
&\sphinxstyletheadfamily 
Username Secret Key
&\sphinxstyletheadfamily 
Password Secret Key
\\
\hline
Backup/Restore
&
MONGODB\_BACKUP\_USER
&
MONGODB\_BACKUP\_PASSWORD
\\
\hline
Cluster Admin
&
MONGODB\_CLUSTER\_ADMIN\_USER
&
MONGODB\_CLUSTER\_ADMIN\_PASSWORD
\\
\hline
Cluster Monitor
&
MONGODB\_CLUSTER\_MONITOR\_USER
&
MONGODB\_CLUSTER\_MONITOR\_PASSWORD
\\
\hline
User Admin
&
MONGODB\_USER\_ADMIN\_USER
&
MONGODB\_USER\_ADMIN\_PASSWORD
\\
\hline
PMM Server
&
PMM\_SERVER\_USER
&
PMM\_SERVER\_PASSWORD
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\sphinxtitleref{Backup/Restore} \sphinxhyphen{} MongoDB Role: \sphinxhref{https://docs.mongodb.com/manual/reference/built-in-roles/\#backup}{backup}, \sphinxhref{https://docs.mongodb.com/manual/reference/built-in-roles/\#clusterMonitor}{clusterMonitor}, \sphinxhref{https://docs.mongodb.com/manual/reference/built-in-roles/\#restore}{restore}

\sphinxtitleref{Cluster Admin} \sphinxhyphen{} MongoDB Role: \sphinxhref{https://docs.mongodb.com/manual/reference/built-in-roles/\#clusterAdmin}{clusterAdmin}

\sphinxtitleref{Cluster Monitor} \sphinxhyphen{} MongoDB Role: \sphinxhref{https://docs.mongodb.com/manual/reference/built-in-roles/\#clusterMonitor}{clusterMonitor}

\sphinxtitleref{User Admin} \sphinxhyphen{} MongoDB Role: \sphinxhref{https://docs.mongodb.com/manual/reference/built-in-roles/\#userAdmin}{userAdmin}


\subsection{YAML Object Format}
\label{\detokenize{users:yaml-object-format}}
The default name of the Secrets object for these users is
\sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}} and can be set in the CR for your cluster in
\sphinxcode{\sphinxupquote{spec.secrets.users}} to something different. When you create the object
yourself, the corresponding YAML file should match the following simple format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{v1}
\PYG{n+nt}{kind}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Secret}
\PYG{n+nt}{metadata}\PYG{p}{:}
  \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets}
\PYG{n+nt}{type}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Opaque}
\PYG{n+nt}{stringData}\PYG{p}{:}
  \PYG{n+nt}{MONGODB\PYGZus{}BACKUP\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{backup}
  \PYG{n+nt}{MONGODB\PYGZus{}BACKUP\PYGZus{}PASSWORD}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{backup123456}
  \PYG{n+nt}{MONGODB\PYGZus{}CLUSTER\PYGZus{}ADMIN\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{clusterAdmin}
  \PYG{n+nt}{MONGODB\PYGZus{}CLUSTER\PYGZus{}ADMIN\PYGZus{}PASSWORD}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{clusterAdmin123456}
  \PYG{n+nt}{MONGODB\PYGZus{}CLUSTER\PYGZus{}MONITOR\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{clusterMonitor}
  \PYG{n+nt}{MONGODB\PYGZus{}CLUSTER\PYGZus{}MONITOR\PYGZus{}PASSWORD}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{clusterMonitor123456}
  \PYG{n+nt}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{userAdmin}
  \PYG{n+nt}{MONGODB\PYGZus{}USER\PYGZus{}ADMIN\PYGZus{}PASSWORD}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{userAdmin123456}
  \PYG{n+nt}{PMM\PYGZus{}SERVER\PYGZus{}USER}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{pmm}
  \PYG{n+nt}{PMM\PYGZus{}SERVER\PYGZus{}PASSWORD}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{supa|\PYGZca{}|pazz}
\end{sphinxVerbatim}

The example above matches
{\hyperref[\detokenize{users:users-development-mode}]{\sphinxcrossref{\DUrole{std,std-ref}{what is shipped in deploy/secrets.yaml}}}} which
contains default passwords. You should NOT use these in production, but they are
present to assist in automated testing or simple use in a development
environment.

As you can see, because we use the \sphinxcode{\sphinxupquote{stringData}} type when creating the Secrets
object, all values for each key/value pair are stated in plain text format
convenient from the user’s point of view. But the resulting Secrets
object contains passwords stored as \sphinxcode{\sphinxupquote{data}} \sphinxhyphen{} i.e., base64\sphinxhyphen{}encoded strings.
If you want to update any field, you’ll need to encode the value into base64
format. To do this, you can run \sphinxcode{\sphinxupquote{echo \sphinxhyphen{}n "password" | base64}} in your local
shell to get valid values. For example, setting the PMM Server user’s password
to \sphinxcode{\sphinxupquote{new\_password}} in the \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}} object can be done
with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl patch secret/my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets \PYGZhy{}p \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}\PYGZdq{}data\PYGZdq{}:\PYGZob{}\PYGZdq{}PMM\PYGZus{}SERVER\PYGZus{}PASSWORD\PYGZdq{}: \PYGZsq{}}\PYG{k}{\PYGZdl{}(}\PYG{n+nb}{echo} \PYGZhy{}n new\PYGZus{}password \PYG{p}{|} base64\PYG{k}{)}\PYG{l+s+s1}{\PYGZsq{}\PYGZcb{}\PYGZcb{}\PYGZsq{}}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
The operator creates and updates an additional Secrets object named
based on the cluster name, like \sphinxcode{\sphinxupquote{internal\sphinxhyphen{}my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}users}}. It is
used only by the Operator and should undergo no manual changes by the user.
This object contains secrets with the same passwords as the one specified
in \sphinxcode{\sphinxupquote{spec.secrets.users}} (e.g. \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}}). When the user
updates \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}}, the Operator propagates these changes to
the internal \sphinxcode{\sphinxupquote{internal\sphinxhyphen{}my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}users}} Secrets object.
\end{sphinxadmonition}


\subsection{Password Rotation Policies and Timing}
\label{\detokenize{users:password-rotation-policies-and-timing}}
When there is a change in user secrets, the Operator
creates the necessary transaction to change passwords. This rotation happens
almost instantly (the delay can be up to a few seconds), and it’s not needed to
take any action beyond changing the password.

\begin{sphinxadmonition}{note}{Note:}
Please don’t change \sphinxcode{\sphinxupquote{secrets.users}} option in CR, make changes
inside the secrets object itself.
\end{sphinxadmonition}


\section{Development Mode}
\label{\detokenize{users:users-development-mode}}\label{\detokenize{users:id4}}
To make development and testing easier, \sphinxcode{\sphinxupquote{deploy/secrets.yaml}} secrets
file contains default passwords for MongoDB system users.

These development\sphinxhyphen{}mode credentials from \sphinxcode{\sphinxupquote{deploy/secrets.yaml}} are:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Secret Key
&\sphinxstyletheadfamily 
Secret Value
\\
\hline
MONGODB\_BACKUP\_USER
&
backup
\\
\hline
MONGODB\_BACKUP\_PASSWORD
&
backup123456
\\
\hline
MONGODB\_CLUSTER\_ADMIN\_USER
&
clusterAdmin
\\
\hline
MONGODB\_CLUSTER\_ADMIN\_PASSWORD
&
clusterAdmin123456
\\
\hline
MONGODB\_CLUSTER\_MONITOR\_USER
&
clusterMonitor
\\
\hline
MONGODB\_CLUSTER\_MONITOR\_PASSWORD
&
clusterMonitor123456
\\
\hline
MONGODB\_USER\_ADMIN\_USER
&
userAdmin
\\
\hline
MONGODB\_USER\_ADMIN\_PASSWORD
&
userAdmin123456
\\
\hline
PMM\_SERVER\_USER
&
pmm
\\
\hline
PMM\_SERVER\_PASSWORD
&
supa|\textasciicircum{}|pazz
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\begin{sphinxadmonition}{warning}{Warning:}
Do not use the default MongoDB Users in production!
\end{sphinxadmonition}


\section{MongoDB Internal Authentication Key (optional)}
\label{\detokenize{users:users-internal-authentication-key}}\label{\detokenize{users:id5}}
\sphinxstyleemphasis{Default Secret name:} \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}mongodb\sphinxhyphen{}key}}

\sphinxstyleemphasis{Secret name field:} \sphinxcode{\sphinxupquote{spec.secrets.key}}

By default, the operator will create a random, 1024\sphinxhyphen{}byte key for
\sphinxhref{https://docs.mongodb.com/manual/core/security-internal-authentication/}{MongoDB Internal
Authentication}
if it does not already exist. If you would like to deploy a different
key, create the secret manually before starting the operator.


\chapter{Local Storage support for the Percona Server for MongoDB Operator}
\label{\detokenize{storage:local-storage-support-for-the-percona-server-for-mongodb-operator}}\label{\detokenize{storage::doc}}
Among the wide rage of volume types, supported by Kubernetes, there are
two volume types which allow Pod containers to access part of the local filesystem on
the node the \sphinxstyleemphasis{emptyDir} and \sphinxstyleemphasis{hostPath}.


\section{emptyDir}
\label{\detokenize{storage:emptydir}}
A Pod \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#emptydir}{emptyDir
volume} is created when the Pod is assigned to a Node. The volume is initially empty and is erased when the Pod is removed from the Node. The containers in the Pod can read and write the files in the emptyDir volume.

The \sphinxcode{\sphinxupquote{emptyDir}} options in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file can be used to turn the emptyDir volume on by setting the directory
name.

The \sphinxcode{\sphinxupquote{emptyDir}} is useful when you use \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/inmemory.html}{Percona Memory
Engine}.


\section{hostPath}
\label{\detokenize{storage:hostpath}}
A \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#hostpath}{hostPath
volume}
mounts an existing file or directory from the host node’s filesystem into
the Pod. If the pod is removed, the data persists in the host node’s filesystem.

The \sphinxcode{\sphinxupquote{volumeSpec.hostPath}} subsection in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file may include \sphinxcode{\sphinxupquote{path}} and \sphinxcode{\sphinxupquote{type}} keys to set the node’s filesystem
object path and to specify whether it is a file, a directory, or
something else (e.g. a socket):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{volumeSpec}\PYG{p}{:}
  \PYG{n}{hostPath}\PYG{p}{:}
    \PYG{n}{path}\PYG{p}{:} \PYG{o}{/}\PYG{n}{data}
    \PYG{n+nb}{type}\PYG{p}{:} \PYG{n}{Directory}
\end{sphinxVerbatim}

Please note, you must created the hostPath manually and should have following
attributes:
\begin{itemize}
\item {} 
access permissions

\item {} 
ownership

\item {} 
SELinux security context

\end{itemize}

The \sphinxcode{\sphinxupquote{hostPath}} volume is useful when you perform manual actions
during the first run and require improved disk performance.
Consider using the tolerations settings to avoid a cluster migration to
different hardware in case of a reboot or a hardware failure.

More details can be found in the \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#hostpath}{official hostPath Kubernetes
documentation}.


\chapter{Binding Percona Server for MongoDB components to Specific Kubernetes/OpenShift Nodes}
\label{\detokenize{constraints:binding-percona-server-for-mongodb-components-to-specific-kubernetes-openshift-nodes}}\label{\detokenize{constraints::doc}}
The operator does a good job of automatically assigning new pods to nodes to achieve balanced distribution across the cluster.
There are situations when you must ensure that pods land
on specific nodes: for example, for the advantage of speed on an SSD\sphinxhyphen{}equipped machine, or reduce costs by choosing nodes in the same
availability zone.

The appropriate (sub)sections (\sphinxcode{\sphinxupquote{replsets}}, \sphinxcode{\sphinxupquote{replsets.arbiter}}, and
\sphinxcode{\sphinxupquote{backup}}) of the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file contain the keys which can be used to do assign pods to nodes.


\section{Node selector}
\label{\detokenize{constraints:node-selector}}
The \sphinxcode{\sphinxupquote{nodeSelector}} contains one or more key\sphinxhyphen{}value pairs. If the node is
not labeled with each key\sphinxhyphen{}value pair from the Pod’s \sphinxcode{\sphinxupquote{nodeSelector}},
the Pod will not be able to land on it.

The following example binds the Pod to any node having a
self\sphinxhyphen{}explanatory \sphinxcode{\sphinxupquote{disktype: ssd}} label:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{nodeSelector}\PYG{p}{:}
  \PYG{n}{disktype}\PYG{p}{:} \PYG{n}{ssd}
\end{sphinxVerbatim}


\section{Affinity and anti\sphinxhyphen{}affinity}
\label{\detokenize{constraints:affinity-and-anti-affinity}}
Affinity defines eligible pods that can be scheduled on the node which already has pods with specific labels. Anti\sphinxhyphen{}affinity defines pods that are not eligible. This approach is reduces costs by ensuring several pods with intensive data exchange  occupy the
same availability zone or even the same node or, on the contrary, to
spread the pods on different nodes or even different availability zones
for high availability and balancing purposes.

Percona Server for MongoDB Operator provides two approaches for doing
this:
\begin{itemize}
\item {} 
simple way to set anti\sphinxhyphen{}affinity for Pods, built\sphinxhyphen{}in into the Operator,

\item {} 
more advanced approach based on using standard Kubernetes
constraints.

\end{itemize}


\subsection{Simple approach \sphinxhyphen{} use antiAffinityTopologyKey of the Percona Server for MongoDB Operator}
\label{\detokenize{constraints:simple-approach-use-antiaffinitytopologykey-of-the-percona-server-for-mongodb-operator}}
Percona Server for MongoDB Operator provides an
\sphinxcode{\sphinxupquote{antiAffinityTopologyKey}} option, which may have one of the following
values:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{kubernetes.io/hostname}} \sphinxhyphen{} Pods will avoid residing within the same
host,

\item {} 
\sphinxcode{\sphinxupquote{failure\sphinxhyphen{}domain.beta.kubernetes.io/zone}} \sphinxhyphen{} Pods will avoid residing
within the same zone,

\item {} 
\sphinxcode{\sphinxupquote{failure\sphinxhyphen{}domain.beta.kubernetes.io/region}} \sphinxhyphen{} Pods will avoid
residing within the same region,

\item {} 
\sphinxcode{\sphinxupquote{none}} \sphinxhyphen{} no constraints are applied.

\end{itemize}

The following example forces Percona Server for MongoDB Pods to avoid
occupying the same node:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{affinity}\PYG{p}{:}
  \PYG{n}{antiAffinityTopologyKey}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{kubernetes.io/hostname}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}


\subsection{Advanced approach \sphinxhyphen{} use standard Kubernetes constraints}
\label{\detokenize{constraints:advanced-approach-use-standard-kubernetes-constraints}}
The previous method can be used without special knowledge of the Kubernetes way
of assigning Pods to specific nodes. Still, in some cases, more complex
tuning may be needed. In this case, the \sphinxcode{\sphinxupquote{advanced}} option placed in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file turns off the effect of the \sphinxcode{\sphinxupquote{antiAffinityTopologyKey}} and allows
the use of the standard Kubernetes affinity constraints of any complexity:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{affinity}\PYG{p}{:}
   \PYG{n}{advanced}\PYG{p}{:}
     \PYG{n}{podAffinity}\PYG{p}{:}
       \PYG{n}{requiredDuringSchedulingIgnoredDuringExecution}\PYG{p}{:}
       \PYG{o}{\PYGZhy{}} \PYG{n}{labelSelector}\PYG{p}{:}
           \PYG{n}{matchExpressions}\PYG{p}{:}
           \PYG{o}{\PYGZhy{}} \PYG{n}{key}\PYG{p}{:} \PYG{n}{security}
             \PYG{n}{operator}\PYG{p}{:} \PYG{n}{In}
             \PYG{n}{values}\PYG{p}{:}
             \PYG{o}{\PYGZhy{}} \PYG{n}{S1}
         \PYG{n}{topologyKey}\PYG{p}{:} \PYG{n}{failure}\PYG{o}{\PYGZhy{}}\PYG{n}{domain}\PYG{o}{.}\PYG{n}{beta}\PYG{o}{.}\PYG{n}{kubernetes}\PYG{o}{.}\PYG{n}{io}\PYG{o}{/}\PYG{n}{zone}
     \PYG{n}{podAntiAffinity}\PYG{p}{:}
       \PYG{n}{preferredDuringSchedulingIgnoredDuringExecution}\PYG{p}{:}
       \PYG{o}{\PYGZhy{}} \PYG{n}{weight}\PYG{p}{:} \PYG{l+m+mi}{100}
         \PYG{n}{podAffinityTerm}\PYG{p}{:}
           \PYG{n}{labelSelector}\PYG{p}{:}
             \PYG{n}{matchExpressions}\PYG{p}{:}
             \PYG{o}{\PYGZhy{}} \PYG{n}{key}\PYG{p}{:} \PYG{n}{security}
               \PYG{n}{operator}\PYG{p}{:} \PYG{n}{In}
               \PYG{n}{values}\PYG{p}{:}
               \PYG{o}{\PYGZhy{}} \PYG{n}{S2}
           \PYG{n}{topologyKey}\PYG{p}{:} \PYG{n}{kubernetes}\PYG{o}{.}\PYG{n}{io}\PYG{o}{/}\PYG{n}{hostname}
     \PYG{n}{nodeAffinity}\PYG{p}{:}
       \PYG{n}{requiredDuringSchedulingIgnoredDuringExecution}\PYG{p}{:}
         \PYG{n}{nodeSelectorTerms}\PYG{p}{:}
         \PYG{o}{\PYGZhy{}} \PYG{n}{matchExpressions}\PYG{p}{:}
           \PYG{o}{\PYGZhy{}} \PYG{n}{key}\PYG{p}{:} \PYG{n}{kubernetes}\PYG{o}{.}\PYG{n}{io}\PYG{o}{/}\PYG{n}{e2e}\PYG{o}{\PYGZhy{}}\PYG{n}{az}\PYG{o}{\PYGZhy{}}\PYG{n}{name}
             \PYG{n}{operator}\PYG{p}{:} \PYG{n}{In}
             \PYG{n}{values}\PYG{p}{:}
             \PYG{o}{\PYGZhy{}} \PYG{n}{e2e}\PYG{o}{\PYGZhy{}}\PYG{n}{az1}
             \PYG{o}{\PYGZhy{}} \PYG{n}{e2e}\PYG{o}{\PYGZhy{}}\PYG{n}{az2}
       \PYG{n}{preferredDuringSchedulingIgnoredDuringExecution}\PYG{p}{:}
       \PYG{o}{\PYGZhy{}} \PYG{n}{weight}\PYG{p}{:} \PYG{l+m+mi}{1}
         \PYG{n}{preference}\PYG{p}{:}
           \PYG{n}{matchExpressions}\PYG{p}{:}
           \PYG{o}{\PYGZhy{}} \PYG{n}{key}\PYG{p}{:} \PYG{n}{another}\PYG{o}{\PYGZhy{}}\PYG{n}{node}\PYG{o}{\PYGZhy{}}\PYG{n}{label}\PYG{o}{\PYGZhy{}}\PYG{n}{key}
             \PYG{n}{operator}\PYG{p}{:} \PYG{n}{In}
             \PYG{n}{values}\PYG{p}{:}
             \PYG{o}{\PYGZhy{}} \PYG{n}{another}\PYG{o}{\PYGZhy{}}\PYG{n}{node}\PYG{o}{\PYGZhy{}}\PYG{n}{label}\PYG{o}{\PYGZhy{}}\PYG{n}{value}
\end{sphinxVerbatim}

See explanation of the advanced affinity options \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#inter-pod-affinity-and-anti-affinity-beta-feature}{in Kubernetes
documentation}.


\section{Tolerations}
\label{\detokenize{constraints:tolerations}}
\sphinxstyleemphasis{Tolerations} allow Pods having them to be able to land onto nodes with
matching \sphinxstyleemphasis{taints}. Toleration is expressed as a \sphinxcode{\sphinxupquote{key}} with and
\sphinxcode{\sphinxupquote{operator}}, which is either \sphinxcode{\sphinxupquote{exists}} or \sphinxcode{\sphinxupquote{equal}} (the equal
variant requires a corresponding \sphinxcode{\sphinxupquote{value}} for comparison).

Toleration should have a specified \sphinxcode{\sphinxupquote{effect}}, such as the following:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{NoSchedule}} \sphinxhyphen{}  less strict

\item {} 
\sphinxcode{\sphinxupquote{PreferNoSchedule}}

\item {} 
\sphinxcode{\sphinxupquote{NoExecute}}

\end{itemize}

When a \sphinxstyleemphasis{taint} with the \sphinxcode{\sphinxupquote{NoExecute}} effect is assigned to a node, any pod configured to not tolerating this \sphinxstyleemphasis{taint} is removed from the node. This removal can be immediate or after the \sphinxcode{\sphinxupquote{tolerationSeconds}} interval. The following example defines this effect and the removal interval:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{tolerations}\PYG{p}{:}
\PYG{o}{\PYGZhy{}} \PYG{n}{key}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{node.alpha.kubernetes.io/unreachable}\PYG{l+s+s2}{\PYGZdq{}}
  \PYG{n}{operator}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Exists}\PYG{l+s+s2}{\PYGZdq{}}
  \PYG{n}{effect}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NoExecute}\PYG{l+s+s2}{\PYGZdq{}}
  \PYG{n}{tolerationSeconds}\PYG{p}{:} \PYG{l+m+mi}{6000}
\end{sphinxVerbatim}

The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/}{Kubernetes Taints and
Toleratins}
contains more examples on this topic.


\section{Priority Classes}
\label{\detokenize{constraints:priority-classes}}
Pods may belong to some \sphinxstyleemphasis{priority classes}. This flexibility allows the scheduler to
distinguish more and less important Pods when needed, such as the situation when
a higher priority Pod cannot be scheduled without evicting a lower
priority one. This ability can be accomplished by adding one or more PriorityClasses in
your Kubernetes cluster, and specifying the \sphinxcode{\sphinxupquote{PriorityClassName}} in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{priorityClassName}\PYG{p}{:} \PYG{n}{high}\PYG{o}{\PYGZhy{}}\PYG{n}{priority}
\end{sphinxVerbatim}

See the \sphinxhref{https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption}{Kubernetes Pods Priority and Preemption
documentation}
to find out how to define and use priority classes in your cluster.


\section{Pod Disruption Budgets}
\label{\detokenize{constraints:pod-disruption-budgets}}
Creating the \sphinxhref{https://kubernetes.io/docs/concepts/workloads/pods/disruptions/}{Pod Disruption
Budget}
is the Kubernetes method to limit the number of Pods of an application
that can go down simultaneously due to  \sphinxstyleemphasis{voluntary disruptions} such as the
cluster administrator’s actions during a deployment update. Distribution Budgets allow large applications
to retain their high availability during maintenance and other
administrative activities. The \sphinxcode{\sphinxupquote{maxUnavailable}} and \sphinxcode{\sphinxupquote{minAvailable}}
options in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file can be used to set these limits. The recommended variant is the
following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{podDisruptionBudget}\PYG{p}{:}
   \PYG{n}{maxUnavailable}\PYG{p}{:} \PYG{l+m+mi}{1}
\end{sphinxVerbatim}


\chapter{Exposing cluster nodes with dedicated IP addresses}
\label{\detokenize{expose:exposing-cluster-nodes-with-dedicated-ip-addresses}}\label{\detokenize{expose::doc}}

\section{Using single entry point vs. accessing MongoDB Instances}
\label{\detokenize{expose:using-single-entry-point-vs-accessing-mongodb-instances}}
Percona Operator for Percona Server for MongoDB provides two scenarios for
accessing the database.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
If :ref\textasciigrave{}sharding\textasciigrave{} mode is turned \sphinxstylestrong{on} (default bahaviour), then database
cluster runs special \sphinxcode{\sphinxupquote{mongos}} Pods \sphinxhyphen{} query routers, which acts as an entry
point for client applications,

\noindent\sphinxincludegraphics{{mongos_espose}.png}

\item {} 
If :ref\textasciigrave{}sharding\textasciigrave{} mode is turned \sphinxstylestrong{off}, the application needs access to all
MongoDB Pods of the replica set:

\noindent\sphinxincludegraphics{{mongod_espose}.png}

\end{enumerate}

You can find more on sharding in the \sphinxhref{https://docs.mongodb.com/manual/reference/glossary/\#term-sharding}{official MongoDB documentation}.


\section{Accessing the Pod}
\label{\detokenize{expose:accessing-the-pod}}
When Kubernetes creates Pods, each Pod has an IP address in the
internal virtual network of the cluster. Creating and destroying
Pods is a dynamic process, therefore binding communication between Pods to
specific IP addresses would cause problems as things change over
time as a result of the cluster scaling, maintenance, etc. Due to
this changing environment, you should connect to Percona Server for MongoDB via Kubernetes
internal DNS names in URI
(e.g. using \sphinxcode{\sphinxupquote{mongodb+srv://userAdmin:userAdmin123456@\textless{}cluster\sphinxhyphen{}name\textgreater{}\sphinxhyphen{}rs0.\textless{}namespace\textgreater{}.svc.cluster.local/admin?replicaSet=rs0\&ssl=false}} to access one of the Replica Set Pods).
URI\sphinxhyphen{}based access is strictly recommended.

Sometimes you cannot communicate with the Pods using the Kubernetes internal DNS
names. To make Pods of the Replica Set accessible, Percona Server for
MongoDB Operator can assign a \sphinxhref{https://kubernetes.io/docs/concepts/services-networking/service/}{Kubernetes
Service}
to each Pod.

This feature can be configured in the \sphinxcode{\sphinxupquote{replsets}} (for MondgoDB instances Pod)
and \sphinxcode{\sphinxupquote{sharding}} (for mongos Pod) sections of the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file:
\begin{itemize}
\item {} 
set ‘expose.enabled’ option to ‘true’ to allow exposing Pods via
services,

\item {} 
set ‘expose.exposeType’ option specifying the IP address type to be
used:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{ClusterIP}} \sphinxhyphen{} expose the Pod’s service with an internal static
IP address. This variant makes MongoDB Pod only reachable from
within the Kubernetes cluster.

\item {} 
\sphinxcode{\sphinxupquote{NodePort}} \sphinxhyphen{} expose the Pod’s service on each Kubernetes node’s
IP address at a static port. ClusterIP service, to which the node
port will be routed, is automatically created in this variant. As
an advantage, the service will be reachable from outside the
cluster by node address and port number, but the address will be
bound to a specific Kubernetes node.

\item {} 
\sphinxcode{\sphinxupquote{LoadBalancer}} \sphinxhyphen{} expose the Pod’s service externally using a
cloud provider’s load balancer. Both ClusterIP and NodePort
services are automatically created in this variant.

\end{itemize}

\end{itemize}

If this feature is enabled, URI looks like
\sphinxcode{\sphinxupquote{mongodb://userAdmin:userAdmin123456@\textless{}ip1\textgreater{}:\textless{}port1\textgreater{},\textless{}ip2\textgreater{}:\textless{}port2\textgreater{},\textless{}ip3\textgreater{}:\textless{}port3\textgreater{}/admin?replicaSet=rs0\&ssl=false}}
All IP adresses should be \sphinxstyleemphasis{directly} reachable by application.


\chapter{Enabling Replica Set Arbiter nodes}
\label{\detokenize{arbiter:enabling-replica-set-arbiter-nodes}}\label{\detokenize{arbiter:arbiter}}\label{\detokenize{arbiter::doc}}
Percona Server for MongoDB \sphinxhref{https://www.percona.com/blog/2018/05/17/mongodb-replica-set-transport-encryption-part-1/}{replication
model}
is based on elections, when nodes of the Replica Set \sphinxhref{https://docs.mongodb.com/manual/core/replica-set-elections/\#replica-set-elections}{choose which
node}
becomes the primary node. Elections are the reason to avoid an even
number of nodes in the cluster. The cluster should have
at least three nodes. Normally, each node stores a complete copy of the data,
but there is also a possibility, to reduce disk IO and space used by the
database, to add an \sphinxhref{https://docs.mongodb.com/manual/core/replica-set-arbiter/}{arbiter node}. An arbiter cannot become a primary and does not have a complete copy of the data. The arbiter does have one election vote and can be the odd number for elections. The arbiter does not demand a persistent volume.

Percona Server for MongoDB Operator has the ability to create Replica Set Arbiter
nodes if needed. This feature can be configured in the Replica Set
section of the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file:
\begin{itemize}
\item {} 
set \sphinxcode{\sphinxupquote{arbiter.enabled}} option to \sphinxcode{\sphinxupquote{true}} to allow Arbiter nodes,

\item {} 
use \sphinxcode{\sphinxupquote{arbiter.size}} option to set the desired amount of the Replica
Set nodes which should be Arbiter ones instead of containing data.

\end{itemize}


\chapter{Percona Server for MongoDB Sharding}
\label{\detokenize{sharding:percona-server-for-mongodb-sharding}}\label{\detokenize{sharding:operator-sharding}}\label{\detokenize{sharding::doc}}
\sphinxhref{https://docs.mongodb.com/manual/reference/glossary/\#term-sharding}{Sharding}
provides horizontal database scaling, distributing data across multiple MongoDB
Pods. It is useful for large data sets when a single machine’s overall
processing speed or storage capacity turns out to be not enough.
Sharding allows splitting data across several machines with a special routing
of each request to the necessary subset of data (so\sphinxhyphen{}called \sphinxstyleemphasis{shard}).

A MongoDB Sharding involves the following components:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{shard}} \sphinxhyphen{} a replica set which contains a subset of data stored in the
database (similar to a traditional MongoDB replica set),

\item {} 
\sphinxcode{\sphinxupquote{mongos}} \sphinxhyphen{} a query router, which acts as an entry point for client applications,

\item {} 
\sphinxcode{\sphinxupquote{config servers}} \sphinxhyphen{} a replica set to store metadata and configuration
settings for the sharded database cluster.

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
Percona Server for MongoDB 1.6.0 supports only one shard of a MongoDB
cluster; still, this limited sharding support allows using \sphinxcode{\sphinxupquote{mongos}} as an
entry point instead of provisioning a load\sphinxhyphen{}balancer per replica set node.
\end{sphinxadmonition}

Sharding is controlled by the \sphinxcode{\sphinxupquote{sharding}} section of the \sphinxcode{\sphinxupquote{deploy/cr.yaml}}
configuration file and is turned on by default.

To enable sharding, set the \sphinxcode{\sphinxupquote{sharding.enabled}} key \sphinxcode{\sphinxupquote{true}} (this will turn
existing MongoDB replica set nodes into sharded ones).

When the sharding is turned on, the Operator runs replica sets with config
servers and mongos instances. Their numbers are controlled by
\sphinxcode{\sphinxupquote{configsvrReplSet.size}} and \sphinxcode{\sphinxupquote{mongos.size}} keys respectively.

\begin{sphinxadmonition}{note}{Note:}
Config servers for now can properly work only with WiredTiger engine,
and sharded MongoDB nodes can use either WiredTiger or InMemory one.
\end{sphinxadmonition}


\chapter{Transport Layer Security (TLS)}
\label{\detokenize{TLS:transport-layer-security-tls}}\label{\detokenize{TLS:tls}}\label{\detokenize{TLS::doc}}
The Percona Kubernetes Operator for PSMDB uses Transport Layer Security (TLS) cryptographic protocol for the following types of communication:
\begin{itemize}
\item {} 
Internal \sphinxhyphen{} communication between PSMDB instances in the cluster

\item {} 
External \sphinxhyphen{} communication between the client application and the cluster

\end{itemize}

The internal certificate is also used as an authorization method.

TLS security can be configured in several ways. By default, the Operator
generates certificates automatically if there are no certificate secrets
available. Other options are the following ones:
\begin{itemize}
\item {} 
The Operator can use a specifically installed \sphinxstyleemphasis{cert\sphinxhyphen{}manager} for the automatic
certificates generation,

\item {} 
Certificates can be generated manually.

\end{itemize}

You can also use pre\sphinxhyphen{}generated certificates available in the
\sphinxcode{\sphinxupquote{deploy/ssl\sphinxhyphen{}secrets.yaml}} file for test purposes, but we strongly recommend
\sphinxstylestrong{avoiding their usage on any production system}!

The following subsections explain how to configure TLS security with the
Operator yourself, as well as how to temporarily disable it if needed.

\begin{sphinxShadowBox}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{TLS:id1}}{\hyperref[\detokenize{TLS:install-and-use-the-cert-manager}]{\sphinxcrossref{Install and use the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{TLS:id2}}{\hyperref[\detokenize{TLS:about-the-cert-manager}]{\sphinxcrossref{About the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}}}}

\item {} 
\phantomsection\label{\detokenize{TLS:id3}}{\hyperref[\detokenize{TLS:installation-of-the-cert-manager}]{\sphinxcrossref{Installation of the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}}}}

\end{itemize}

\item {} 
\phantomsection\label{\detokenize{TLS:id4}}{\hyperref[\detokenize{TLS:generate-certificates-manually}]{\sphinxcrossref{Generate certificates manually}}}

\item {} 
\phantomsection\label{\detokenize{TLS:id5}}{\hyperref[\detokenize{TLS:run-psmdb-without-tls}]{\sphinxcrossref{Run PSMDB without TLS}}}

\end{itemize}
\end{sphinxShadowBox}


\section{Install and use the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}}
\label{\detokenize{TLS:install-and-use-the-cert-manager}}

\subsection{About the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}}
\label{\detokenize{TLS:about-the-cert-manager}}
A \sphinxstyleemphasis{cert\sphinxhyphen{}manager} is a Kubernetes certificate management controller which widely used to automate the management and issuance of TLS certificates. It is community\sphinxhyphen{}driven, and open source.

When you have already installed \sphinxstyleemphasis{cert\sphinxhyphen{}manager} and deploy the operator, the operator requests a certificate from the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}. The \sphinxstyleemphasis{cert\sphinxhyphen{}manager} acts as a self\sphinxhyphen{}signed issuer and generates certificates. The Percona Operator self\sphinxhyphen{}signed issuer is local to the operator namespace. This self\sphinxhyphen{}signed issuer is created because PSMDB requires all certificates are issued by the same CA.

The creation of the self\sphinxhyphen{}signed issuer allows you to deploy and use the Percona Operator without creating a clusterissuer separately.


\subsection{Installation of the \sphinxstyleemphasis{cert\sphinxhyphen{}manager}}
\label{\detokenize{TLS:installation-of-the-cert-manager}}
The steps to install the \sphinxstyleemphasis{cert\sphinxhyphen{}manager} are the following:
\begin{itemize}
\item {} 
Create a namespace

\item {} 
Disable resource validations on the cert\sphinxhyphen{}manager namespace

\item {} 
Install the cert\sphinxhyphen{}manager.

\end{itemize}

The following commands perform all the needed actions:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{apply} \PYG{o}{\PYGZhy{}}\PYG{n}{f} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{jetstack}\PYG{o}{/}\PYG{n}{cert}\PYG{o}{\PYGZhy{}}\PYG{n}{manager}\PYG{o}{/}\PYG{n}{releases}\PYG{o}{/}\PYG{n}{download}\PYG{o}{/}\PYG{n}{v0}\PYG{o}{.}\PYG{l+m+mf}{15.1}\PYG{o}{/}\PYG{n}{cert}\PYG{o}{\PYGZhy{}}\PYG{n}{manager}\PYG{o}{.}\PYG{n}{yaml} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{validate}\PYG{o}{=}\PYG{n}{false}
\end{sphinxVerbatim}

After the installation, you can verify the \sphinxstyleemphasis{cert\sphinxhyphen{}manager} by running the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{get} \PYG{n}{pods} \PYG{o}{\PYGZhy{}}\PYG{n}{n} \PYG{n}{cert}\PYG{o}{\PYGZhy{}}\PYG{n}{manager}
\end{sphinxVerbatim}

The result should display the \sphinxstyleemphasis{cert\sphinxhyphen{}manager} and webhook active and running.


\section{Generate certificates manually}
\label{\detokenize{TLS:generate-certificates-manually}}
To generate certificates manually, follow these steps:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Provision a Certificate Authority (CA) to generate TLS certificates

\item {} 
Generate a CA key and certificate file with the server details

\item {} 
Create the server TLS certificates using the CA keys, certs, and server details

\end{enumerate}

The set of commands generate certificates with the following attributes:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{Server\sphinxhyphen{}pem}} \sphinxhyphen{} Certificate

\item {} 
\sphinxcode{\sphinxupquote{Server\sphinxhyphen{}key.pem}} \sphinxhyphen{} the private key

\item {} 
\sphinxcode{\sphinxupquote{ca.pem}} \sphinxhyphen{} Certificate Authority

\end{itemize}

You should generate certificates twice: one set is for external communications, and another set is for internal ones. A secret created for the external use must be added to \sphinxcode{\sphinxupquote{cr.yaml/spec/secretsName}}. A certificate generated for internal communications must be added to the \sphinxcode{\sphinxupquote{cr.yaml/spec/sslInternalSecretName}}.

Supposing that your cluster name is \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}rs0}}, the instructions to generate certificates manually are as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{CLUSTER\PYGZus{}NAME}\PYG{o}{=}\PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}
\PYG{n}{NAMESPACE}\PYG{o}{=}\PYG{n}{default}
\PYG{n}{cat} \PYG{o}{\PYGZlt{}\PYGZlt{}}\PYG{n}{EOF} \PYG{o}{|} \PYG{n}{cfssl} \PYG{n}{gencert} \PYG{o}{\PYGZhy{}}\PYG{n}{initca} \PYG{o}{\PYGZhy{}} \PYG{o}{|} \PYG{n}{cfssljson} \PYG{o}{\PYGZhy{}}\PYG{n}{bare} \PYG{n}{ca}
  \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Root CA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{names}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
      \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{O}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PSMDB}\PYG{l+s+s2}{\PYGZdq{}}
      \PYG{p}{\PYGZcb{}}
    \PYG{p}{]}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{key}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rsa}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{size}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{2048}
    \PYG{p}{\PYGZcb{}}
  \PYG{p}{\PYGZcb{}}
\PYG{n}{EOF}

\PYG{n}{cat} \PYG{o}{\PYGZlt{}\PYGZlt{}}\PYG{n}{EOF} \PYG{o}{\PYGZgt{}} \PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{config}\PYG{o}{.}\PYG{n}{json}
  \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{signing}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{default}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{expiry}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{87600h}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{usages}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{signing}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{key encipherment}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{server auth}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{client auth}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
      \PYG{p}{\PYGZcb{}}
    \PYG{p}{\PYGZcb{}}
  \PYG{p}{\PYGZcb{}}
\PYG{n}{EOF}

\PYG{n}{cat} \PYG{o}{\PYGZlt{}\PYGZlt{}}\PYG{n}{EOF} \PYG{o}{|} \PYG{n}{cfssl} \PYG{n}{gencert} \PYG{o}{\PYGZhy{}}\PYG{n}{ca}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{pem}  \PYG{o}{\PYGZhy{}}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{key}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{key}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{n}{config}\PYG{o}{=}\PYG{o}{.}\PYG{o}{/}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{config}\PYG{o}{.}\PYG{n}{json} \PYG{o}{\PYGZhy{}} \PYG{o}{|} \PYG{n}{cfssljson} \PYG{o}{\PYGZhy{}}\PYG{n}{bare} \PYG{n}{server}
  \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{hosts}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{localhost}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{.svc.cluster.local}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{*.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{*.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{*.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{.svc.cluster.local}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{]}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{names}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
      \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{O}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PSMDB}\PYG{l+s+s2}{\PYGZdq{}}
      \PYG{p}{\PYGZcb{}}
    \PYG{p}{]}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CLUSTER\PYGZus{}NAME/\PYGZhy{}rs0\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{key}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rsa}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{size}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{2048}
    \PYG{p}{\PYGZcb{}}
  \PYG{p}{\PYGZcb{}}
\PYG{n}{EOF}
\PYG{n}{cfssl} \PYG{n}{bundle} \PYG{o}{\PYGZhy{}}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{bundle}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{n}{cert}\PYG{o}{=}\PYG{n}{server}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{|} \PYG{n}{cfssljson} \PYG{o}{\PYGZhy{}}\PYG{n}{bare} \PYG{n}{server}

\PYG{n}{kubectl} \PYG{n}{create} \PYG{n}{secret} \PYG{n}{generic} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{ssl}\PYG{o}{\PYGZhy{}}\PYG{n}{internal} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{from}\PYG{o}{\PYGZhy{}}\PYG{n}{file}\PYG{o}{=}\PYG{n}{tls}\PYG{o}{.}\PYG{n}{crt}\PYG{o}{=}\PYG{n}{server}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{from}\PYG{o}{\PYGZhy{}}\PYG{n}{file}\PYG{o}{=}\PYG{n}{tls}\PYG{o}{.}\PYG{n}{key}\PYG{o}{=}\PYG{n}{server}\PYG{o}{\PYGZhy{}}\PYG{n}{key}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{from}\PYG{o}{\PYGZhy{}}\PYG{n}{file}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{crt}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{type}\PYG{o}{=}\PYG{n}{kubernetes}\PYG{o}{.}\PYG{n}{io}\PYG{o}{/}\PYG{n}{tls}

\PYG{n}{cat} \PYG{o}{\PYGZlt{}\PYGZlt{}}\PYG{n}{EOF} \PYG{o}{|} \PYG{n}{cfssl} \PYG{n}{gencert} \PYG{o}{\PYGZhy{}}\PYG{n}{ca}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{pem}  \PYG{o}{\PYGZhy{}}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{key}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{key}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{n}{config}\PYG{o}{=}\PYG{o}{.}\PYG{o}{/}\PYG{n}{ca}\PYG{o}{\PYGZhy{}}\PYG{n}{config}\PYG{o}{.}\PYG{n}{json} \PYG{o}{\PYGZhy{}} \PYG{o}{|} \PYG{n}{cfssljson} \PYG{o}{\PYGZhy{}}\PYG{n}{bare} \PYG{n}{client}
  \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{hosts}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{.svc.cluster.local}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{*.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{*.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{*.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}CLUSTER\PYGZus{}NAME\PYGZcb{}}\PYG{l+s+s2}{\PYGZhy{}rs0.\PYGZdl{}}\PYG{l+s+si}{\PYGZob{}NAMESPACE\PYGZcb{}}\PYG{l+s+s2}{.svc.cluster.local}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{]}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{names}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
      \PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{O}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PSMDB}\PYG{l+s+s2}{\PYGZdq{}}
      \PYG{p}{\PYGZcb{}}
    \PYG{p}{]}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdl{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CLUSTER\PYGZus{}NAME/\PYGZhy{}rs0\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{key}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rsa}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
      \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{size}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{2048}
    \PYG{p}{\PYGZcb{}}
  \PYG{p}{\PYGZcb{}}
\PYG{n}{EOF}

\PYG{n}{kubectl} \PYG{n}{create} \PYG{n}{secret} \PYG{n}{generic} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{ssl} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{from}\PYG{o}{\PYGZhy{}}\PYG{n}{file}\PYG{o}{=}\PYG{n}{tls}\PYG{o}{.}\PYG{n}{crt}\PYG{o}{=}\PYG{n}{client}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{from}\PYG{o}{\PYGZhy{}}\PYG{n}{file}\PYG{o}{=}\PYG{n}{tls}\PYG{o}{.}\PYG{n}{key}\PYG{o}{=}\PYG{n}{client}\PYG{o}{\PYGZhy{}}\PYG{n}{key}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{from}\PYG{o}{\PYGZhy{}}\PYG{n}{file}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{crt}\PYG{o}{=}\PYG{n}{ca}\PYG{o}{.}\PYG{n}{pem} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{type}\PYG{o}{=}\PYG{n}{kubernetes}\PYG{o}{.}\PYG{n}{io}\PYG{o}{/}\PYG{n}{tls}
\end{sphinxVerbatim}


\section{Run PSMDB without TLS}
\label{\detokenize{TLS:run-psmdb-without-tls}}
Omitting TLS is also possible, but we recommend that you run your cluster with the TLS protocol enabled.

To disable TLS protocol (e.g. for demonstration purposes) edit the \sphinxcode{\sphinxupquote{cr.yaml/spec/allowUnstafeConfigurations}} setting to \sphinxcode{\sphinxupquote{true}} and make sure that there are no certificate secrets available.


\chapter{Data at rest encryption}
\label{\detokenize{encryption:data-at-rest-encryption}}\label{\detokenize{encryption::doc}}
\sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/data\_at\_rest\_encryption.html}{Data at rest encryption in Percona Server for MongoDB} is supported by the Operator since version 1.1.0.

\begin{sphinxadmonition}{note}{Note:}
“Data at rest” means inactive data stored as files, database records, etc.
\end{sphinxadmonition}

Following options the \sphinxcode{\sphinxupquote{mongod}} section of the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file should
be edited to turn this feature on:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
The \sphinxcode{\sphinxupquote{security.enableEncryption}} key should be set to \sphinxcode{\sphinxupquote{true}} (the default
value).

\item {} 
The \sphinxcode{\sphinxupquote{security.encryptionCipherMode}} key should specify proper cipher mode
for decryption. The value can be one of the following two variants:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{AES256\sphinxhyphen{}CBC}} (the default one for the Operator and Percona Server for
MongoDB)

\item {} 
\sphinxcode{\sphinxupquote{AES256\sphinxhyphen{}GCM}}

\end{itemize}

\item {} 
\sphinxcode{\sphinxupquote{security.encryptionKeySecret}} should specify a secret object with the
encryption key:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mongod}\PYG{p}{:}
  \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
  \PYG{n}{security}\PYG{p}{:}
    \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
    \PYG{n}{encryptionKeySecret}\PYG{p}{:} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{mongodb}\PYG{o}{\PYGZhy{}}\PYG{n}{encryption}\PYG{o}{\PYGZhy{}}\PYG{n}{key}
\end{sphinxVerbatim}

Encryption key secret will be created automatically if it
doesn’t exist. If you would like to create it yourself, take into account
that \sphinxhref{https://docs.mongodb.com/manual/tutorial/configure-encryption/\#local-key-management}{the key must be a 32 character string encoded in base64}.

\end{enumerate}


\part{Management}
\label{\detokenize{index:management}}

\chapter{Providing Backups}
\label{\detokenize{backups:providing-backups}}\label{\detokenize{backups::doc}}
The Operator usually stores Server for MongoDB backups on \sphinxhref{https://en.wikipedia.org/wiki/Amazon\_S3\#S3\_API\_and\_competing\_services}{Amazon S3 or S3\sphinxhyphen{}compatible storage} outside the Kubernetes cluster:

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{backup-s3}.png}
\end{figure}

The Operator allows doing cluster backup in two
ways. \sphinxstyleemphasis{Scheduled backups} are configured in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file to be executed automatically in proper time. \sphinxstyleemphasis{On\sphinxhyphen{}demand backups}
can be done manually at any moment. Both ways use the \sphinxhref{https://github.com/percona/percona-backup-mongodb}{Percona
Backup for MongoDB} tool.

\begin{sphinxShadowBox}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{backups:id3}}{\hyperref[\detokenize{backups:making-scheduled-backups}]{\sphinxcrossref{Making scheduled backups}}}

\item {} 
\phantomsection\label{\detokenize{backups:id4}}{\hyperref[\detokenize{backups:making-on-demand-backup}]{\sphinxcrossref{Making on\sphinxhyphen{}demand backup}}}

\item {} 
\phantomsection\label{\detokenize{backups:id5}}{\hyperref[\detokenize{backups:restore-the-cluster-from-a-previously-saved-backup}]{\sphinxcrossref{Restore the cluster from a previously saved backup}}}

\item {} 
\phantomsection\label{\detokenize{backups:id6}}{\hyperref[\detokenize{backups:delete-the-unneeded-backup}]{\sphinxcrossref{Delete the unneeded backup}}}

\end{itemize}
\end{sphinxShadowBox}


\section{Making scheduled backups}
\label{\detokenize{backups:making-scheduled-backups}}\label{\detokenize{backups:backups-scheduled}}
Since backups are stored separately on the Amazon S3, a secret with
\sphinxcode{\sphinxupquote{AWS\_ACCESS\_KEY\_ID}} and \sphinxcode{\sphinxupquote{AWS\_SECRET\_ACCESS\_KEY}} should be present on
the Kubernetes cluster. The secrets file with these base64\sphinxhyphen{}encoded keys should
be created: for example \sphinxcode{\sphinxupquote{deploy/backup\sphinxhyphen{}s3.yaml}} file with the following
contents.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{apiVersion}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{v1}
\PYG{n+nt}{kind}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Secret}
\PYG{n+nt}{metadata}\PYG{p}{:}
  \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}backup\PYGZhy{}s3}
\PYG{n+nt}{type}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Opaque}
\PYG{n+nt}{data}\PYG{p}{:}
  \PYG{n+nt}{AWS\PYGZus{}ACCESS\PYGZus{}KEY\PYGZus{}ID}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{UkVQTEFDRS1XSVRILUFXUy1BQ0NFU1MtS0VZ}
  \PYG{n+nt}{AWS\PYGZus{}SECRET\PYGZus{}ACCESS\PYGZus{}KEY}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{UkVQTEFDRS1XSVRILUFXUy1TRUNSRVQtS0VZ}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
The following command can be used to get a base64\sphinxhyphen{}encoded string from
a plain text one: \sphinxcode{\sphinxupquote{\$ echo \sphinxhyphen{}n \textquotesingle{}plain\sphinxhyphen{}text\sphinxhyphen{}string\textquotesingle{} | base64}}
\end{sphinxadmonition}

The \sphinxcode{\sphinxupquote{name}} value is the \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{Kubernetes
secret}
name which will be used further, and \sphinxcode{\sphinxupquote{AWS\_ACCESS\_KEY\_ID}} and
\sphinxcode{\sphinxupquote{AWS\_SECRET\_ACCESS\_KEY}} are the keys to access S3 storage (and
obviously they should contain proper values to make this access
possible). To have effect secrets file should be applied with the
appropriate command to create the secret object,
e.g. \sphinxcode{\sphinxupquote{kubectl apply \sphinxhyphen{}f deploy/backup\sphinxhyphen{}s3.yaml}} (for Kubernetes).

Backups schedule is defined in the \sphinxcode{\sphinxupquote{backup}} section of the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file. This section contains three subsections:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{storages}} contains data needed to access the S3\sphinxhyphen{}compatible cloud to store
backups.

\item {} 
\sphinxcode{\sphinxupquote{tasks}} subsection allows to actually schedule backups (the schedule is
specified in crontab format).

\end{itemize}

Here is an example which uses Amazon S3 storage for backups:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nn}{...}
\PYG{n+nt}{backup}\PYG{p}{:}
  \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{version}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0.3.0}
  \PYG{l+lScalar+lScalarPlain}{...}
  \PYG{n+nt}{storages}\PYG{p}{:}
    \PYG{n+nt}{s3\PYGZhy{}us\PYGZhy{}west}\PYG{p}{:}
      \PYG{n+nt}{type}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{s3}
      \PYG{n+nt}{s3}\PYG{p}{:}
        \PYG{n+nt}{bucket}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{S3\PYGZhy{}BACKUP\PYGZhy{}BUCKET\PYGZhy{}NAME\PYGZhy{}HERE}
        \PYG{n+nt}{region}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{us\PYGZhy{}west\PYGZhy{}2}
        \PYG{n+nt}{credentialsSecret}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}backup\PYGZhy{}s3}
  \PYG{l+lScalar+lScalarPlain}{...}
  \PYG{n+nt}{tasks}\PYG{p}{:}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sat\PYGZhy{}night\PYGZhy{}backup}\PYG{l+s}{\PYGZdq{}}
     \PYG{n+nt}{schedule}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0}\PYG{n+nv}{ }\PYG{l+s}{0}\PYG{n+nv}{ }\PYG{l+s}{*}\PYG{n+nv}{ }\PYG{l+s}{*}\PYG{n+nv}{ }\PYG{l+s}{6}\PYG{l+s}{\PYGZdq{}}
     \PYG{n+nt}{storageName}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{s3\PYGZhy{}us\PYGZhy{}west}
  \PYG{l+lScalar+lScalarPlain}{...}
\end{sphinxVerbatim}

if you use some S3\sphinxhyphen{}compatible storage instead of the original
Amazon S3, the \sphinxhref{https://docs.min.io/docs/aws-cli-with-minio.html}{endpointURL} is needed in the \sphinxcode{\sphinxupquote{s3}} subsection which points to the actual cloud used for backups and
is specific to the cloud provider. For example, using \sphinxhref{https://cloud.google.com}{Google Cloud} involves the \sphinxhref{https://storage.googleapis.com}{following} endpointUrl:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{endpointUrl}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{https://storage.googleapis.com}
\end{sphinxVerbatim}

The options within these three subsections are further explained in the
{\hyperref[\detokenize{operator:operator-backup-section}]{\sphinxcrossref{\DUrole{std,std-ref}{Operator Custom Resource options}}}}.

One option which should be mentioned separately is
\sphinxcode{\sphinxupquote{credentialsSecret}} which is a \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{Kubernetes
secret}
for backups. Value of this key should be the same as the name used to
create the secret object (\sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}backup\sphinxhyphen{}s3}} in the last
example).

The schedule is specified in crontab format as explained in
{\hyperref[\detokenize{operator:operator-backup-section}]{\sphinxcrossref{\DUrole{std,std-ref}{Operator Custom Resource options}}}}.


\section{Making on\sphinxhyphen{}demand backup}
\label{\detokenize{backups:making-on-demand-backup}}
To make on\sphinxhyphen{}demand backup, user should use YAML file with correct names
for the backup and the PXC Cluster, and correct PVC settings. The
example of such file is
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/backup/backup.yaml}{deploy/backup/backup.yaml}.

When the backup config file is ready, actual backup command is executed:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f deploy/backup/backup.yaml
\end{sphinxVerbatim}

The example of such file is \sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/backup/restore.yaml}{deploy/backup/restore.yaml}.

\begin{sphinxadmonition}{note}{Note:}
Storing backup settings in a separate file can be replaced by
\end{sphinxadmonition}

passing its content to the \sphinxcode{\sphinxupquote{kubectl apply}} command as follows:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cat \PYG{l+s}{\PYGZlt{}\PYGZlt{}EOF | kubectl apply \PYGZhy{}f\PYGZhy{}}
\PYG{l+s}{apiVersion: psmdb.percona.com/v1}
\PYG{l+s}{kind: PerconaServerMongoDBBackup}
\PYG{l+s}{metadata:}
\PYG{l+s}{  name: backup1}
\PYG{l+s}{spec:}
\PYG{l+s}{  psmdbCluster: my\PYGZhy{}cluster\PYGZhy{}name}
\PYG{l+s}{  storageName: s3\PYGZhy{}us\PYGZhy{}west}
\PYG{l+s}{EOF}
\end{sphinxVerbatim}
\end{quote}


\section{Restore the cluster from a previously saved backup}
\label{\detokenize{backups:restore-the-cluster-from-a-previously-saved-backup}}
Following steps are needed to restore a previously saved backup:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
First of all make sure that the cluster is running.

\item {} 
Now find out correct names for the \sphinxstylestrong{backup} and the \sphinxstylestrong{cluster}. Available
backups can be listed with the following command:

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
   kubectl get psmdb\PYGZhy{}backup

And the following \PYG{n+nb}{command} will list available clusters:
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl get psmdb
\end{sphinxVerbatim}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{2}
\item {} 
When both correct names are known, the actual restoration process can
be started as follows:

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f deploy/backup/restore.yaml
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
Storing backup settings in a separate file can be replaced by
passing its content to the \sphinxcode{\sphinxupquote{kubectl apply}} command as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cat \PYG{l+s}{\PYGZlt{}\PYGZlt{}EOF | kubectl apply \PYGZhy{}f\PYGZhy{}}
\PYG{l+s}{apiVersion: psmdb.percona.com/v1}
\PYG{l+s}{kind: PerconaServerMongoDBRestore}
\PYG{l+s}{metadata:}
\PYG{l+s}{  name: restore1}
\PYG{l+s}{spec:}
\PYG{l+s}{  pxcCluster: my\PYGZhy{}cluster\PYGZhy{}name}
\PYG{l+s}{  backupName: backup1}
\PYG{l+s}{EOF}
\end{sphinxVerbatim}
\end{sphinxadmonition}


\section{Delete the unneeded backup}
\label{\detokenize{backups:delete-the-unneeded-backup}}
Deleting a previously saved backup requires not more than the backup
name. This name can be taken from the list of available backups returned
by the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl get psmdb\PYGZhy{}backup
\end{sphinxVerbatim}

When the name is known, backup can be deleted as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl delete psmdb\PYGZhy{}backup/\PYGZlt{}backup\PYGZhy{}name\PYGZgt{}
\end{sphinxVerbatim}


\chapter{Pause/resume Percona Server for MongoDB}
\label{\detokenize{pause:operator-pause}}\label{\detokenize{pause:id1}}\label{\detokenize{pause::doc}}
There may be external situations when it is needed to shutdown the cluster
for a while and then start it back up (some works related to the maintenance of
the enterprise infrastructure, etc.).

The \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file contains a special \sphinxcode{\sphinxupquote{spec.pause}} key for this.
Setting it to \sphinxcode{\sphinxupquote{true}} gracefully stops the cluster:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{spec}\PYG{p}{:}
  \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
  \PYG{n}{pause}\PYG{p}{:} \PYG{n}{true}
\end{sphinxVerbatim}

To start the cluster after it was shut down just revert the \sphinxcode{\sphinxupquote{spec.pause}} key
to \sphinxcode{\sphinxupquote{false}}.


\chapter{Creating a private S3\sphinxhyphen{}compatible cloud for backups}
\label{\detokenize{private:creating-a-private-s3-compatible-cloud-for-backups}}\label{\detokenize{private::doc}}
As it is mentioned in
\sphinxhref{backups.html}{backups}
any cloud storage which implements the S3 API can be used for backups. The one way to setup and implement the S3 API storage on Kubernetes or OpenShift is
\sphinxhref{https://www.minio.io/}{Minio} \sphinxhyphen{} the S3\sphinxhyphen{}compatible object storage
server deployed via Docker on your own infrastructure.

Setting up Minio to be used with Percona Server for MongoDB Operator
backups involves following steps:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Install Minio in your Kubernetes or OpenShift
environment and create the correspondent Kubernetes Service as
follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
helm install \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}name minio\PYGZhy{}service \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set \PYG{n+nv}{accessKey}\PYG{o}{=}some\PYGZhy{}access\PYGZhy{}key \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set \PYG{n+nv}{secretKey}\PYG{o}{=}some\PYGZhy{}secret\PYGZhy{}key \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set service.type\PYG{o}{=}ClusterIP \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set \PYG{n+nv}{configPath}\PYG{o}{=}/tmp/.minio/ \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set persistence.size\PYG{o}{=}2G \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}set environment.MINIO\PYGZus{}REGION\PYG{o}{=}us\PYGZhy{}east\PYGZhy{}1 \PYG{l+s+se}{\PYGZbs{}}
  stable/minio
\end{sphinxVerbatim}

Don’t forget to substitute default \sphinxcode{\sphinxupquote{some\sphinxhyphen{}access\sphinxhyphen{}key}} and
\sphinxcode{\sphinxupquote{some\sphinxhyphen{}secret\sphinxhyphen{}key}} strings in this command with actual unique
key values. The values can be used later for access control. The \sphinxcode{\sphinxupquote{storageClass}} option is needed if you are using the special
\sphinxhref{https://kubernetes.io/docs/concepts/storage/storage-classes/}{Kubernetes Storage
Class}
for backups. Otherwise, this setting may be omitted. You may also notice the
\sphinxcode{\sphinxupquote{MINIO\_REGION}} value which is may not be used within a private
cloud. Use the same region value here and on later steps
(\sphinxcode{\sphinxupquote{us\sphinxhyphen{}east\sphinxhyphen{}1}} is a good default choice).

\item {} 
Create an S3 bucket for backups:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}i \PYGZhy{}\PYGZhy{}rm aws\PYGZhy{}cli \PYGZhy{}\PYGZhy{}image\PYG{o}{=}perconalab/awscli \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} \PYG{l+s+se}{\PYGZbs{}}
 bash \PYGZhy{}c \PYG{l+s+s1}{\PYGZsq{}AWS\PYGZus{}ACCESS\PYGZus{}KEY\PYGZus{}ID=some\PYGZhy{}access\PYGZhy{}key \PYGZbs{}}
\PYG{l+s+s1}{ AWS\PYGZus{}SECRET\PYGZus{}ACCESS\PYGZus{}KEY=some\PYGZhy{}secret\PYGZhy{}key \PYGZbs{}}
\PYG{l+s+s1}{ AWS\PYGZus{}DEFAULT\PYGZus{}REGION=us\PYGZhy{}east\PYGZhy{}1 \PYGZbs{}}
\PYG{l+s+s1}{  /usr/bin/aws \PYGZbs{}}
\PYG{l+s+s1}{  \PYGZhy{}\PYGZhy{}endpoint\PYGZhy{}url http://minio\PYGZhy{}service:9000 \PYGZbs{}}
\PYG{l+s+s1}{  s3 mb s3://operator\PYGZhy{}testing\PYGZsq{}}
\end{sphinxVerbatim}

This command creates the bucket named \sphinxcode{\sphinxupquote{operator\sphinxhyphen{}testing}} with
the selected access and secret keys (substitute \sphinxcode{\sphinxupquote{some\sphinxhyphen{}access\sphinxhyphen{}key}}
and \sphinxcode{\sphinxupquote{some\sphinxhyphen{}secret\sphinxhyphen{}key}} with the values used on the previous step).

\item {} 
Now edit the backup section of the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file to set proper values for the \sphinxcode{\sphinxupquote{bucket}} (the S3 bucket for
backups created on the previous step), \sphinxcode{\sphinxupquote{region}},
\sphinxcode{\sphinxupquote{credentialsSecret}} and the \sphinxcode{\sphinxupquote{endpointUrl}} (which should point to
the previously created Minio Service).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{backup}\PYG{p}{:}
  \PYG{n}{enabled}\PYG{p}{:} \PYG{n}{true}
  \PYG{n}{version}\PYG{p}{:} \PYG{l+m+mf}{0.3}\PYG{o}{.}\PYG{l+m+mi}{0}
  \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
  \PYG{n}{storages}\PYG{p}{:}
    \PYG{n}{minio}\PYG{p}{:}
      \PYG{n+nb}{type}\PYG{p}{:} \PYG{n}{s3}
      \PYG{n}{s3}\PYG{p}{:}
        \PYG{n}{bucket}\PYG{p}{:} \PYG{n}{operator}\PYG{o}{\PYGZhy{}}\PYG{n}{testing}
        \PYG{n}{region}\PYG{p}{:} \PYG{n}{us}\PYG{o}{\PYGZhy{}}\PYG{n}{east}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}
        \PYG{n}{credentialsSecret}\PYG{p}{:} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{backup}\PYG{o}{\PYGZhy{}}\PYG{n}{minio}
        \PYG{n}{endpointUrl}\PYG{p}{:} \PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{minio}\PYG{o}{\PYGZhy{}}\PYG{n}{service}\PYG{p}{:}\PYG{l+m+mi}{9000}
  \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\end{sphinxVerbatim}

The option which should be specially mentioned is
\sphinxcode{\sphinxupquote{credentialsSecret}} which is a \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{Kubernetes
secret}
for backups. Sample
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/backup-s3.yaml}{backup\sphinxhyphen{}s3.yaml}
can be used to create this secret object. Check that the object contains the
proper \sphinxcode{\sphinxupquote{name}} value and is equal to the one specified for
\sphinxcode{\sphinxupquote{credentialsSecret}}, i.e. \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}backup\sphinxhyphen{}minio}} in the
backup to Minio example, and also contains the proper \sphinxcode{\sphinxupquote{AWS\_ACCESS\_KEY\_ID}} and
\sphinxcode{\sphinxupquote{AWS\_SECRET\_ACCESS\_KEY}} keys. After you have finished editing the file, the secrets
object are created or updated when you run the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/backup\PYGZhy{}s3.yaml
\end{sphinxVerbatim}

\item {} 
When the setup process is completed, making the backup is based on a script.
Following example illustrates how to make an on\sphinxhyphen{}demand backup:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}it \PYGZhy{}\PYGZhy{}rm pbmctl \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:0.3.0\PYGZhy{}backup\PYGZhy{}pbmctl \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} \PYG{l+s+se}{\PYGZbs{}}
  run backup \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}server\PYGZhy{}address\PYG{o}{=}\PYGZlt{}cluster\PYGZhy{}name\PYGZgt{}\PYGZhy{}backup\PYGZhy{}coordinator:10001 \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}storage \PYGZlt{}storage\PYGZgt{} \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}compression\PYGZhy{}algorithm\PYG{o}{=}gzip \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}description\PYG{o}{=}my\PYGZhy{}backup
\end{sphinxVerbatim}

Don’t forget to specify the name of your cluster instead of the
\sphinxcode{\sphinxupquote{\textless{}cluster\sphinxhyphen{}name\textgreater{}}} part of the Backup Coordinator URL (the
cluster name is specified in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file). Also substitute \sphinxcode{\sphinxupquote{\textless{}storage\textgreater{}}} with the actual
storage name located in a subsection inside of the
\sphinxcode{\sphinxupquote{backups}} in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file. In the earlier example this value is \sphinxcode{\sphinxupquote{minio}}.

\item {} 
To restore a previously saved backup you must specify the
backup name. With the proper Backup Coordinator URL and storage name, you can obtain a list of the available backups:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}it \PYGZhy{}\PYGZhy{}rm pbmctl \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:0.3.0\PYGZhy{}backup\PYGZhy{}pbmctl \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} list backups \PYGZhy{}\PYGZhy{}server\PYGZhy{}address\PYG{o}{=}\PYGZlt{}cluster\PYGZhy{}name\PYGZgt{}\PYGZhy{}backup\PYGZhy{}coordinator:10001
\end{sphinxVerbatim}

Now, restore the backup, using backup name instead of the
\sphinxcode{\sphinxupquote{backup\sphinxhyphen{}name}} parameter:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run \PYGZhy{}it \PYGZhy{}\PYGZhy{}rm pbmctl \PYGZhy{}\PYGZhy{}image\PYG{o}{=}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:0.3.0\PYGZhy{}backup\PYGZhy{}pbmctl \PYGZhy{}\PYGZhy{}restart\PYG{o}{=}Never \PYGZhy{}\PYGZhy{} \PYG{l+s+se}{\PYGZbs{}}
  run restore \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}server\PYGZhy{}address\PYG{o}{=}\PYGZlt{}cluster\PYGZhy{}name\PYGZgt{}\PYGZhy{}backup\PYGZhy{}coordinator:10001 \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}storage \PYGZlt{}storage\PYGZgt{} \PYG{l+s+se}{\PYGZbs{}}
  backup\PYGZhy{}name
\end{sphinxVerbatim}

\end{enumerate}


\chapter{Update Percona Server for MongoDB Operator}
\label{\detokenize{update:update-percona-server-for-mongodb-operator}}\label{\detokenize{update:operator-updates}}\label{\detokenize{update::doc}}
Starting from the version 1.1.0 the Percona Kubernetes Operator for MongoDB allows
upgrades to newer versions. This includes upgrades of the
Operator itself, and upgrades of the Percona Server for MongoDB.


\section{Upgrading the Operator}
\label{\detokenize{update:upgrading-the-operator}}\label{\detokenize{update:operator-update}}
This upgrade can be done either in semi\sphinxhyphen{}automatic or in manual mode.

\begin{sphinxadmonition}{note}{Note:}
Manual update mode is the recommended way for a production cluster.
\end{sphinxadmonition}


\subsection{Semi\sphinxhyphen{}automatic upgrade}
\label{\detokenize{update:semi-automatic-upgrade}}\label{\detokenize{update:operator-update-semi-auto-updates}}
\begin{sphinxadmonition}{note}{Note:}
Only the incremental update to a nearest minor version is supported
(for example, update from 1.4.0 to 1.5.0).
To update to a newer version, which differs from the current version by more
than one, make several incremental updates sequentially.
\end{sphinxadmonition}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Update the Custom Resource Definition file for the Operator, taking it from
the official repository on Github, and do the same for the Role\sphinxhyphen{}based access
control:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f https://raw.githubusercontent.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/v1.6.0/deploy/crd.yaml
kubectl apply \PYGZhy{}f https://raw.githubusercontent.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/v1.6.0/deploy/rbac.yaml
\end{sphinxVerbatim}

\item {} 
Edit the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file, setting \sphinxcode{\sphinxupquote{updateStrategy}} key to
\sphinxcode{\sphinxupquote{RollingUpdate}}.

\item {} 
Now you should \sphinxhref{https://kubernetes.io/docs/tasks/run-application/update-api-object-kubectl-patch/}{apply a patch} to your
deployment, supplying necessary image names with a newer version tag. This
is done with the \sphinxcode{\sphinxupquote{kubectl patch deployment}} command. For example, updating
to the \sphinxcode{\sphinxupquote{1.6.0}} version should look as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{patch} \PYG{n}{deployment} \PYG{n}{percona}\PYG{o}{\PYGZhy{}}\PYG{n}{server}\PYG{o}{\PYGZhy{}}\PYG{n}{mongodb}\PYG{o}{\PYGZhy{}}\PYG{n}{operator} \PYGZbs{}
   \PYG{o}{\PYGZhy{}}\PYG{n}{p}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{spec}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{template}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{spec}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{containers}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:[}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{name}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{,}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{image}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.6.0}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZcb{}]\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s1}{\PYGZsq{}}

\PYG{n}{kubectl} \PYG{n}{patch} \PYG{n}{psmdb} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{type}\PYG{o}{=}\PYG{n}{merge} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{patch} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZob{}}
   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{spec}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{crVersion}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1.6.0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{image}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{percona/percona\PYGZhy{}server\PYGZhy{}mongodb:}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+si}{\PYGZob{}mongodb42recommended\PYGZcb{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{,}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{backup}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{image}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.6.0\PYGZhy{}backup}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{,}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pmm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{image}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{percona/pmm\PYGZhy{}client:2.12.0}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}
   \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{l+s+s1}{\PYGZsq{}}
\end{sphinxVerbatim}

\item {} 
The deployment rollout will be automatically triggered by the applied patch.
You can track the rollout process in real time using the
\sphinxcode{\sphinxupquote{kubectl rollout status}} command with the name of your cluster:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{rollout} \PYG{n}{status} \PYG{n}{sts} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{rs0}
\end{sphinxVerbatim}

\end{enumerate}


\subsection{Manual upgrade}
\label{\detokenize{update:manual-upgrade}}\label{\detokenize{update:operator-update-manual-updates}}
\begin{sphinxadmonition}{note}{Note:}
Only the incremental update to a nearest minor version of the Operator
is supported (for example, update from 1.2.0 to 1.3.0).
To update to a newer version, which differs from the current version by more
than one, make several incremental updates sequentially.
\end{sphinxadmonition}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Update the Custom Resource Definition file for the Operator, taking it from
the official repository on Github, and do the same for the Role\sphinxhyphen{}based access
control:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f https://raw.githubusercontent.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/v1.6.0/deploy/crd.yaml
kubectl apply \PYGZhy{}f https://raw.githubusercontent.com/percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/v1.6.0/deploy/rbac.yaml
\end{sphinxVerbatim}

\item {} 
Edit the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file, setting \sphinxcode{\sphinxupquote{updateStrategy}} key to
\sphinxcode{\sphinxupquote{OnDelete}}.

\item {} 
Now you should \sphinxhref{https://kubernetes.io/docs/tasks/run-application/update-api-object-kubectl-patch/}{apply a patch} to your
deployment, supplying necessary image names with a newer version tag. This
is done with the \sphinxcode{\sphinxupquote{kubectl patch deployment}} command. For example, updating
to the \sphinxcode{\sphinxupquote{1.6.0}} version should look as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{patch} \PYG{n}{deployment} \PYG{n}{percona}\PYG{o}{\PYGZhy{}}\PYG{n}{server}\PYG{o}{\PYGZhy{}}\PYG{n}{mongodb}\PYG{o}{\PYGZhy{}}\PYG{n}{operator} \PYGZbs{}
   \PYG{o}{\PYGZhy{}}\PYG{n}{p}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{spec}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{template}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{spec}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{containers}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:[}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{name}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{,}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{image}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{:}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.6.0}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZcb{}]\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s1}{\PYGZsq{}}

\PYG{n}{kubectl} \PYG{n}{patch} \PYG{n}{psmdb} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{type}\PYG{o}{=}\PYG{n}{merge} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{patch} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZob{}}
   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{spec}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{crVersion}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1.6.0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{image}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{percona/percona\PYGZhy{}server\PYGZhy{}mongodb:}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+si}{\PYGZob{}mongodb42recommended\PYGZcb{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{,}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{backup}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{image}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.6.0\PYGZhy{}backup}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{,}
       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pmm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{image}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{percona/pmm\PYGZhy{}client:2.12.0}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}
   \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{l+s+s1}{\PYGZsq{}}
\end{sphinxVerbatim}

\item {} 
Pod with the newer Percona Server for MongoDB image will start after you
delete it. Delete targeted Pods manually one by one to make them restart in
the desired order:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
Delete the Pod using its name with the command like the following one:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{delete} \PYG{n}{pod} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{rs0}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}
\end{sphinxVerbatim}

\item {} 
Wait until Pod becomes ready:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{kubectl} \PYG{n}{get} \PYG{n}{pod} \PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{rs0}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}
\end{sphinxVerbatim}

The output should be like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{NAME}                    \PYG{n}{READY}   \PYG{n}{STATUS}    \PYG{n}{RESTARTS}   \PYG{n}{AGE}
\PYG{n}{my}\PYG{o}{\PYGZhy{}}\PYG{n}{cluster}\PYG{o}{\PYGZhy{}}\PYG{n}{name}\PYG{o}{\PYGZhy{}}\PYG{n}{rs0}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}   \PYG{l+m+mi}{1}\PYG{o}{/}\PYG{l+m+mi}{1}     \PYG{n}{Running}   \PYG{l+m+mi}{0}          \PYG{l+m+mi}{3}\PYG{n}{m33s}
\end{sphinxVerbatim}

\end{enumerate}

\item {} 
The update process is successfully finished when all Pods have been
restarted.

\end{enumerate}


\section{Upgrading Percona Server for MongoDB}
\label{\detokenize{update:upgrading-percona-server-for-mongodb}}\label{\detokenize{update:operator-update-smartupdates}}
Starting from version 1.5.0, the Operator can do fully automatic upgrades to
the newer versions of Percona Server for MongoDB within the method named \sphinxstyleemphasis{Smart
Updates}.

To have this upgrade method enabled, make sure that the \sphinxcode{\sphinxupquote{updateStrategy}} key
in the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} configuration file is set to \sphinxcode{\sphinxupquote{SmartUpdate}}.

When automatic updates are enabled, the Operator will carry on upgrades
according to the following algorithm. It will query a special \sphinxstyleemphasis{Version Service}
server at scheduled times to obtain fresh information about version numbers and
valid image paths needed for the upgrade. If the current version should be
upgraded, the Operator updates the CR to reflect the new image paths and carries
on sequential Pods deletion in a safe order, allowing StatefulSet to redeploy
the cluster Pods with the new image.

The upgrade details are set in the \sphinxcode{\sphinxupquote{upgradeOptions}} section of the
\sphinxcode{\sphinxupquote{deploy/cr.yaml}} configuration file. Make the following edits to configure
updates:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Set the \sphinxcode{\sphinxupquote{apply}} option to one of the following values:
\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{Recommended}} \sphinxhyphen{} automatic upgrades will choose the most recent version
of software flagged as Recommended (for clusters created from scratch,
the PSMDB 4.2 version will be selected instead of the PSMDB 4.0 one
regardless of the image path; for already existing clusters, the 4.2
vs. 4.0 branch choice will be preserved),

\item {} 
\sphinxcode{\sphinxupquote{Latest}} \sphinxhyphen{} automatic upgrades will choose the most recent version of
the software available (for clusters created from scratch,
the PSMDB 4.2 version will be selected instead of the PSMDB 4.0 one
regardless of the image path; for already existing clusters, the 4.2
vs. 4.0 branch choice will be preserved),

\item {} 
\sphinxstyleemphasis{specific version number} \sphinxhyphen{} will apply an upgrade if the running PSMDB
version doesn’t match the explicit version number with no future upgrades
(version numbers are specified as \sphinxcode{\sphinxupquote{4.2.8\sphinxhyphen{}8}}, \sphinxcode{\sphinxupquote{4.2.7\sphinxhyphen{}7}},
\sphinxcode{\sphinxupquote{4.0.19\sphinxhyphen{}12}}, etc.),

\item {} 
\sphinxcode{\sphinxupquote{Never}} or \sphinxcode{\sphinxupquote{Disabled}} \sphinxhyphen{} disable automatic upgrades

\begin{sphinxadmonition}{note}{Note:}
When automatic upgrades are disabled by the \sphinxcode{\sphinxupquote{apply}} option,
Smart Update functionality will continue working for changes triggered
by other events, such as rotating a password, or
changing resource values.
\end{sphinxadmonition}

\end{itemize}

\item {} 
Make sure the \sphinxcode{\sphinxupquote{versionServiceEndpoint}} key is set to a valid Version
Server URL (otherwise Smart Updates will not occur).
\begin{enumerate}
\sphinxsetlistlabels{\Alph}{enumii}{enumiii}{}{.}%
\item {} 
You can use the URL of the official Percona’s Version Service (default).
Set \sphinxcode{\sphinxupquote{versionServiceEndpoint}} to \sphinxcode{\sphinxupquote{https://check.percona.com}}.

\item {} 
Alternatively, you can run Version Service inside your cluster. This
can be done with the \sphinxcode{\sphinxupquote{kubectl}} command as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl run version\PYGZhy{}service \PYGZhy{}\PYGZhy{}image\PYG{o}{=}perconalab/version\PYGZhy{}service \PYGZhy{}\PYGZhy{}env\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}SERVE\PYGZus{}HTTP=true\PYGZdq{}} \PYGZhy{}\PYGZhy{}port \PYG{l+m}{11000} \PYGZhy{}\PYGZhy{}expose
\end{sphinxVerbatim}

\end{enumerate}

\begin{sphinxadmonition}{note}{Note:}
Version Service is never checked if automatic updates are disabled.
If automatic updates are enabled, but Version Service URL can not be
reached, upgrades will not occur.
\end{sphinxadmonition}

\item {} 
Use the \sphinxcode{\sphinxupquote{schedule}} option to specify the update checks time in CRON format.

\end{enumerate}

The following example sets the midnight update checks with the official
Percona’s Version Service:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{spec}\PYG{p}{:}
  \PYG{n+nt}{updateStrategy}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{SmartUpdate}
  \PYG{n+nt}{upgradeOptions}\PYG{p}{:}
    \PYG{n+nt}{apply}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Recommended}
    \PYG{n+nt}{versionServiceEndpoint}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{https://check.percona.com}
    \PYG{n+nt}{schedule}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0}\PYG{n+nv}{ }\PYG{l+s}{0}\PYG{n+nv}{ }\PYG{l+s}{*}\PYG{n+nv}{ }\PYG{l+s}{*}\PYG{n+nv}{ }\PYG{l+s}{*}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nn}{...}
\end{sphinxVerbatim}


\chapter{Scale Percona Server for MongoDB on Kubernetes and OpenShift}
\label{\detokenize{scaling:scale-percona-server-for-mongodb-on-kubernetes-and-openshift}}\label{\detokenize{scaling::doc}}
One of the great advantages brought by Kubernetes and the OpenShift
platform is the ease of an application scaling. Scaling a Deployment up
or down ensures new Pods are created and set to available Kubernetes
nodes.

Size of the cluster is controlled by a {\hyperref[\detokenize{operator:replsets-size}]{\sphinxcrossref{\DUrole{std,std-ref}{size key}}}} in the {\hyperref[\detokenize{operator:operator-custom-resource-options}]{\sphinxcrossref{\DUrole{std,std-ref}{Custom Resource options}}}} configuration.. That’s why scaling the cluster needs
nothing more but changing this option and applying the updated
configuration file. This may be done in a specifically saved config, or
on the fly, using the following command, which saves the current
configuration, updates it and applies the changed version:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl get psmdb/my\PYGZhy{}cluster\PYGZhy{}name \PYGZhy{}o yaml \PYG{p}{|} sed \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}s/size: 3/size: 5/\PYGZsq{}} \PYG{p}{|} kubectl apply \PYGZhy{}f \PYGZhy{}
\end{sphinxVerbatim}

In this example we have changed the size of the Percona Server for
MongoDB from \sphinxcode{\sphinxupquote{3}}, which is a minimum recommended value, to \sphinxcode{\sphinxupquote{5}}
nodes.

\sphinxstylestrong{Note:} \sphinxstyleemphasis{Using \textasciigrave{}\textasciigrave{}kubectl scale StatefulSet\_name\textasciigrave{}\textasciigrave{} command to rescale
Percona Server for MongoDB is not recommended, as it makes \textasciigrave{}\textasciigrave{}size\textasciigrave{}\textasciigrave{}
configuration option out of sync, and the next config change may result
in reverting the previous number of nodes.}


\chapter{Monitoring}
\label{\detokenize{monitoring:monitoring}}\label{\detokenize{monitoring:operator-monitoring}}\label{\detokenize{monitoring::doc}}
Percona Monitoring and Management (PMM) \sphinxhref{https://www.percona.com/doc/percona-monitoring-and-management/2.x/index.html}{provides an excellent
solution}
of monitoring Percona Server for MongoDB.

\begin{sphinxadmonition}{note}{Note:}
Only PMM 2.x versions are supported by the Operator.
\end{sphinxadmonition}

PMM is a client/server application. \sphinxstyleemphasis{PMM Client} runs on each node with the
database you wish to monitor: it collects needed metrics and sends gathered data
to \sphinxstyleemphasis{PMM Server}. As a user, you connect to PMM Server to see database metrics on
a number of dashboards.

That’s why PMM Server and PMM Client need to be installed separately.


\section{Installing PMM Server}
\label{\detokenize{monitoring:installing-pmm-server}}
PMM Server runs as a \sphinxstyleemphasis{Docker image}, a \sphinxstyleemphasis{virtual appliance}, or on an \sphinxstyleemphasis{AWS instance}.
Please refer to the \sphinxhref{https://www.percona.com/doc/percona-monitoring-and-management/2.x/setting-up/server/index.html}{official PMM documentation}
for the installation instructions.


\section{Installing PMM Client}
\label{\detokenize{monitoring:installing-pmm-client}}
The following steps are needed for the PMM client installation in your
Kubernetes\sphinxhyphen{}based environment:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
The PMM client installation is initiated by updating the \sphinxcode{\sphinxupquote{pmm}}
section in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file.
\begin{itemize}
\item {} 
set \sphinxcode{\sphinxupquote{pmm.enabled=true}}

\item {} 
set the \sphinxcode{\sphinxupquote{pmm.serverHost}} key to your PMM Server hostname.

\item {} 
check that  the\textasciigrave{}\textasciigrave{}PMM\_SERVER\_USER\textasciigrave{}\textasciigrave{} key in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/secrets.yaml}{deploy/secrets.yaml}
secrets file contains your PMM Server user name (\sphinxcode{\sphinxupquote{admin}} by default).

\item {} 
make sure the \sphinxcode{\sphinxupquote{PMM\_SERVER\_PASSWORD}} key in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/secrets.yaml}{deploy/secrets.yaml}
secrets file contains the password specified for the PMM Server during its
installation.

\begin{sphinxadmonition}{note}{Note:}
You use \sphinxcode{\sphinxupquote{deploy/secrets.yaml}} file to \sphinxstyleemphasis{create} Secrets Object.
The file contains all values for each key/value pair in a convenient
plain text format. But the resulting Secrets contain passwords stored
as base64\sphinxhyphen{}encoded strings. If you want to \sphinxstyleemphasis{update} password field,
you’ll need to encode the value into base64 format. To do this, you can
run \sphinxcode{\sphinxupquote{echo \sphinxhyphen{}n "password" | base64}} in your local shell to get valid
values. For example, setting the PMM Server user’s password to
\sphinxtitleref{new\_password\textasciigrave{}} in the \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}} object can be done
with the following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl patch secret/my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets \PYGZhy{}p \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}\PYGZdq{}data\PYGZdq{}:\PYGZob{}\PYGZdq{}PMM\PYGZus{}SERVER\PYGZus{}PASSWORD\PYGZdq{}: \PYGZsq{}}\PYG{k}{\PYGZdl{}(}\PYG{n+nb}{echo} \PYGZhy{}n new\PYGZus{}password \PYG{p}{|} base64\PYG{k}{)}\PYG{l+s+s1}{\PYGZsq{}\PYGZcb{}\PYGZcb{}\PYGZsq{}}
\end{sphinxVerbatim}
\end{sphinxadmonition}

\item {} 
you can also use \sphinxcode{\sphinxupquote{pmm.mongodParams}} and \sphinxcode{\sphinxupquote{pmm.mongosParams}} keys to
specify additional parameters for the \sphinxtitleref{pmm\sphinxhyphen{}admin add mongodb \textless{}https://www.percona.com/doc/percona\sphinxhyphen{}monitoring\sphinxhyphen{}and\sphinxhyphen{}management/2.x/setting\sphinxhyphen{}up/client/mongodb.html\#adding\sphinxhyphen{}mongodb\sphinxhyphen{}service\sphinxhyphen{}monitoring\textgreater{}\_ command for \textasciigrave{}\textasciigrave{}mongod\textasciigrave{}} and
\sphinxcode{\sphinxupquote{mongos}} Pods respectively, if needed.

\begin{sphinxadmonition}{note}{Note:}
Please take into account that Operator automatically manages
common MongoDB Service Monitoring parameters mentioned in the officiall \sphinxcode{\sphinxupquote{pmm\sphinxhyphen{}admin add mongodb}} {\color{red}\bfseries{}\textasciigrave{}documentation\textless{}https://www.percona.com/doc/percona\sphinxhyphen{}monitoring\sphinxhyphen{}and\sphinxhyphen{}management/2.x/setting\sphinxhyphen{}up/client/mongodb.html\#adding\sphinxhyphen{}mongodb\sphinxhyphen{}service\sphinxhyphen{}monitoring\textgreater{}\textasciigrave{}\_},
such like username, password, service\sphinxhyphen{}name, host, etc. Assigning values
to these parameters is not recommended and can negatively affect the
functionality of the PMM setup carried out by the Operator.
\end{sphinxadmonition}

\end{itemize}

Apply changes with the \sphinxcode{\sphinxupquote{kubectl apply \sphinxhyphen{}f deploy/secrets.yaml}} command.

When done, apply the edited \sphinxcode{\sphinxupquote{deploy/cr.yaml}} file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl apply \PYGZhy{}f deploy/cr.yaml
\end{sphinxVerbatim}

\item {} 
Check that corresponding Pods are
not in a cycle of stopping and restarting. This cycle occurs if there are errors on the previous steps:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} kubectl get pods
\PYGZdl{} kubectl logs my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}rs0\PYGZhy{}0 \PYGZhy{}c pmm\PYGZhy{}client
\end{sphinxVerbatim}

\item {} 
Run the following command:

\sphinxcode{\sphinxupquote{kubectl get service/monitoring\sphinxhyphen{}service \sphinxhyphen{}o wide}}

In the results, locate the the \sphinxcode{\sphinxupquote{EXTERNAL\sphinxhyphen{}IP}} field. The external\sphinxhyphen{}ip address
can be used to access PMM via \sphinxstyleemphasis{https} in a web browser, with the
login/password authentication, and the browser is configured to \sphinxhref{https://www.percona.com/doc/percona-monitoring-and-management/index.metrics-monitor.dashboard.html\#pmm-dashboard-mongodb-list}{show
Percona Server for MongoDB
metrics}.

\end{enumerate}

As you can see, because we use the \sphinxcode{\sphinxupquote{stringData}} type when creating the Secrets
object, all values for each key/value pair are stated in plain text format
which is convenient from the user’s point of view. But the resulting Secrets
object contains passwords stored as \sphinxcode{\sphinxupquote{data}} \sphinxhyphen{} i.e., base64\sphinxhyphen{}encoded strings.
If you want to update any field, you’ll need to encode the value into base64
format. To do this, you can run \sphinxcode{\sphinxupquote{echo \sphinxhyphen{}n "password" | base64}} in your local
shell to get valid values. For example, setting the PMM Server user’s password
to \sphinxcode{\sphinxupquote{new\_password}} in the \sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets}} object can be done
with the following command:
.. code:: bash
\begin{quote}

kubectl patch secret/my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}secrets \sphinxhyphen{}p ‘\{“data”:\{“PMM\_SERVER\_USER”: ‘\$(echo \sphinxhyphen{}n new\_password | base64)’\}\}’
\end{quote}


\chapter{Debug}
\label{\detokenize{debug:debug}}\label{\detokenize{debug:debug-images}}\label{\detokenize{debug::doc}}
For the cases when Pods are failing for some reason or just show abnormal behavior,
the Operator can be used with a special \sphinxstyleemphasis{debug image} of the Percona Server for
MongoDB, which has the following specifics:
\begin{itemize}
\item {} 
it avoids restarting on fail,

\item {} 
it contains additional tools useful for debugging (sudo, telnet, gdb, mongodb\sphinxhyphen{}debuginfo package, etc.),

\item {} 
extra verbosity is added to the mongodb daemon.

\end{itemize}

Particularly, using this image is useful if the container entry point fails
(\sphinxcode{\sphinxupquote{mongod}} crashes). In such a situation, Pod is continuously restarting.
Continuous restarts prevent to get console access to the container,
and so a special approach is needed to make fixes.

To use the debug image instead of the normal one, set the following image name
for the \sphinxcode{\sphinxupquote{image}} key in the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} configuration file:
\begin{quote}

\sphinxcode{\sphinxupquote{percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:\{\{\{mongodb42recommended\}\}\}\sphinxhyphen{}debug}}
\end{quote}

The Pod should be restarted to get the new image.

\begin{sphinxadmonition}{note}{Note:}
When the Pod is continuously restarting, you may have to delete it
to apply image changes.
\end{sphinxadmonition}


\part{Reference}
\label{\detokenize{index:reference}}

\chapter{Custom Resource options}
\label{\detokenize{operator:custom-resource-options}}\label{\detokenize{operator:operator-custom-resource-options}}\label{\detokenize{operator::doc}}
The operator is configured via the spec section of the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file. This file contains the following spec sections:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabular}[t]{|\X{15}{100}|\X{15}{100}|\X{10}{100}|\X{60}{100}|}
\hline
\sphinxstyletheadfamily 
Key
&\sphinxstyletheadfamily 
Value type
&\sphinxstyletheadfamily 
Default
&\sphinxstyletheadfamily 
Description
\\
\hline
platform
&
string
&
kubernetes
&
Override/set the Kubernetes platform: \sphinxstyleemphasis{kubernetes} or \sphinxstyleemphasis{openshift}. Set openshift on OpenShift 3.11+
\\
\hline
pause
&
boolean
&
\sphinxcode{\sphinxupquote{false}}
&
Pause/resume: setting it to \sphinxcode{\sphinxupquote{true}} gracefully stops the cluster, and
setting it to \sphinxcode{\sphinxupquote{false}} after shut down starts the cluster back.
\\
\hline
crVersion
&
string
&
\sphinxcode{\sphinxupquote{1.6.0}}
&
Version of the Operator the Custom Resource belongs to
\\
\hline
image
&
string
&
\sphinxcode{\sphinxupquote{percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.2.8\sphinxhyphen{}8}}
&
The Docker image of \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/index.html}{Percona Server for MongoDB} to deploy (actual image names can be found {\hyperref[\detokenize{images:custom-registry-images}]{\sphinxcrossref{\DUrole{std,std-ref}{in the list of certified images}}}})
\\
\hline
imagePullPolicy
&
string
&
\sphinxcode{\sphinxupquote{Always}}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/containers/images/\#updating-images}{policy used to update images}
\\
\hline
imagePullSecrets.name
&
string
&
\sphinxcode{\sphinxupquote{private\sphinxhyphen{}registry\sphinxhyphen{}credentials}}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/\#using-imagepullsecrets}{Kubernetes ImagePullSecret} to access the {\hyperref[\detokenize{custom-registry:custom-registry}]{\sphinxcrossref{\DUrole{std,std-ref}{custom registry}}}}
\\
\hline
ClusterServiceDNSSuffix
&
string
&
\sphinxcode{\sphinxupquote{svc.cluster.local}}
&
The (non\sphinxhyphen{}standard) cluster domain to be used as a suffix of the Service
name
\\
\hline
runUid
&
int
&
1001
&
The (non\sphinxhyphen{}standard) user ID
\\
\hline
allowUnsafeConfigurations
&
boolean
&
\sphinxcode{\sphinxupquote{false}}
&
Prevents users from configuring a cluster with unsafe parameters such as starting the cluster with less than 3 replica set nodes, with odd number of replica set nodes and no arbiter, or without TLS/SSL certificates (if \sphinxcode{\sphinxupquote{true}}, unsafe parameters will be automatically changed to safe defaults)
\\
\hline
updateStrategy
&
string
&
\sphinxcode{\sphinxupquote{SmartUpdate}}
&
A strategy the Operator uses for {\hyperref[\detokenize{update:operator-update}]{\sphinxcrossref{\DUrole{std,std-ref}{upgrades}}}}. Possible values are {\hyperref[\detokenize{update:operator-update-smartupdates}]{\sphinxcrossref{\DUrole{std,std-ref}{SmartUpdate}}}}, \sphinxhref{https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/\#rolling-updates}{RollingUpdate} and \sphinxhref{https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/\#on-delete}{OnDelete}.
\\
\hline
upgradeOptions
&
{\hyperref[\detokenize{operator:operator-upgradeoptions-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
Upgrade configuration section
\\
\hline
secrets
&
{\hyperref[\detokenize{operator:operator-secrets-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
Operator secrets section
\\
\hline
replsets
&
{\hyperref[\detokenize{operator:operator-replsets-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
Operator MongoDB Replica Set section
\\
\hline
pmm
&
{\hyperref[\detokenize{operator:operator-pmm-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
Percona Monitoring and Management section
\\
\hline
sharding
&
{\hyperref[\detokenize{operator:operator-sharding-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
MongoDB sharding configuration section
\\
\hline
mongod
&
{\hyperref[\detokenize{operator:operator-mongod-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
Operator MongoDB Mongod configuration section
\\
\hline
backup
&
{\hyperref[\detokenize{operator:operator-backup-section}]{\sphinxcrossref{\DUrole{std,std-ref}{subdoc}}}}
&&
Percona Server for MongoDB backups section
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}


\section{Upgrade Options Section}
\label{\detokenize{operator:operator-upgradeoptions-section}}\label{\detokenize{operator:id1}}
The \sphinxcode{\sphinxupquote{upgradeOptions}} section in the \sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml} file contains various configuration options to control Percona Server for MongoDB upgrades.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|p{2cm}|p{13.6cm}|}
\hline

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:upgradeoptions-versionserviceendpoint}}
\sphinxhref{operator.html\#upgradeoptions-versionserviceendpoint}{upgradeOptions.versionServiceEndpoint}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{https://check.percona.com}}
\\
\hline
\sphinxstylestrong{Description}
&
The Version Service URL used to check versions compatibility for upgrade
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:upgradeoptions-apply}}
\sphinxhref{operator.html\#upgradeoptions-apply}{upgradeOptions.apply}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{Recommended}}
\\
\hline
\sphinxstylestrong{Description}
&
Specifies how {\hyperref[\detokenize{update:operator-update-smartupdates}]{\sphinxcrossref{\DUrole{std,std-ref}{updates are processed}}}} by the Operator.
\sphinxcode{\sphinxupquote{Never}} or \sphinxcode{\sphinxupquote{Disabled}} will completely disable automatic upgrades, otherwise it can be
set to \sphinxcode{\sphinxupquote{Latest}} or \sphinxcode{\sphinxupquote{Recommended}} or to a specific version string of PSMDB (e.g.
\sphinxcode{\sphinxupquote{4.2.8\sphinxhyphen{}8}}) that is wished to be version\sphinxhyphen{}locked (so that the user can control the
version running, but use automatic upgrades to move between them).
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:upgradeoptions-schedule}}
\sphinxhref{operator.html\#upgradeoptions-schedule}{upgradeOptions.schedule}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0 2 * * *}}
\\
\hline
\sphinxstylestrong{Description}
&
Scheduled time to check for updates, specified in the
\sphinxhref{https://en.wikipedia.org/wiki/Cron}{crontab format}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Secrets section}
\label{\detokenize{operator:operator-secrets-section}}\label{\detokenize{operator:id5}}
Each spec in its turn may contain some key\sphinxhyphen{}value pairs. The secrets one
has only two of them:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|p{2cm}|p{13.6cm}|}
\hline

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:secrets-key}}
\sphinxhref{operator.html\#secrets-key}{secrets.key}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}mongodb\sphinxhyphen{}key}}
\\
\hline
\sphinxstylestrong{Description}
&
The secret name for the \sphinxhref{https://docs.mongodb.com/manual/core/security-internal-authentication/}{MongoDB Internal Auth Key}. This secret is
auto\sphinxhyphen{}created by the operator if it doesn’t exist.
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:secrets-users}}
\sphinxhref{operator.html\#secrets-users}{secrets.users}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}mongodb\sphinxhyphen{}users}}
\\
\hline
\sphinxstylestrong{Description}
&
The secret name for the MongoDB users required to run the operator.
\sphinxstylestrong{This secret is required to run the operator.}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Replsets Section}
\label{\detokenize{operator:operator-replsets-section}}\label{\detokenize{operator:id8}}
The replsets section controls the MongoDB Replica Set.


\begin{savenotes}\sphinxatlongtablestart\begin{longtable}[c]{|p{2cm}|p{13.6cm}|}
\hline

\endfirsthead

\multicolumn{2}{c}%
{\makebox[0pt]{\sphinxtablecontinued{\tablename\ \thetable{} \textendash{} continued from previous page}}}\\
\hline

\endhead

\hline
\multicolumn{2}{r}{\makebox[0pt][r]{\sphinxtablecontinued{continues on next page}}}\\
\endfoot

\endlastfoot

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-name}}
\sphinxhref{operator.html\#replsets-name}{replsets.name}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{rs 0}}
\\
\hline
\sphinxstylestrong{Description}
&
The name of the \sphinxhref{https://docs.mongodb.com/manual/replication/}{MongoDB Replica Set}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-size}}
\sphinxhref{operator.html\#replsets-size}{replsets.size}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
3
\\
\hline
\sphinxstylestrong{Description}
&
The size of the MongoDB Replica Set, must be \textgreater{}= 3 for \sphinxhref{https://docs.mongodb.com/manual/replication/\#redundancy-and-data-availability}{High\sphinxhyphen{}Availability}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-affinity-antiaffinitytopologykey}}
\sphinxhref{operator.html\#replsets-affinity-antiaffinitytopologykey}{replsets.affinity.antiAffinityTopologyKey}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{kubernetes.io/hostname}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#inter-pod-affinity-and-anti-affinity-beta-feature}{Kubernetes topologyKey} node affinity constraint for the
Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-affinity-advanced}}
\sphinxhref{operator.html\#replsets-affinity-advanced}{replsets.affinity.advanced}
\\
\hline
\sphinxstylestrong{Value Type}
&
subdoc
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
In cases where the pods require complex tuning the \sphinxtitleref{advanced} option turns off the
\sphinxcode{\sphinxupquote{topologykey}} effect. This setting allows the standard Kubernetes affinity constraints of
any complexity to be used
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-tolerations-key}}
\sphinxhref{operator.html\#replsets-tolerations-key}{replsets.tolerations.key}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{node.alpha.kubernetes.io/unreachable}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations} key
for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-tolerations-operator}}
\sphinxhref{operator.html\#replsets-tolerations-operator}{replsets.tolerations.operator}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{Exists}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
operator for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-tolerations-effect}}
\sphinxhref{operator.html\#replsets-tolerations-effect}{replsets.tolerations.effect}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{NoExecute}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations} effect
for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-tolerations-tolerationseconds}}
\sphinxhref{operator.html\#replsets-tolerations-tolerationSeconds}{replsets.tolerations.tolerationSeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{6000}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations} time
limit  for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-priorityclassname}}
\sphinxhref{operator.html\#replsets-priorityclassname}{replsets.priorityClassName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{high priority}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/\#priorityclass}{Kuberentes Pod priority class}  for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-annotations}}
\sphinxhref{operator.html\#replsets-annotations}{replsets.annotations.iam.amazonaws.com/role}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{role\sphinxhyphen{}arn}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes-on-aws.readthedocs.io/en/latest/user-guide/iam-roles.html}{AWS IAM role}  for the
Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-labels}}
\sphinxhref{operator.html\#replsets-labels}{replsets.labels}
\\
\hline
\sphinxstylestrong{Value Type}
&
label
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{rack: rack\sphinxhyphen{}22}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/}{Kubernetes affinity labels}
for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-nodeselector}}
\sphinxhref{operator.html\#replsets-nodeselector}{replsets.nodeSelector}
\\
\hline
\sphinxstylestrong{Value Type}
&
label
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{disktype: ssd}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#nodeselector}{Kubernetes nodeSelector}
affinity constraint  for the Replica Set nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-livenessprobe-failurethreshold}}
\sphinxhref{operator.html\#replsets-livenessprobe-failurethreshold}{replsets.livenessProbe.failureThreshold}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{4}}
\\
\hline
\sphinxstylestrong{Description}
&
Number of consecutive unsuccessful tries of the
\sphinxhref{https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\#configure-probes}{liveness probe} to be undertaken
before giving up.
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-livenessprobe-initialdelayseconds}}
\sphinxhref{operator.html\#replsets-livenessprobe-initialdelayseconds}{replsets.livenessProbe.initialDelaySeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{60}}
\\
\hline
\sphinxstylestrong{Description}
&
Number of seconds to wait after the container start before initiating the \sphinxhref{https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\#configure-probes}{liveness probe}.
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-livenessprobe-periodseconds}}
\sphinxhref{operator.html\#replsets-livenessprobe-periodseconds}{replsets.livenessProbe.periodSeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{30}}
\\
\hline
\sphinxstylestrong{Description}
&
How often to perform a \sphinxhref{https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\#configure-probes}{liveness probe} (in seconds).
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-livenessprobe-successthreshold}}
\sphinxhref{operator.html\#replsets-livenessprobe-successthreshold}{replsets.livenessProbe.successThreshold}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{1}}
\\
\hline
\sphinxstylestrong{Description}
&
Minimum consecutive successes for the \sphinxhref{https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\#configure-probes}{liveness probe} to be considered
successful after having failed.
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-livenessprobe-timeoutseconds}}
\sphinxhref{operator.html\#replsets-livenessprobe-timeoutseconds}{replsets.livenessProbe.timeoutSeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{5}}
\\
\hline
\sphinxstylestrong{Description}
&
Number of seconds after which the \sphinxhref{https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/\#configure-probes}{liveness probe} times out.
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-livenessprobe-startupdelayseconds}}
\sphinxhref{operator.html\#replsets-livenessprobe-startupdelayseconds}{replsets.livenessProbe.startupDelaySeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{7200}}
\\
\hline
\sphinxstylestrong{Description}
&
Time after which the liveness probe is failed if the MongoDB instance didn’t finish its
full startup yet
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-poddisruptionbudget-maxunavailable}}
\sphinxhref{operator.html\#replsets-poddisruptionbudget-maxunavailable}{replsets.podDisruptionBudget.maxUnavailable}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{1}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/workloads/pods/disruptions/}{Kubernetes Pod distribution budget}
limit specifying the maximum value for unavailable Pods
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-poddisruptionbudget-minavailable}}
\sphinxhref{operator.html\#replsets-poddisruptionbudget-minavailable}{replsets.podDisruptionBudget.minAvailable}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{1}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/workloads/pods/disruptions/}{Kubernetes Pod distribution budget}
limit specifying the minimum value for available Pods
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-expose-enabled}}
\sphinxhref{operator.html\#replsets-expose-enabled}{replsets.expose.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Enable or disable exposing \sphinxhref{https://docs.mongodb.com/manual/replication/}{MongoDB Replica Set} nodes with dedicated IP addresses
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-expose-exposetype}}
\sphinxhref{operator.html\#replsets-expose-exposetype}{replsets.expose.exposeType}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{ClusterIP}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/services-networking/service/\#publishing-services-service-types}{IP address type} to be exposed
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-enabled}}
\sphinxhref{operator.html\#replsets-arbiter-enabled}{replsets.arbiter.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Enable or disable creation of \sphinxhref{https://docs.mongodb.com/manual/core/replica-set-arbiter/}{Replica Set Arbiter} nodes within the cluster
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-size}}
\sphinxhref{operator.html\#replsets-arbiter-size}{replsets.arbiter.size}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{1}}
\\
\hline
\sphinxstylestrong{Description}
&
The number of \sphinxhref{https://docs.mongodb.com/manual/core/replica-set-arbiter/}{Replica Set Arbiter} instances
within the cluster
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-affinity-antiaffinitytopologykey}}
\sphinxhref{operator.html\#replsets-arbiter-affinity-antiaffinitytopologykey}{replsets.arbiter.afinity.antiAffinityTopologyKey}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{kubernetes.io/hostname}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#inter-pod-affinity-and-anti-affinity-beta-feature}{Kubernetes topologyKey}
node affinity constraint for the Arbiter
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-affinity-advanced}}
\sphinxhref{operator.html\#replsets-arbiter-affinity-advanced}{replsets.arbiter.affinity.advanced}
\\
\hline
\sphinxstylestrong{Value Type}
&
subdoc
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
In cases where the pods require complex tuning the \sphinxtitleref{advanced} option turns off
the \sphinxcode{\sphinxupquote{topologykey}} effect. This setting allows the standard Kubernetes affinity
constraints of any complexity to be used
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-tolerations-key}}
\sphinxhref{operator.html\#replsets-arbiter-tolerations-key}{replsets.arbiter.tolerations.key}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{node.alpha.kubernetes.io/unreachable}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
key for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-tolerations-operator}}
\sphinxhref{operator.html\#replsets-arbiter-tolerations-operator}{replsets.arbiter.tolerations.operator}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{Exists}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
operator for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-tolerations-effect}}
\sphinxhref{operator.html\#replsets-arbiter-tolerations-effect}{replsets.arbiter.tolerations.effect}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{NoExecute}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
effect for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-tolerations-tolerationseconds}}
\sphinxhref{operator.html\#replsets-arbiter-tolerations-tolerationseconds}{replsets.arbiter.tolerations.tolerationSeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{6000}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
time limit for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-priorityclassname}}
\sphinxhref{operator.html\#replsets-arbiter-priorityclassname}{replsets.arbiter.priorityClassName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{high priority}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/\#priorityclass}{Kuberentes Pod priority class} for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-annotations}}
\sphinxhref{operator.html\#replsets-arbiter-annotations}{replsets.arbiter.annotations.iam.amazonaws.com/role}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{role\sphinxhyphen{}arn}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes-on-aws.readthedocs.io/en/latest/user-guide/iam-roles.html}{AWS IAM role}
for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-labels}}
\sphinxhref{operator.html\#replsets-arbiter-labels}{replsets.arbiter.labels}
\\
\hline
\sphinxstylestrong{Value Type}
&
label
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{rack: rack\sphinxhyphen{}22}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/}{Kubernetes affinity labels}
for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-arbiter-nodeselector}}
\sphinxhref{operator.html\#replsets-arbiter-nodeselector}{replsets.arbiter.nodeSelector}
\\
\hline
\sphinxstylestrong{Value Type}
&
label
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{disktype: ssd}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#nodeselector}{Kubernetes nodeSelector} affinity constraint for the Arbiter nodes
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-schedulername}}
\sphinxhref{operator.html\#replsets-schedulername}{replsets.schedulerName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{default}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers}{Kubernetes Scheduler}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-resources-limits-cpu}}
\sphinxhref{operator.html\#replsets-resources-limits-cpu}{replsets.resources.limits.cpu}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{300m}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes CPU limit} for MongoDB container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-resources-limits-memory}}
\sphinxhref{operator.html\#replsets-resources-limits-memory}{replsets.resources.limits.memory}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.5G}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes Memory limit} for MongoDB container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-resources-requests-cpu}}
\sphinxhref{operator.html\#replsets-resources-requests-cpu}{replsets.resources.requests.cpu}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes CPU requests} for MongoDB container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-resources-requests-memory}}
\sphinxhref{operator.html\#replsets-resources-requests-memory}{replsets.resources.requests.memory}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes Memory requests} for MongoDB container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-volumespec-emptydir}}
\sphinxhref{operator.html\#replsets-volumespec-emptydir}{replsets.volumeSpec.emptyDir}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{\{\}}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#emptydir}{Kubernetes emptyDir volume}, i.e. the directory which will be created on a node, and will be accessible to
the MongoDB Pod containers
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-volumespec-hostpath-path}}
\sphinxhref{operator.html\#replsets-volumespec-hostpath-path}{replsets.volumeSpec.hostPath.path}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{/data}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#hostpath}{Kubernetes hostPath volume}, i.e. the file or directory of a node that will be accessible to the MongoDB
Pod containers
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-volumespec-hostpath-type}}
\sphinxhref{operator.html\#replsets-volumespec-hostpath-type}{replsets.volumeSpec.hostPath.type}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{Directory}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#hostpath}{Kubernetes hostPath volume type}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-volumespec-persistentvolumeclaim-storageclassname}}
\sphinxhref{operator.html\#replsets-volumespec-persistentvolumeclaim-storageclassname}{replsets.volumeSpec.persistentVolumeClaim.storageClassName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{standard}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/storage-classes/}{Kubernetes Storage Class}
to use with the MongoDB container \sphinxhref{https://kubernetes.io/docs/concepts/storage/persistent-volumes/\#persistentvolumeclaims}{Persistent Volume Claim}.
Use Storage Class with XFS as the default filesystem if possible, \sphinxhref{https://dba.stackexchange.com/questions/190578/is-xfs-still-the-best-choice-for-mongodb}{for better MongoDB
performance}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-volumespec-persistentvolumeclaim-accessmodes}}
\sphinxhref{operator.html\#replsets-volumespec-persistentvolumeclaim-accessmodes}{replsets.volumeSpec.persistentVolumeClaim.accessModes}
\\
\hline
\sphinxstylestrong{Value Type}
&
array
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{{[} "ReadWriteOnce" {]}}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/persistent-volumes/}{Kubernetes Persistent Volume}
access modes for the MongoDB container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:replsets-volumespec-persistentvolumeclaim-resources-requests-storage}}
\sphinxhref{operator.html\#replsets-volumespec-persistentvolumeclaim-resources-requests-storage}{replsets.volumeSpec.persistentVolumeClaim.resources.requests.storage}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{3Gi}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/persistent-volumes/}{Kubernetes Persistent Volume}
size for the MongoDB container
\\
\hline
\end{longtable}\sphinxatlongtableend\end{savenotes}


\section{PMM Section}
\label{\detokenize{operator:operator-pmm-section}}\label{\detokenize{operator:id71}}
The \sphinxcode{\sphinxupquote{pmm}} section in the deploy/cr.yaml file contains configuration
options for Percona Monitoring and Management.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|p{2cm}|p{13.6cm}|}
\hline

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:pmm-enabled}}
\sphinxhref{operator.html\#pmm-enabled}{pmm.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables or disables monitoring Percona Server for MongoDB with
\sphinxhref{https://www.percona.com/doc/percona-monitoring-and-managementindex.metrics-monitor.dashboard.html}{PMM}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:pmm-image}}
\sphinxhref{operator.html\#pmm-image}{pmm.image}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{percona/pmm\sphinxhyphen{}client:2.12.0}}
\\
\hline
\sphinxstylestrong{Description}
&
PMM Client docker image to use
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:pmm-serverhost}}
\sphinxhref{operator.html\#pmm-serverhost}{pmm.serverHost}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{monitoring\sphinxhyphen{}service}}
\\
\hline
\sphinxstylestrong{Description}
&
Address of the PMM Server to collect data from the Cluster
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:pmm-mongodparams}}
\sphinxhref{operator.html\#pmm-mongodparams}{pmm.mongodParams}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}environment=DEV\sphinxhyphen{}ENV \sphinxhyphen{}\sphinxhyphen{}custom\sphinxhyphen{}labels=DEV\sphinxhyphen{}ENV}}
\\
\hline
\sphinxstylestrong{Description}
&
Additional parameters which will be passed to the \sphinxhref{https://www.percona.com/doc/percona-monitoring-and-management/2.x/setting-up/client/mongodb.html\#adding-mongodb-service-monitoring}{pmm\sphinxhyphen{}admin add mongodb} command for \sphinxcode{\sphinxupquote{mongod}} Pods
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:pmm-mongosparams}}
\sphinxhref{operator.html\#pmm-mongosparams}{pmm.mongosParams}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}environment=DEV\sphinxhyphen{}ENV \sphinxhyphen{}\sphinxhyphen{}custom\sphinxhyphen{}labels=DEV\sphinxhyphen{}ENV}}
\\
\hline
\sphinxstylestrong{Description}
&
Additional parameters which will be passed to the \sphinxhref{https://www.percona.com/doc/percona-monitoring-and-management/2.x/setting-up/client/mongodb.html\#adding-mongodb-service-monitoring}{pmm\sphinxhyphen{}admin add mongodb} command for \sphinxcode{\sphinxupquote{mongos}} Pods
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Sharding Section}
\label{\detokenize{operator:operator-sharding-section}}\label{\detokenize{operator:id78}}
The \sphinxcode{\sphinxupquote{sharding}} section in the deploy/cr.yaml file contains configuration
options for Percona Server for MondoDB {\hyperref[\detokenize{sharding:operator-sharding}]{\sphinxcrossref{\DUrole{std,std-ref}{sharding}}}}.


\begin{savenotes}\sphinxatlongtablestart\begin{longtable}[c]{|p{2cm}|p{13.6cm}|}
\hline

\endfirsthead

\multicolumn{2}{c}%
{\makebox[0pt]{\sphinxtablecontinued{\tablename\ \thetable{} \textendash{} continued from previous page}}}\\
\hline

\endhead

\hline
\multicolumn{2}{r}{\makebox[0pt][r]{\sphinxtablecontinued{continues on next page}}}\\
\endfoot

\endlastfoot

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-enabled}}
\sphinxhref{operator.html\#sharding-enabled}{sharding.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables or disables \sphinxhref{https://docs.mongodb.com/manual/sharding/}{Percona Server for MondoDB
sharding}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-size}}
\sphinxhref{operator.html\#sharding-configsvrreplset-size}{sharding.configsvrReplSet.size}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{3}}
\\
\hline
\sphinxstylestrong{Description}
&
The number of \sphinxhref{https://docs.mongodb.com/manual/core/sharded-cluster-config-servers/}{Config Server instances} within the cluster
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-volumespec-emptydir}}
\sphinxhref{operator.html\#sharding-configsvrreplset-volumespec-emptydir}{sharding.configsvrReplSet.volumeSpec.emptyDir}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{\{\}}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#emptydir}{Kubernetes emptyDir volume}, i.e. the directory which will be created on a node, and will be accessible to
the Config Server Pod containers
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-volumespec-hostpath-path}}
\sphinxhref{operator.html\#sharding-configsvrreplset-volumespec-hostpath-path}{sharding.configsvrReplSet.volumeSpec.hostPath.path}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{/data}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#hostpath}{Kubernetes hostPath volume}, i.e. the file or directory of a node that will be accessible to the Config
Server Pod containers
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-volumespec-hostpath-type}}
\sphinxhref{operator.html\#sharding-configsvrreplset-volumespec-hostpath-type}{sharding.configsvrReplSet.volumeSpec.hostPath.type}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{Directory}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/volumes/\#hostpath}{Kubernetes hostPath volume type}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-volumespec-persistentvolumeclaim-storageclassname}}
\sphinxhref{operator.html\#sharding-configsvrreplset-volumespec-persistentvolumeclaim-storageclassname}{sharding.configsvrReplSet.volumeSpec.persistentVolumeClaim.storageClassName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{standard}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/storage-classes/}{Kubernetes Storage Class}
to use with the Config Server container \sphinxhref{https://kubernetes.io/docs/concepts/storage/persistent-volumes/\#persistentvolumeclaims}{Persistent Volume Claim}.
Use Storage Class with XFS as the default filesystem if possible, \sphinxhref{https://dba.stackexchange.com/questions/190578/is-xfs-still-the-best-choice-for-mongodb}{for better MongoDB
performance}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-volumespec-persistentvolumeclaim-accessmodes}}
\sphinxhref{operator.html\#sharding-configsvrreplset-volumespec-persistentvolumeclaim-accessmodes}{sharding.configsvrReplSet.volumeSpec.persistentVolumeClaim.accessModes}
\\
\hline
\sphinxstylestrong{Value Type}
&
array
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{{[} "ReadWriteOnce" {]}}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/persistent-volumes/}{Kubernetes Persistent Volume}
access modes for the Config Server container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-configsvrreplset-volumespec-persistentvolumeclaim-resources-requests-storage}}
\sphinxhref{operator.html\#sharding-configsvrreplset-volumespec-persistentvolumeclaim-resources-requests-storage}{sharding.configsvrReplSet.volumeSpec.persistentVolumeClaim.resources.requests.storage}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{3Gi}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/storage/persistent-volumes/}{Kubernetes Persistent Volume}
size for the Config Server container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-size}}
\sphinxhref{operator.html\#sharding-mongos-size}{sharding.mongos.size}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{3}}
\\
\hline
\sphinxstylestrong{Description}
&
The number of \sphinxhref{https://docs.mongodb.com/manual/core/sharded-cluster-query-router/}{mongos} instances
within the cluster
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-affinity-antiaffinitytopologykey}}
\sphinxhref{operator.html\#sharding-mongos-affinity-antiaffinitytopologykey}{sharding.mongos.afinity.antiAffinityTopologyKey}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{kubernetes.io/hostname}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#inter-pod-affinity-and-anti-affinity-beta-feature}{Kubernetes topologyKey}
node affinity constraint for mongos
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-affinity-advanced}}
\sphinxhref{operator.html\#sharding-mongos-affinity-advanced}{sharding.mongos.affinity.advanced}
\\
\hline
\sphinxstylestrong{Value Type}
&
subdoc
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
In cases where the Pods require complex tuning the \sphinxtitleref{advanced} option turns off
the \sphinxcode{\sphinxupquote{topologykey}} effect. This setting allows the standard Kubernetes affinity
constraints of any complexity to be used
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-tolerations-key}}
\sphinxhref{operator.html\#sharding-mongos-tolerations-key}{sharding.mongos.tolerations.key}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{node.alpha.kubernetes.io/unreachable}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
key for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-tolerations-operator}}
\sphinxhref{operator.html\#sharding-mongos-tolerations-operator}{sharding.mongos.tolerations.operator}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{Exists}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
operator for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-tolerations-effect}}
\sphinxhref{operator.html\#sharding-mongos-tolerations-effect}{sharding.mongos.tolerations.effect}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{NoExecute}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
effect for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-tolerations-tolerationseconds}}
\sphinxhref{operator.html\#sharding-mongos-tolerations-tolerationseconds}{sharding.mongos.tolerations.tolerationSeconds}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{6000}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/\#concepts}{Kubernetes Pod tolerations}
time limit for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-priorityclassname}}
\sphinxhref{operator.html\#sharding-mongos-priorityclassname}{sharding.mongos.priorityClassName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{high priority}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/\#priorityclass}{Kuberentes Pod priority class} for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-annotations}}
\sphinxhref{operator.html\#sharding-mongos-annotations}{sharding.mongos.annotations.iam.amazonaws.com/role}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{role\sphinxhyphen{}arn}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes-on-aws.readthedocs.io/en/latest/user-guide/iam-roles.html}{AWS IAM role}
for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-labels}}
\sphinxhref{operator.html\#sharding-mongos-labels}{sharding.mongos.labels}
\\
\hline
\sphinxstylestrong{Value Type}
&
label
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{rack: rack\sphinxhyphen{}22}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/}{Kubernetes affinity labels}
for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-nodeselector}}
\sphinxhref{operator.html\#sharding-mongos-nodeselector}{sharding.mongos.nodeSelector}
\\
\hline
\sphinxstylestrong{Value Type}
&
label
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{disktype: ssd}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\#nodeselector}{Kubernetes nodeSelector} affinity constraint for mongos instances
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-resources-limits-cpu}}
\sphinxhref{operator.html\#sharding-mongos-resources-limits-cpu}{sharding.mongos.limits.cpu}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{300m}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes CPU limit} for mongos container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-resources-limits-memory}}
\sphinxhref{operator.html\#sharding-mongos-resources-limits-memory}{sharding.mongos.limits.memory}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.5G}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes Memory limit} for mongos container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-resources-requests-cpu}}
\sphinxhref{operator.html\#sharding-mongos-resources-requests-cpu}{sharding.mongos.resources.requests.cpu}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{300m}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes CPU requests} for mongos container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-resources-requests-memory}}
\sphinxhref{operator.html\#sharding-mongos-resources-requests-memory}{sharding.mongos.requests.memory}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.5G}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes Memory requests} for mongos container
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-expose-enabled}}
\sphinxhref{operator.html\#sharding-mongos-expose-enabled}{sharding.mongos.expose.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Enable or disable exposing \sphinxhref{https://docs.mongodb.com/manual/core/sharded-cluster-query-router/}{MongoDB mongos daemons} with dedicated IP
addresses
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-expose-exposetype}}
\sphinxhref{operator.html\#sharding-mongos-expose-exposetype}{sharding.mongos.expose.exposeType}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{ClusterIP}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/services-networking/service/\#publishing-services-service-types}{IP address type} to be exposed
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-loadbalancersourceranges}}
\sphinxhref{operator.html\#sharding-mongos-loadbalancersourceranges}{sharding.mongos.loadBalancerSourceRanges}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{10.0.0.0/8}}
\\
\hline
\sphinxstylestrong{Description}
&
The range of client IP addresses from which the load balancer should be reachable
(if not set, there is no limitations)
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-serviceannotations}}
\sphinxhref{operator.html\#sharding-mongos-serviceannotations}{sharding.mongos.serviceAnnotations}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{service.beta.kubernetes.io/aws\sphinxhyphen{}load\sphinxhyphen{}balancer\sphinxhyphen{}backend\sphinxhyphen{}protocol: http}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/}{Kubernetes annotations}
metadata for the MongoDB mongos daemon
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-auditlog-destination}}
\sphinxhref{operator.html\#sharding-mongos-auditLog-destination}{sharding.mongos.auditLog.destination}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/audit-logging.html}{auditLog.destination option}
for the MongoDB mongos daemon
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-auditlog-format}}
\sphinxhref{operator.html\#sharding-mongos-auditLog-format}{sharding.mongos.auditLog.format}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{BSON}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/audit-logging.html}{auditLog.format option}
for the MongoDB mongos daemon
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:sharding-mongos-auditlog-filter}}
\sphinxhref{operator.html\#sharding-mongos-auditLog-filter}{sharding.mongos.auditLog.filter}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{\{\}}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/audit-logging.html}{auditLog.filter option}
for the MongoDB mongos daemon
\\
\hline
\end{longtable}\sphinxatlongtableend\end{savenotes}


\section{Mongod Section}
\label{\detokenize{operator:operator-mongod-section}}\label{\detokenize{operator:id125}}
This section contains the Mongod configuration options.


\begin{savenotes}\sphinxatlongtablestart\begin{longtable}[c]{|p{2cm}|p{13.6cm}|}
\hline

\endfirsthead

\multicolumn{2}{c}%
{\makebox[0pt]{\sphinxtablecontinued{\tablename\ \thetable{} \textendash{} continued from previous page}}}\\
\hline

\endhead

\hline
\multicolumn{2}{r}{\makebox[0pt][r]{\sphinxtablecontinued{continues on next page}}}\\
\endfoot

\endlastfoot

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-net-port}}
\sphinxhref{operator.html\#mongod-net-port}{mongod.net.port}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{27017}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the MongoDB \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#net.port}{net.port option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-net-hostport}}
\sphinxhref{operator.html\#mongod-net-hostport}{mongod.net.hostport}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the Kubernetes \sphinxhref{https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/\#support-hostport}{hostPort option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-security-redactclientlogdata}}
\sphinxhref{operator.html\#mongod-security-redactclientlogdata}{mongod.security.redactClientLogData}
\\
\hline
\sphinxstylestrong{Value Type}
&
bool
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables/disables \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/log-redaction.html}{PSMDB Log Redaction}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-security-enableencryption}}
\sphinxhref{operator.html\#mongod-security-enableencryption}{mongod.security.enableEncryption}
\\
\hline
\sphinxstylestrong{Value Type}
&
bool
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables/disables \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/data\_at\_rest\_encryption.html}{PSMDB data at rest encryption}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-security-encryptionkeysecret}}
\sphinxhref{operator.html\#mongod-security-encryptionkeysecret}{mongod.security.encryptionKeySecret}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}mongodb\sphinxhyphen{}encryption\sphinxhyphen{}key}}
\\
\hline
\sphinxstylestrong{Description}
&
Specifies a secret object with the \sphinxhref{https://docs.mongodb.com/manual/tutorial/configure-encryption/\#local-key-management}{encryption key}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-security-encryptionciphermode}}
\sphinxhref{operator.html\#mongod-security-encryptionciphermode}{mongod.security.encryptionCipherMode}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{AES256\sphinxhyphen{}CBC}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets
\sphinxhref{https://docs.mongodb.com/manual/reference/program/mongod/\#cmdoption-mongod-encryptionciphermode}{PSMDB encryption cipher mode}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-setparameter-ttlmonitorsleepsecs}}
\sphinxhref{operator.html\#mongod-setparameter-ttlmonitorsleepsecs}{mongod.setParameter.ttlMonitorSleepSecs}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{60}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the PSMDB \sphinxtitleref{ttlMonitorSleepSecs} option
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-setparameter-wiredtigerconcurrentreadtransactions}}
\sphinxhref{operator.html\#mongod-setparameter-wiredtigerconcurrentreadtransactions}{mongod.setParameter.wiredTigerConcurrentReadTransactions}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{128}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/parameters/\#param.wiredTigerConcurrentReadTransactions}{wiredTigerConcurrentReadTransactions option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-setparameter-wiredtigerconcurrentwritetransactions}}
\sphinxhref{operator.html\#mongod-setparameter-wiredtigerconcurrentwritetransactions}{mongod.setParameter.wiredTigerConcurrentWriteTransactions}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{128}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/parameters/\#param.wiredTigerConcurrentWriteTransactions}{wiredTigerConcurrentWriteTransactions option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-engine}}
\sphinxhref{operator.html\#mongod-storage-engine}{mongod.storage.engine}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{wiredTiger}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.engine}{storage.engine option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-inmemory-engineconfig-inmemorysizeratio}}
\sphinxhref{operator.html\#mongod-storage-inmemory-engineconfig-inmemorysizeratio}{mongod.storage.inMemory.engineConfig.inMemorySizeRatio}
\\
\hline
\sphinxstylestrong{Value Type}
&
float
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.9}}
\\
\hline
\sphinxstylestrong{Description}
&
The ratio used to compute the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/inmemory.html\#--inMemorySizeGB}{storage.engine.inMemory.inMemorySizeGb option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-mmapv1-nssize}}
\sphinxhref{operator.html\#mongod-storage-mmapv1-nssize}{mongod.storage.mmapv1.nsSize}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{16}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.mmapv1.nsSize}{storage.mmapv1.nsSize option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-mmapv1-smallfiles}}
\sphinxhref{operator.html\#mongod-storage-mmapv1-smallfiles}{mongod.storage.mmapv1.smallfiles}
\\
\hline
\sphinxstylestrong{Value Type}
&
bool
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.mmapv1.smallFiles}{storage.mmapv1.smallfiles option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-wiredtiger-engineconfig-cachesizeratio}}
\sphinxhref{operator.html\#mongod-storage-wiredtiger-engineconfig-cachesizeratio}{mongod.storage.wiredTiger.engineConfig.cacheSizeRatio}
\\
\hline
\sphinxstylestrong{Value Type}
&
float
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.5}}
\\
\hline
\sphinxstylestrong{Description}
&
The ratio used to compute the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.wiredTiger.engineConfig.cacheSizeGB}{storage.wiredTiger.engineConfig.cacheSizeGB option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-wiredtiger-engineconfig-directoryforindexes}}
\sphinxhref{operator.html\#mongod-storage-wiredtiger-engineconfig-directoryforindexes}{mongod.storage.wiredTiger.engineConfig.directoryForIndexes}
\\
\hline
\sphinxstylestrong{Value Type}
&
bool
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{false}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.wiredTiger.engineConfig.directoryForIndexes}{storage.wiredTiger.engineConfig.directoryForIndexes option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-wiredtiger-engineconfig-journalcompressor}}
\sphinxhref{operator.html\#mongod-storage-wiredtiger-engineconfig-journalcompressor}{mongod.storage.wiredTiger.engineConfig.journalCompressor}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{snappy}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.wiredTiger.engineConfig.journalCompressor}{storage.wiredTiger.engineConfig.journalCompressor option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-wiredtiger-collectionconfig-blockcompressor}}
\sphinxhref{operator.html\#mongod-storage-wiredtiger-collectionconfig-blockcompressor}{mongod.storage.wiredTiger.collectionConfig.blockCompressor}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{snappy}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.wiredTiger.collectionConfig.blockCompressor}{storage.wiredTiger.collectionConfig.blockCompressor option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-storage-wiredtiger-indexconfig-prefixcompression}}
\sphinxhref{operator.html\#mongod-storage-wiredtiger-indexconfig-prefixcompression}{mongod.storage.wiredTiger.indexConfig.prefixCompression}
\\
\hline
\sphinxstylestrong{Value Type}
&
bool
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#storage.wiredTiger.indexConfig.prefixCompression}{storage.wiredTiger.indexConfig.prefixCompression option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-operationprofiling-mode}}
\sphinxhref{operator.html\#mongod-operationprofiling-mode}{mongod.operationProfiling.mode}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{slowOp}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#operationProfiling.mode}{operationProfiling.mode option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-operationprofiling-slowopthresholdms}}
\sphinxhref{operator.html\#mongod-operationprofiling-slowopthresholdms}{mongod.operationProfiling.slowOpThresholdMs}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{100}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://docs.mongodb.com/manual/reference/configuration-options/\#operationProfiling.slowOpThresholdMs}{operationProfiling.slowOpThresholdMs} option
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-operationprofiling-ratelimit}}
\sphinxhref{operator.html\#mongod-operationprofiling-ratelimit}{mongod.operationProfiling.rateLimit}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{1}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/rate-limit.html}{operationProfiling.rateLimit option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-auditlog-destination}}
\sphinxhref{operator.html\#mongod.auditLog.destination}{mongod.auditLog.destination}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/audit-logging.html}{auditLog.destination option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-auditlog-format}}
\sphinxhref{operator.html\#mongod-auditLog-format}{mongod.auditLog.format}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{BSON}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/audit-logging.html}{auditLog.format option}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:mongod-auditlog-filter}}
\sphinxhref{operator.html\#mongod-auditLog-filter}{mongod.auditLog.filter}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{\{\}}}
\\
\hline
\sphinxstylestrong{Description}
&
Sets the \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/audit-logging.html}{auditLog.filter option}
\\
\hline
\end{longtable}\sphinxatlongtableend\end{savenotes}


\section{Backup Section}
\label{\detokenize{operator:operator-backup-section}}\label{\detokenize{operator:id153}}
The \sphinxcode{\sphinxupquote{backup}} section in the
\sphinxhref{https://github.com/percona/percona-server-mongodb-operator/blob/master/deploy/cr.yaml}{deploy/cr.yaml}
file contains the following configuration options for the regular
Percona Server for MongoDB backups.


\begin{savenotes}\sphinxatlongtablestart\begin{longtable}[c]{|p{2cm}|p{13.6cm}|}
\hline

\endfirsthead

\multicolumn{2}{c}%
{\makebox[0pt]{\sphinxtablecontinued{\tablename\ \thetable{} \textendash{} continued from previous page}}}\\
\hline

\endhead

\hline
\multicolumn{2}{r}{\makebox[0pt][r]{\sphinxtablecontinued{continues on next page}}}\\
\endfoot

\endlastfoot

\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-enabled}}
\sphinxhref{operator.html\#backup-enabled}{backup.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables or disables making backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-debug}}
\sphinxhref{operator.html\#backup-debug}{backup.debug}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables or disables debug mode for backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-restartonfailure}}
\sphinxhref{operator.html\#backup-restartonfailure}{backup.restartOnFailure}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables or disables restarting the previously failed backup process
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-image}}
\sphinxhref{operator.html\#backup-image}{backup.image}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator:1.6.0\sphinxhyphen{}backup}}
\\
\hline
\sphinxstylestrong{Description}
&
The Percona Server for MongoDB Docker image to use for the backup
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-serviceaccountname}}
\sphinxhref{operator.html\#backup-serviceaccountname?}{backup.serviceAccountName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator}}
\\
\hline
\sphinxstylestrong{Description}
&
Nname of the separate privileged service account used by the Operator
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-resources-limits-cpu}}
\sphinxhref{operator.html\#backup-resources-limits-cpu}{backup.resources.limits.cpu}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{100m}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes CPU limit} for backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-resources-limits-memory}}
\sphinxhref{operator.html\#backup-resources-limits-memory}{backup.resources.limits.memory}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.2G}}
\\
\hline
\sphinxstylestrong{Description}
&
\sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes Memory limit} for backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-resources-requests-cpu}}
\sphinxhref{operator.html\#backup-resources-requests-cpu}{backup.resources.requests.cpu}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{100m}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes CPU requests} for backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-resources-requests-memory}}
\sphinxhref{operator.html\#backup-resources-requests-memory}{backup.resources.requests.memory}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0.1G}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/\#resource-requests-and-limits-of-pod-and-container}{Kubernetes Memory requests} for backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-storages-type}}
\sphinxhref{operator.html\#backup-storages-type}{backup.storages.\textless{}storage\sphinxhyphen{}name\textgreater{}.type}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{s3}}
\\
\hline
\sphinxstylestrong{Description}
&
The cloud storage type used for backups. Only \sphinxcode{\sphinxupquote{s3}} type is currently
supported
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-storages-s3-credentialssecret}}
\sphinxhref{operator.html\#backup-storages-s3-credentialssecret}{backup.storages.\textless{}storage\sphinxhyphen{}name\textgreater{}.s3.credentialsSecret}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{my\sphinxhyphen{}cluster\sphinxhyphen{}name\sphinxhyphen{}backup\sphinxhyphen{}s3}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://kubernetes.io/docs/concepts/configuration/secret/}{Kubernetes secret} for
backups. It should contain \sphinxcode{\sphinxupquote{AWS\_ACCESS\_KEY\_ID}} and \sphinxcode{\sphinxupquote{AWS\_SECRET\_ACCESS\_KEY}} keys.
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-storages-s3-bucket}}
\sphinxhref{operator.html\#backup-storages-s3-bucket?}{backup.storages.\textless{}storage\sphinxhyphen{}name\textgreater{}.s3.bucket}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html}{Amazon S3 bucket}
name for backups
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-storages-s3-region}}
\sphinxhref{operator.html\#backup-storages-s3-region}{backup.storages.s3.\textless{}storage\sphinxhyphen{}name\textgreater{}.region}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{us\sphinxhyphen{}east\sphinxhyphen{}1}}
\\
\hline
\sphinxstylestrong{Description}
&
The \sphinxhref{https://docs.aws.amazon.com/general/latest/gr/rande.html}{AWS region} to use.
Please note \sphinxstylestrong{this option is mandatory} for Amazon and all S3\sphinxhyphen{}compatible storages
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-storages-s3-endpointurl}}
\sphinxhref{operator.html\#backup-storages-s3-endpointurl}{backup.storages.s3.\textless{}storage\sphinxhyphen{}name\textgreater{}.endpointUrl}
\\
\hline
\sphinxstylestrong{Value}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
The endpoint URL of the S3\sphinxhyphen{}compatible storage to be used (not needed for the original
Amazon S3 cloud)
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-tasks-name}}
\sphinxhref{operator.html\#backup-tasks-name}{backup.tasks.name}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&\\
\hline
\sphinxstylestrong{Description}
&
The name of the backup
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-tasks-enabled}}
\sphinxhref{operator.html\#backup-tasks-enabled}{backup.tasks.enabled}
\\
\hline
\sphinxstylestrong{Value Type}
&
boolean
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{true}}
\\
\hline
\sphinxstylestrong{Description}
&
Enables or disables this exact backup
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-tasks-schedule}}
\sphinxhref{operator.html\#backup-tasks-schedule}{backup.tasks.schedule}
\\
\hline
\sphinxstylestrong{Value Type}
&
int
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{0 0 * * 6}}
\\
\hline
\sphinxstylestrong{Description}
&
The scheduled time to make a backup, specified in the
\sphinxhref{https://en.wikipedia.org/wiki/Cron}{crontab format}
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-tasks-storagename}}
\sphinxhref{operator.html\#backup-tasks-storagename}{backup.tasks.storageName}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{st\sphinxhyphen{}us\sphinxhyphen{}west}}
\\
\hline
\sphinxstylestrong{Description}
&
The name of the S3\sphinxhyphen{}compatible storage for backups, configured in the \sphinxtitleref{storages} subsection
\\
\hline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{2}}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\hline
\sphinxstylestrong{Key}
&\phantomsection\label{\detokenize{operator:backup-tasks-compressiontype}}
\sphinxhref{operator.html\#backup-tasks-compressiontype}{backup.tasks.compressionType}
\\
\hline
\sphinxstylestrong{Value Type}
&
string
\\
\hline
\sphinxstylestrong{Example}
&
\sphinxcode{\sphinxupquote{gzip}}
\\
\hline
\sphinxstylestrong{Description}
&
The backup compression format
\\
\hline
\end{longtable}\sphinxatlongtableend\end{savenotes}


\chapter{Percona certified images}
\label{\detokenize{images:percona-certified-images}}\label{\detokenize{images:custom-registry-images}}\label{\detokenize{images::doc}}
Following table presents Percona’s certified docker images to be used with the
Percona Operator for Percona Server for MongoDB:
\begin{quote}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabular}[t]{|\X{15}{65}|\X{50}{65}|}
\hline
\sphinxstyletheadfamily 
Image
&\sphinxstyletheadfamily 
Digest
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator:1.6.0
&
73e172df78f3cc71bd1c4bf1c4bc33bb1dd2ae5c4355808097958a71096498e1
\\
\hline
percona/pmm\sphinxhyphen{}client:2.12.0
&
e29616e36dcd5a6fd7de67b444e5a80680d56f52f1398c0f49ee92427be797e6
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb\sphinxhyphen{}operator:1.6.0\sphinxhyphen{}backup
&
73a09d851bd84057b5cdf41eb35eb3b249a1b4d839487300f2132f0e79a50944
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.4.2\sphinxhyphen{}4
&
991d6049059e5eb1a74981290d829a5fb4ab0554993748fde1e67b2f46f26bf0
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.2.11\sphinxhyphen{}12
&
1909cb7a6ecea9bf0535b54aa86b9ae74ba2fa303c55cf4a1a54262fb0edbd3c
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.2.8\sphinxhyphen{}8
&
a66e889d3e986413e41083a9c887f33173da05a41c8bd107cf50eede4588a505
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.2.7\sphinxhyphen{}7
&
1d8a0859b48a3e9cadf9ad7308ec5aa4b278a64ca32ff5d887156b1b46146b13
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.0.21\sphinxhyphen{}15
&
663f6eb98ae625792d59c6072b5d3a3095112380de67097a411f597d785c423a
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.0.20\sphinxhyphen{}13
&
badef1eb2807b0b27a2298f697388f1dffa5398d5caa306a65fc41b98f7a72e3
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.0.19\sphinxhyphen{}12
&
24a8214d84c3a9a4147c12c4c159d4a1aa3dae831859f77b3db1a563a268e2bf
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:4.0.18
&
bf9e69712868f7e93daef22c14c083bbb2a74d3028d78d8597b2aeacda340c69
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:3.6.21\sphinxhyphen{}10.0
&
3868831e0b7e9a210d3fda5d794aea5438c3a92159a0a35688b090f8ee3ce1be
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:3.6.19\sphinxhyphen{}7.0
&
fbc2a312446b393a0221797c93acb8fc4df84a1f725eb78e04f5111c63dbec62
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:3.6.18\sphinxhyphen{}6.0
&
d559d75611d7bc0254a6d049dd95eacbb9b32cd7c4f7eee854d02e81e26d03f7
\\
\hline
percona/percona\sphinxhyphen{}server\sphinxhyphen{}mongodb:3.6.18\sphinxhyphen{}5.0
&
0dc8bf7f135c5c7fdf15e1b9a02b0a6f08bc3de4c96f79b4f532ff682d2aff4b
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}
\end{quote}


\chapter{PSMDB API Documentation}
\label{\detokenize{api:psmdb-api-documentation}}\label{\detokenize{api::doc}}


Percona Operator Operator for Percona Server for MongoDB provides an \sphinxhref{https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/}{aggregation\sphinxhyphen{}layer extension for the Kubernetes API}. Please refer to the
\sphinxhref{https://kubernetes.io/docs/reference/}{official Kubernetes API documentation} on the API access and usage details.
The following subsections describe the Percona XtraDB Cluster API provided by the Operator.

\begin{sphinxShadowBox}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{api:id1}}{\hyperref[\detokenize{api:prerequisites}]{\sphinxcrossref{Prerequisites}}}

\item {} 
\phantomsection\label{\detokenize{api:id2}}{\hyperref[\detokenize{api:create-new-psmdb-cluster}]{\sphinxcrossref{Create new PSMDB cluster}}}

\item {} 
\phantomsection\label{\detokenize{api:id3}}{\hyperref[\detokenize{api:list-psmdb-cluster}]{\sphinxcrossref{List PSMDB cluster}}}

\item {} 
\phantomsection\label{\detokenize{api:id4}}{\hyperref[\detokenize{api:get-status-of-psmdb-cluster}]{\sphinxcrossref{Get status of PSMDB cluster}}}

\item {} 
\phantomsection\label{\detokenize{api:id5}}{\hyperref[\detokenize{api:scale-up-down-psmdb-cluster}]{\sphinxcrossref{Scale up/down PSMDB cluster}}}

\item {} 
\phantomsection\label{\detokenize{api:id6}}{\hyperref[\detokenize{api:update-psmdb-cluster-image}]{\sphinxcrossref{Update PSMDB cluster image}}}

\item {} 
\phantomsection\label{\detokenize{api:id7}}{\hyperref[\detokenize{api:backup-psmdb-cluster}]{\sphinxcrossref{Backup PSMDB cluster}}}

\item {} 
\phantomsection\label{\detokenize{api:id8}}{\hyperref[\detokenize{api:restore-psmdb-cluster}]{\sphinxcrossref{Restore PSMDB cluster}}}

\end{itemize}
\end{sphinxShadowBox}


\section{Prerequisites}
\label{\detokenize{api:prerequisites}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Create the namespace name you will use, if not exist:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{kubectl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{namespace}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{my\PYGZhy{}namespace\PYGZhy{}name}
\end{sphinxVerbatim}

Trying to create an already\sphinxhyphen{}existing namespace will show you a
self\sphinxhyphen{}explanatory error message. Also, you can use the \sphinxcode{\sphinxupquote{defalut}} namespace.

\begin{sphinxadmonition}{note}{Note:}
In this document \sphinxcode{\sphinxupquote{default}} namespace is used in all examples.
Substitute \sphinxcode{\sphinxupquote{default}} with your namespace name if you use a different
one.
\end{sphinxadmonition}

\item {} 
Prepare:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} set correct API address}
\PYG{l+lScalar+lScalarPlain}{KUBE\PYGZus{}CLUSTER=\PYGZdl{}(kubectl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{config}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{view}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}\PYGZhy{}minify}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}o}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{jsonpath=\PYGZsq{}\PYGZob{}.clusters[0].name\PYGZcb{}\PYGZsq{})}
\PYG{l+lScalar+lScalarPlain}{API\PYGZus{}SERVER=\PYGZdl{}(kubectl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{config}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{view}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}o}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{jsonpath=\PYGZdq{}\PYGZob{}.clusters[?(@.name==\PYGZbs{}\PYGZdq{}\PYGZdl{}KUBE\PYGZus{}CLUSTER\PYGZbs{}\PYGZdq{})].cluster.server\PYGZcb{}\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{|}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{sed}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}e}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}s\PYGZsh{}https://\PYGZsh{}\PYGZsh{}\PYGZsq{})}

\PYG{l+lScalar+lScalarPlain}{\PYGZsh{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{service}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{account}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{get}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{token}
\PYG{l+lScalar+lScalarPlain}{kubectl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{apply}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}f}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{deploy/crd.yaml}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}f}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{deploy/rbac.yaml}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}n}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default}
\PYG{l+lScalar+lScalarPlain}{KUBE\PYGZus{}TOKEN=\PYGZdl{}(kubectl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{get}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{secret}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdl{}(kubectl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{get}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{serviceaccount}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}o}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{jsonpath=\PYGZsq{}\PYGZob{}.secrets[0].name\PYGZcb{}\PYGZsq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}n}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}o}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{jsonpath=\PYGZsq{}\PYGZob{}.data.token\PYGZcb{}\PYGZsq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}n}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{|}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{base64}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}\PYGZhy{}decode}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}
\end{sphinxVerbatim}

\end{enumerate}


\section{Create new PSMDB cluster}
\label{\detokenize{api:create-new-psmdb-cluster}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
The \PYG{n+nb}{command} to create a new PSMDB cluster creating all of its resources and it depends on the PSMDB Operator
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/deploy/cr.yaml
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1\PYGZhy{}6\PYGZhy{}0/namespaces/default/perconaservermongodbs
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XPOST \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1\PYGZhy{}6\PYGZhy{}0/namespaces/default/perconaservermongodbs}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}d \PYG{l+s+s2}{\PYGZdq{}@cluster.json\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body (cluster.json):}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDB\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}imagePullPolicy\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}Always\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}updateStrategy\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}SmartUpdate\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}secrets\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}users\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}pmm\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serverHost\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}monitoring\PYGZhy{}service\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}rs0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}affinity\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}antiAffinityTopologyKey\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}none\PYGZdq{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}podDisruptionBudget\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}maxUnavailable\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{1}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}expose\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}exposeType\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}LoadBalancer\PYGZdq{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}arbiter\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{1}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}affinity\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}antiAffinityTopologyKey\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}none\PYGZdq{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}resources\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}limits\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{null}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}volumeSpec\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}persistentVolumeClaim\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}storageClassName\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}standard\PYGZdq{}}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}accessModes\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
                     \PYG{l+s+s2}{\PYGZdq{}ReadWriteOnce\PYGZdq{}}
                  \PYG{p}{],}
                  \PYG{n+nt}{\PYGZdq{}resources\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}requests\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}3Gi\PYGZdq{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}mongod\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}net\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}port\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{27017}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}hostPort\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{0}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}security\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}redactClientLogData\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}enableEncryption\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{true}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionKeySecret\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionCipherMode\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}AES256\PYGZhy{}CBC\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}setParameter\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{60}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{128}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{128}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}engine\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}inMemory\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}inMemorySizeRatio\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mf}{0.9}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}mmapv1\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}nsSize\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{16}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}smallfiles\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}cacheSizeRatio\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mf}{0.5}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}directoryForIndexes\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{false}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}journalCompressor\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}collectionConfig\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}blockCompressor\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}indexConfig\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}prefixCompression\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{true}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}operationProfiling\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}mode\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}slowOp\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}slowOpThresholdMs\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}rateLimit\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{100}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}backup\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}restartOnFailure\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serviceAccountName\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}storages\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{null}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}tasks\PYGZdq{}}\PYG{p}{:} \PYG{k+kc}{null}
      \PYG{p}{\PYGZcb{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Inputs:}
\begin{quote}

\sphinxstylestrong{Metadata}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Name (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{contains name of cluster}}

\end{enumerate}

\sphinxstylestrong{Spec}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
secrets{[}users{]} (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{contains name of secret for the users}}

\item {} 
allowUnsafeConfigurations (Boolean, Default: false) : \sphinxcode{\sphinxupquote{allow unsafe configurations to run}}

\item {} 
image (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{name of the psmdb cluster image}}

\end{enumerate}

replsets:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
name (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{name of monogo replicaset}}

\item {} 
size (Integer, min\sphinxhyphen{}value: 1) : \sphinxcode{\sphinxupquote{contains size of MongoDB replicaset}}

\item {} 
expose{[}exposeType{]} (Integer, min\sphinxhyphen{}value: 1) : \sphinxcode{\sphinxupquote{type of service to expose replicaset}}

\item {} 
arbiter (Object) : \sphinxcode{\sphinxupquote{configuration for mongo arbiter}}

\end{enumerate}

mongod:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
net:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
port (Integer, min\sphinxhyphen{}value: 0) : \sphinxcode{\sphinxupquote{contains mongod container port}}

\item {} 
hostPort (Integer, min\sphinxhyphen{}value: 0) : \sphinxcode{\sphinxupquote{host port to expose mongod on}}

\end{enumerate}

\item {} 
security:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
enableEncryption (Boolean, Default: true) : \sphinxcode{\sphinxupquote{enable encrypting mongod storage}}

\item {} 
encryptionKeySecret (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{name of encryption key secret}}

\item {} 
encryptionCipherMode (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{type of encryption cipher to use}}

\end{enumerate}

\item {} 
setParameter (Object): \sphinxcode{\sphinxupquote{configure mongod enginer paramters}}

\item {} 
storage:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
engine (String, min\sphinxhyphen{}length: 1, default “wiredTiger”): \sphinxcode{\sphinxupquote{name of mongod storage engine}}

\item {} 
inMemory (Object) : \sphinxcode{\sphinxupquote{wiredTiger engine configuration}}

\item {} 
wiredTiger (Object) : \sphinxcode{\sphinxupquote{wiredTiger engine configuration}}

\end{enumerate}

\end{enumerate}

pmm:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
serverHost (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{serivce name for monitoring}}

\item {} 
image (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{name of pmm image}}

\end{enumerate}

backup:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
image (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{name of MngoDB backup docker image}}

\item {} 
serviceAccountName (String, min\sphinxhyphen{}length: 1) \sphinxcode{\sphinxupquote{name of service account to use for backup}}

\item {} 
storages (Object) : \sphinxcode{\sphinxupquote{storage configuration object for backup}}

\end{enumerate}
\end{quote}

\sphinxstylestrong{Response:}

JSON

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDB\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDB\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}allowUnsafeConfigurations\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}backup\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}restartOnFailure\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}serviceAccountName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}storages\PYGZbs{}\PYGZdq{}:null,\PYGZbs{}\PYGZdq{}tasks\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}imagePullPolicy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}Always\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}mongod\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}net\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}hostPort\PYGZbs{}\PYGZdq{}:0,\PYGZbs{}\PYGZdq{}port\PYGZbs{}\PYGZdq{}:27017\PYGZcb{},\PYGZbs{}\PYGZdq{}operationProfiling\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}mode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}slowOp\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}rateLimit\PYGZbs{}\PYGZdq{}:100,\PYGZbs{}\PYGZdq{}slowOpThresholdMs\PYGZbs{}\PYGZdq{}:100\PYGZcb{},\PYGZbs{}\PYGZdq{}security\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enableEncryption\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}encryptionCipherMode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}AES256\PYGZhy{}CBC\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}encryptionKeySecret\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}redactClientLogData\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}setParameter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}ttlMonitorSleepSecs\PYGZbs{}\PYGZdq{}:60,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZbs{}\PYGZdq{}:128,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZbs{}\PYGZdq{}:128\PYGZcb{},\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engine\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}inMemory\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}inMemorySizeRatio\PYGZbs{}\PYGZdq{}:0.9\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}mmapv1\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}nsSize\PYGZbs{}\PYGZdq{}:16,\PYGZbs{}\PYGZdq{}smallfiles\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}collectionConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}blockCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}cacheSizeRatio\PYGZbs{}\PYGZdq{}:0.5,\PYGZbs{}\PYGZdq{}directoryForIndexes\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}journalCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}indexConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}prefixCompression\PYGZbs{}\PYGZdq{}:true\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}pmm\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}serverHost\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}monitoring\PYGZhy{}service\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}replsets\PYGZbs{}\PYGZdq{}:[\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}arbiter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}expose\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}exposeType\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}LoadBalancer\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}rs0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}podDisruptionBudget\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}maxUnavailable\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}limits\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:3,\PYGZbs{}\PYGZdq{}volumeSpec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}persistentVolumeClaim\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}accessModes\PYGZbs{}\PYGZdq{}:[\PYGZbs{}\PYGZdq{}ReadWriteOnce\PYGZbs{}\PYGZdq{}],\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}requests\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}3Gi\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}storageClassName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}standard\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}],\PYGZbs{}\PYGZdq{}secrets\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}users\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}updateStrategy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}SmartUpdate\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:enabled\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:restartOnFailure\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serviceAccountName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:storages\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:tasks\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:imagePullPolicy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:hostPort\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:port\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:rateLimit\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:slowOpThresholdMs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:enableEncryption\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionCipherMode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionKeySecret\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:redactClientLogData\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:engine\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:inMemorySizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:nsSize\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:smallfiles\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:blockCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:cacheSizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:directoryForIndexes\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:journalCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:prefixCompression\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:enabled\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serverHost\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:users\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:updateStrategy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1268922\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5207e71a\PYGZhy{}c83f\PYGZhy{}4707\PYGZhy{}b892\PYGZhy{}63aa93fb615c\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}restartOnFailure\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serviceAccountName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}storages\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}tasks\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}imagePullPolicy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Always\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}hostPort\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}port\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{27017}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}mode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}slowOp\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}rateLimit\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}slowOpThresholdMs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}enableEncryption\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionCipherMode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}AES256\PYGZhy{}CBC\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionKeySecret\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}redactClientLogData\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{60}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}engine\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}inMemorySizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.9}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}nsSize\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{16}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}smallfiles\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}blockCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}cacheSizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.5}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}directoryForIndexes\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}journalCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}prefixCompression\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serverHost\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}monitoring\PYGZhy{}service\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}affinity\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}antiAffinityTopologyKey\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}none\PYGZdq{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}arbiter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}affinity\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}antiAffinityTopologyKey\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}none\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}expose\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}exposeType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}LoadBalancer\PYGZdq{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}rs0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}podDisruptionBudget\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}maxUnavailable\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}resources\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}limits\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}volumeSpec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}persistentVolumeClaim\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}accessModes\PYGZdq{}}\PYG{p}{:[}
                     \PYG{l+s+s2}{\PYGZdq{}ReadWriteOnce\PYGZdq{}}
                  \PYG{p}{],}
                  \PYG{n+nt}{\PYGZdq{}resources\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}requests\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}3Gi\PYGZdq{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}storageClassName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}standard\PYGZdq{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}users\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}updateStrategy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}SmartUpdate\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{List PSMDB cluster}
\label{\detokenize{api:list-psmdb-cluster}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Lists all PSMDB clusters that exist in your kubernetes cluster
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl get psmdb
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs?limit\PYG{o}{=}\PYG{l+m}{500}
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XGET \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs?limit=500}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json;as=Table;v=v1;g=meta.k8s.io,application/json;as=Table;v=v1beta1;g=meta.k8s.io,application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
None
\end{sphinxVerbatim}

\sphinxstylestrong{Response:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Table\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}meta.k8s.io/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1273793\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}columnDefinitions\PYGZdq{}}\PYG{p}{:[}
      \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Name\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}string\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}format\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Name must be unique within a namespace. Is required when creating resources, although some resources may allow a client to request the generation of an appropriate name automatically. Name is primarily intended for creation idempotence and configuration definition. Cannot be updated. More info: http://kubernetes.io/docs/user\PYGZhy{}guide/identifiers\PYGZsh{}names\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}priority\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}
      \PYG{p}{\PYGZcb{},}
      \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Status\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}string\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}format\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Custom resource definition column (in JSONPath format): .status.state\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}priority\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}
      \PYG{p}{\PYGZcb{},}
      \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Age\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}date\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}format\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}description\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Custom resource definition column (in JSONPath format): .metadata.creationTimestamp\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}priority\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}
      \PYG{p}{\PYGZcb{}}
   \PYG{p}{],}
   \PYG{n+nt}{\PYGZdq{}rows\PYGZdq{}}\PYG{p}{:[}
      \PYG{p}{\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}cells\PYGZdq{}}\PYG{p}{:[}
            \PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}\PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}37m\PYGZdq{}}
         \PYG{p}{],}
         \PYG{n+nt}{\PYGZdq{}object\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PartialObjectMetadata\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}meta.k8s.io/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5207e71a\PYGZhy{}c83f\PYGZhy{}4707\PYGZhy{}b892\PYGZhy{}63aa93fb615c\PYGZdq{}}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1273788\PYGZdq{}}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDB\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}allowUnsafeConfigurations\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}backup\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}restartOnFailure\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}serviceAccountName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}storages\PYGZbs{}\PYGZdq{}:null,\PYGZbs{}\PYGZdq{}tasks\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}imagePullPolicy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}Always\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}mongod\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}net\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}hostPort\PYGZbs{}\PYGZdq{}:0,\PYGZbs{}\PYGZdq{}port\PYGZbs{}\PYGZdq{}:27017\PYGZcb{},\PYGZbs{}\PYGZdq{}operationProfiling\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}mode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}slowOp\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}rateLimit\PYGZbs{}\PYGZdq{}:100,\PYGZbs{}\PYGZdq{}slowOpThresholdMs\PYGZbs{}\PYGZdq{}:100\PYGZcb{},\PYGZbs{}\PYGZdq{}security\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enableEncryption\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}encryptionCipherMode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}AES256\PYGZhy{}CBC\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}encryptionKeySecret\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}redactClientLogData\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}setParameter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}ttlMonitorSleepSecs\PYGZbs{}\PYGZdq{}:60,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZbs{}\PYGZdq{}:128,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZbs{}\PYGZdq{}:128\PYGZcb{},\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engine\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}inMemory\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}inMemorySizeRatio\PYGZbs{}\PYGZdq{}:0.9\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}mmapv1\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}nsSize\PYGZbs{}\PYGZdq{}:16,\PYGZbs{}\PYGZdq{}smallfiles\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}collectionConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}blockCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}cacheSizeRatio\PYGZbs{}\PYGZdq{}:0.5,\PYGZbs{}\PYGZdq{}directoryForIndexes\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}journalCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}indexConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}prefixCompression\PYGZbs{}\PYGZdq{}:true\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}pmm\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}serverHost\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}monitoring\PYGZhy{}service\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}replsets\PYGZbs{}\PYGZdq{}:[\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}arbiter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}expose\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}exposeType\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}LoadBalancer\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}rs0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}podDisruptionBudget\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}maxUnavailable\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}limits\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:3,\PYGZbs{}\PYGZdq{}volumeSpec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}persistentVolumeClaim\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}accessModes\PYGZbs{}\PYGZdq{}:[\PYGZbs{}\PYGZdq{}ReadWriteOnce\PYGZbs{}\PYGZdq{}],\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}requests\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}3Gi\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}storageClassName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}standard\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}],\PYGZbs{}\PYGZdq{}secrets\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}users\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}updateStrategy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}SmartUpdate\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
                  \PYG{p}{\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:enabled\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:serviceAccountName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:imagePullPolicy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:port\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:mode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:rateLimit\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:slowOpThresholdMs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:enableEncryption\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:encryptionCipherMode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:encryptionKeySecret\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:engine\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                    \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                    \PYG{p}{\PYGZcb{},}
                                    \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                       \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{},}
                                       \PYG{n+nt}{\PYGZdq{}f:inMemorySizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{}}
                                    \PYG{p}{\PYGZcb{}}
                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                    \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                    \PYG{p}{\PYGZcb{},}
                                    \PYG{n+nt}{\PYGZdq{}f:nsSize\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                    \PYG{p}{\PYGZcb{}}
                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                    \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                    \PYG{p}{\PYGZcb{},}
                                    \PYG{n+nt}{\PYGZdq{}f:collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                       \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{},}
                                       \PYG{n+nt}{\PYGZdq{}f:blockCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{}}
                                    \PYG{p}{\PYGZcb{},}
                                    \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                       \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{},}
                                       \PYG{n+nt}{\PYGZdq{}f:cacheSizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{},}
                                       \PYG{n+nt}{\PYGZdq{}f:journalCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{}}
                                    \PYG{p}{\PYGZcb{},}
                                    \PYG{n+nt}{\PYGZdq{}f:indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                       \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{},}
                                       \PYG{n+nt}{\PYGZdq{}f:prefixCompression\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                       \PYG{p}{\PYGZcb{}}
                                    \PYG{p}{\PYGZcb{}}
                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:serverHost\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:users\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:updateStrategy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{p}{\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T15:04:55Z\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
                     \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}f:containerSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:runAsNonRoot\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:runAsUser\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:podSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:fsGroup\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:clusterServiceDNSSuffix\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:runUid\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}f:ssl\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:sslInternal\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:conditions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:observedGeneration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                                 \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:ready\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:size\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{},}
                                 \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                                 \PYG{p}{\PYGZcb{}}
                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:state\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{]}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{}}
   \PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Get status of PSMDB cluster}
\label{\detokenize{api:get-status-of-psmdb-cluster}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Gets all information about specified PSMDB cluster
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl get psmdb/my\PYGZhy{}cluster\PYGZhy{}name \PYGZhy{}o json
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XGET \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
None
\end{sphinxVerbatim}

\sphinxstylestrong{Response:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDB\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDB\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}allowUnsafeConfigurations\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}backup\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}restartOnFailure\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}serviceAccountName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}storages\PYGZbs{}\PYGZdq{}:null,\PYGZbs{}\PYGZdq{}tasks\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}imagePullPolicy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}Always\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}mongod\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}net\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}hostPort\PYGZbs{}\PYGZdq{}:0,\PYGZbs{}\PYGZdq{}port\PYGZbs{}\PYGZdq{}:27017\PYGZcb{},\PYGZbs{}\PYGZdq{}operationProfiling\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}mode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}slowOp\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}rateLimit\PYGZbs{}\PYGZdq{}:100,\PYGZbs{}\PYGZdq{}slowOpThresholdMs\PYGZbs{}\PYGZdq{}:100\PYGZcb{},\PYGZbs{}\PYGZdq{}security\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enableEncryption\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}encryptionCipherMode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}AES256\PYGZhy{}CBC\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}encryptionKeySecret\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}redactClientLogData\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}setParameter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}ttlMonitorSleepSecs\PYGZbs{}\PYGZdq{}:60,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZbs{}\PYGZdq{}:128,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZbs{}\PYGZdq{}:128\PYGZcb{},\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engine\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}inMemory\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}inMemorySizeRatio\PYGZbs{}\PYGZdq{}:0.9\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}mmapv1\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}nsSize\PYGZbs{}\PYGZdq{}:16,\PYGZbs{}\PYGZdq{}smallfiles\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}collectionConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}blockCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}cacheSizeRatio\PYGZbs{}\PYGZdq{}:0.5,\PYGZbs{}\PYGZdq{}directoryForIndexes\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}journalCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}indexConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}prefixCompression\PYGZbs{}\PYGZdq{}:true\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}pmm\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}serverHost\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}monitoring\PYGZhy{}service\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}replsets\PYGZbs{}\PYGZdq{}:[\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}arbiter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}expose\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}exposeType\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}LoadBalancer\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}rs0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}podDisruptionBudget\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}maxUnavailable\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}limits\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:3,\PYGZbs{}\PYGZdq{}volumeSpec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}persistentVolumeClaim\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}accessModes\PYGZbs{}\PYGZdq{}:[\PYGZbs{}\PYGZdq{}ReadWriteOnce\PYGZbs{}\PYGZdq{}],\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}requests\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}3Gi\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}storageClassName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}standard\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}],\PYGZbs{}\PYGZdq{}secrets\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}users\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}updateStrategy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}SmartUpdate\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:enabled\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serviceAccountName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:imagePullPolicy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:port\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:rateLimit\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:slowOpThresholdMs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:enableEncryption\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionCipherMode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionKeySecret\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:engine\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:inMemorySizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:nsSize\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:blockCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:cacheSizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:journalCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:prefixCompression\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serverHost\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:users\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:updateStrategy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}f:containerSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:runAsNonRoot\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:runAsUser\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:podSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:fsGroup\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:clusterServiceDNSSuffix\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:runUid\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}f:ssl\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:sslInternal\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:conditions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:observedGeneration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ready\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:size\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:state\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T15:09:40Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1274523\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5207e71a\PYGZhy{}c83f\PYGZhy{}4707\PYGZhy{}b892\PYGZhy{}63aa93fb615c\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}restartOnFailure\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serviceAccountName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}storages\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}tasks\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}imagePullPolicy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Always\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}hostPort\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}port\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{27017}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}mode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}slowOp\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}rateLimit\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}slowOpThresholdMs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}enableEncryption\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionCipherMode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}AES256\PYGZhy{}CBC\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionKeySecret\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}redactClientLogData\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{60}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}engine\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}inMemorySizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.9}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}nsSize\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{16}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}smallfiles\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}blockCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}cacheSizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.5}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}directoryForIndexes\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}journalCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}prefixCompression\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serverHost\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}monitoring\PYGZhy{}service\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}affinity\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}antiAffinityTopologyKey\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}none\PYGZdq{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}arbiter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}affinity\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}antiAffinityTopologyKey\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}none\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}expose\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}exposeType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}LoadBalancer\PYGZdq{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}rs0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}podDisruptionBudget\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}maxUnavailable\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}resources\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}limits\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}volumeSpec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}persistentVolumeClaim\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}accessModes\PYGZdq{}}\PYG{p}{:[}
                     \PYG{l+s+s2}{\PYGZdq{}ReadWriteOnce\PYGZdq{}}
                  \PYG{p}{],}
                  \PYG{n+nt}{\PYGZdq{}resources\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}requests\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}3Gi\PYGZdq{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}storageClassName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}standard\PYGZdq{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}users\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}updateStrategy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}SmartUpdate\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}conditions\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:03Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:39Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:41Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:41Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:29:10Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterReady\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:49:46Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:50:00Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:52:31Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:52:43Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:01Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:05Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:05Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterReady\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}observedGeneration\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ready\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}state\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Scale up/down PSMDB cluster}
\label{\detokenize{api:scale-up-down-psmdb-cluster}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Increase or decrease the size of the PSMDB cluster nodes to fit the current high availability needs
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl patch psmdb my\PYGZhy{}cluster\PYGZhy{}name \PYGZhy{}\PYGZhy{}type\PYG{o}{=}merge \PYGZhy{}\PYGZhy{}patch \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}}
\PYG{l+s+s1}{\PYGZdq{}spec\PYGZdq{}: \PYGZob{}\PYGZdq{}replsets\PYGZdq{}:\PYGZob{} \PYGZdq{}size\PYGZdq{}: \PYGZdq{}5\PYGZdq{} \PYGZcb{}}
\PYG{l+s+s1}{\PYGZcb{}\PYGZcb{}\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XPATCH \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/merge\PYGZhy{}patch+json\PYGZdq{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}d \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}}
\PYG{l+s+s1}{                  \PYGZdq{}spec\PYGZdq{}: \PYGZob{}\PYGZdq{}replsets\PYGZdq{}:\PYGZob{} \PYGZdq{}size\PYGZdq{}: \PYGZdq{}5\PYGZdq{} \PYGZcb{}}
\PYG{l+s+s1}{                  \PYGZcb{}\PYGZcb{}\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}\PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}} \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}5\PYGZdq{}} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Input:}
\begin{quote}

\sphinxstylestrong{spec}:

replsets
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
size (Int or String, Defaults: 3): \sphinxcode{\sphinxupquote{Specifiy the sie of the replsets cluster to scale up or down to}}

\end{enumerate}
\end{quote}

\sphinxstylestrong{Response:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDB\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDB\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}allowUnsafeConfigurations\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}backup\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}restartOnFailure\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}serviceAccountName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}storages\PYGZbs{}\PYGZdq{}:null,\PYGZbs{}\PYGZdq{}tasks\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}imagePullPolicy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}Always\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}mongod\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}net\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}hostPort\PYGZbs{}\PYGZdq{}:0,\PYGZbs{}\PYGZdq{}port\PYGZbs{}\PYGZdq{}:27017\PYGZcb{},\PYGZbs{}\PYGZdq{}operationProfiling\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}mode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}slowOp\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}rateLimit\PYGZbs{}\PYGZdq{}:100,\PYGZbs{}\PYGZdq{}slowOpThresholdMs\PYGZbs{}\PYGZdq{}:100\PYGZcb{},\PYGZbs{}\PYGZdq{}security\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enableEncryption\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}encryptionCipherMode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}AES256\PYGZhy{}CBC\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}encryptionKeySecret\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}redactClientLogData\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}setParameter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}ttlMonitorSleepSecs\PYGZbs{}\PYGZdq{}:60,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZbs{}\PYGZdq{}:128,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZbs{}\PYGZdq{}:128\PYGZcb{},\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engine\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}inMemory\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}inMemorySizeRatio\PYGZbs{}\PYGZdq{}:0.9\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}mmapv1\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}nsSize\PYGZbs{}\PYGZdq{}:16,\PYGZbs{}\PYGZdq{}smallfiles\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}collectionConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}blockCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}cacheSizeRatio\PYGZbs{}\PYGZdq{}:0.5,\PYGZbs{}\PYGZdq{}directoryForIndexes\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}journalCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}indexConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}prefixCompression\PYGZbs{}\PYGZdq{}:true\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}pmm\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}serverHost\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}monitoring\PYGZhy{}service\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}replsets\PYGZbs{}\PYGZdq{}:[\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}arbiter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}expose\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}exposeType\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}LoadBalancer\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}rs0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}podDisruptionBudget\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}maxUnavailable\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}limits\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:3,\PYGZbs{}\PYGZdq{}volumeSpec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}persistentVolumeClaim\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}accessModes\PYGZbs{}\PYGZdq{}:[\PYGZbs{}\PYGZdq{}ReadWriteOnce\PYGZbs{}\PYGZdq{}],\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}requests\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}3Gi\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}storageClassName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}standard\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}],\PYGZbs{}\PYGZdq{}secrets\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}users\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}updateStrategy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}SmartUpdate\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{4}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:enabled\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serviceAccountName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:imagePullPolicy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:port\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:rateLimit\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:slowOpThresholdMs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:enableEncryption\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionCipherMode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionKeySecret\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:engine\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:inMemorySizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:nsSize\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:blockCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:cacheSizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:journalCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:prefixCompression\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serverHost\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:users\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:updateStrategy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}f:containerSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:runAsNonRoot\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:runAsUser\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:podSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:fsGroup\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:clusterServiceDNSSuffix\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:runUid\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}f:ssl\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:sslInternal\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:conditions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:observedGeneration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ready\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:size\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:state\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T15:35:14Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:size\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T15:43:19Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1279009\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5207e71a\PYGZhy{}c83f\PYGZhy{}4707\PYGZhy{}b892\PYGZhy{}63aa93fb615c\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}restartOnFailure\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serviceAccountName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}storages\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}tasks\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}imagePullPolicy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Always\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}hostPort\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}port\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{27017}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}mode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}slowOp\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}rateLimit\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}slowOpThresholdMs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}enableEncryption\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionCipherMode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}AES256\PYGZhy{}CBC\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionKeySecret\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}redactClientLogData\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{60}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}engine\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}inMemorySizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.9}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}nsSize\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{16}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}smallfiles\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}blockCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}cacheSizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.5}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}directoryForIndexes\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}journalCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}prefixCompression\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serverHost\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}monitoring\PYGZhy{}service\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}users\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}updateStrategy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}SmartUpdate\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}conditions\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:03Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:39Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:41Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:41Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:29:10Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterReady\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:49:46Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:50:00Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:52:31Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:52:43Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:01Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:05Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:05Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterReady\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}observedGeneration\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ready\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}state\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Update PSMDB cluster image}
\label{\detokenize{api:update-psmdb-cluster-image}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Change the image of PSMDB containers inside the cluster
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl patch psmdb my\PYGZhy{}cluster\PYGZhy{}name \PYGZhy{}\PYGZhy{}type\PYG{o}{=}merge \PYGZhy{}\PYGZhy{}patch \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}}
\PYG{l+s+s1}{\PYGZdq{}spec\PYGZdq{}: \PYGZob{}\PYGZdq{}psmdb\PYGZdq{}:\PYGZob{} \PYGZdq{}image\PYGZdq{}: \PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.4.0\PYGZhy{}mongod4.2\PYGZdq{} \PYGZcb{}}
\PYG{l+s+s1}{\PYGZcb{}\PYGZcb{}\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XPATCH \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/merge\PYGZhy{}patch+json\PYGZdq{}}
            \PYGZhy{}d \PYG{l+s+s1}{\PYGZsq{}\PYGZob{}}
\PYG{l+s+s1}{              \PYGZdq{}spec\PYGZdq{}: \PYGZob{}\PYGZdq{}psmdb\PYGZdq{}:\PYGZob{} \PYGZdq{}image\PYGZdq{}: \PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.4.0\PYGZhy{}mongod4.2\PYGZdq{} \PYGZcb{}}
\PYG{l+s+s1}{              \PYGZcb{}\PYGZcb{}\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{n+nt}{\PYGZdq{}image \PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZdq{}} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Input:}
\begin{quote}

\sphinxstylestrong{spec}:

psmdb:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
image (String, min\sphinxhyphen{}length: 1) : \sphinxcode{\sphinxupquote{name of the image to update for PSMDB}}

\end{enumerate}
\end{quote}

\sphinxstylestrong{Response:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDB\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDB\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}allowUnsafeConfigurations\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}backup\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}restartOnFailure\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}serviceAccountName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}storages\PYGZbs{}\PYGZdq{}:null,\PYGZbs{}\PYGZdq{}tasks\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}imagePullPolicy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}Always\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}mongod\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}net\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}hostPort\PYGZbs{}\PYGZdq{}:0,\PYGZbs{}\PYGZdq{}port\PYGZbs{}\PYGZdq{}:27017\PYGZcb{},\PYGZbs{}\PYGZdq{}operationProfiling\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}mode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}slowOp\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}rateLimit\PYGZbs{}\PYGZdq{}:100,\PYGZbs{}\PYGZdq{}slowOpThresholdMs\PYGZbs{}\PYGZdq{}:100\PYGZcb{},\PYGZbs{}\PYGZdq{}security\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enableEncryption\PYGZbs{}\PYGZdq{}:true,\PYGZbs{}\PYGZdq{}encryptionCipherMode\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}AES256\PYGZhy{}CBC\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}encryptionKeySecret\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}redactClientLogData\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}setParameter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}ttlMonitorSleepSecs\PYGZbs{}\PYGZdq{}:60,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZbs{}\PYGZdq{}:128,\PYGZbs{}\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZbs{}\PYGZdq{}:128\PYGZcb{},\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engine\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}inMemory\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}inMemorySizeRatio\PYGZbs{}\PYGZdq{}:0.9\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}mmapv1\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}nsSize\PYGZbs{}\PYGZdq{}:16,\PYGZbs{}\PYGZdq{}smallfiles\PYGZbs{}\PYGZdq{}:false\PYGZcb{},\PYGZbs{}\PYGZdq{}wiredTiger\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}collectionConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}blockCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}engineConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}cacheSizeRatio\PYGZbs{}\PYGZdq{}:0.5,\PYGZbs{}\PYGZdq{}directoryForIndexes\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}journalCompressor\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}snappy\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}indexConfig\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}prefixCompression\PYGZbs{}\PYGZdq{}:true\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}pmm\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}image\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}serverHost\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}monitoring\PYGZhy{}service\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}replsets\PYGZbs{}\PYGZdq{}:[\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}arbiter\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}affinity\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}antiAffinityTopologyKey\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}none\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}expose\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}enabled\PYGZbs{}\PYGZdq{}:false,\PYGZbs{}\PYGZdq{}exposeType\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}LoadBalancer\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}rs0\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}podDisruptionBudget\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}maxUnavailable\PYGZbs{}\PYGZdq{}:1\PYGZcb{},\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}limits\PYGZbs{}\PYGZdq{}:null\PYGZcb{},\PYGZbs{}\PYGZdq{}size\PYGZbs{}\PYGZdq{}:3,\PYGZbs{}\PYGZdq{}volumeSpec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}persistentVolumeClaim\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}accessModes\PYGZbs{}\PYGZdq{}:[\PYGZbs{}\PYGZdq{}ReadWriteOnce\PYGZbs{}\PYGZdq{}],\PYGZbs{}\PYGZdq{}resources\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}requests\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}storage\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}3Gi\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{},\PYGZbs{}\PYGZdq{}storageClassName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}standard\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}],\PYGZbs{}\PYGZdq{}secrets\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}users\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}updateStrategy\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}SmartUpdate\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{5}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZhy{}5\PYGZhy{}0\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:enabled\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serviceAccountName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:imagePullPolicy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:port\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:rateLimit\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:slowOpThresholdMs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:enableEncryption\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionCipherMode\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:encryptionKeySecret\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:engine\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:inMemorySizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:nsSize\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                           \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:blockCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:cacheSizeRatio\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:journalCompressor\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{},}
                           \PYG{n+nt}{\PYGZdq{}f:indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                              \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{},}
                              \PYG{n+nt}{\PYGZdq{}f:prefixCompression\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                              \PYG{p}{\PYGZcb{}}
                           \PYG{p}{\PYGZcb{}}
                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:image\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:serverHost\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:users\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:updateStrategy\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:27:58Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}f:containerSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:runAsNonRoot\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:runAsUser\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:podSecurityContext\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:fsGroup\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:clusterServiceDNSSuffix\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:runUid\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}f:ssl\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:sslInternal\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:conditions\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:observedGeneration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                        \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:ready\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:size\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{},}
                        \PYG{n+nt}{\PYGZdq{}f:status\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                        \PYG{p}{\PYGZcb{}}
                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:state\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T15:35:14Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:image \PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:size\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}27T12:21:39Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1279853\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbs/my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5207e71a\PYGZhy{}c83f\PYGZhy{}4707\PYGZhy{}b892\PYGZhy{}63aa93fb615c\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}allowUnsafeConfigurations\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}backup\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}backup\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}restartOnFailure\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serviceAccountName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}storages\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}tasks\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{null}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}image \PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb:4.2.8\PYGZhy{}8\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}imagePullPolicy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Always\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}mongod\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}net\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}hostPort\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{0}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}port\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{27017}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}operationProfiling\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}mode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}slowOp\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}rateLimit\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}slowOpThresholdMs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{100}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}security\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}enableEncryption\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionCipherMode\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}AES256\PYGZhy{}CBC\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}encryptionKeySecret\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}mongodb\PYGZhy{}encryption\PYGZhy{}key\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}redactClientLogData\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}setParameter\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ttlMonitorSleepSecs\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{60}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentReadTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}wiredTigerConcurrentWriteTransactions\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{128}
         \PYG{p}{\PYGZcb{},}
         \PYG{n+nt}{\PYGZdq{}storage\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}engine\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}inMemory\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}inMemorySizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.9}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}mmapv1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}nsSize\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{16}\PYG{p}{,}
               \PYG{n+nt}{\PYGZdq{}smallfiles\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}wiredTiger\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}collectionConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}blockCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}engineConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}cacheSizeRatio\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mf}{0.5}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}directoryForIndexes\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
                  \PYG{n+nt}{\PYGZdq{}journalCompressor\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}snappy\PYGZdq{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}indexConfig\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}prefixCompression\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{true}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}pmm\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}enabled\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{false}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}image\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}percona/percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator:1.5.0\PYGZhy{}pmm\PYGZdq{}}\PYG{p}{,}
         \PYG{n+nt}{\PYGZdq{}serverHost\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}monitoring\PYGZhy{}service\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}5\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}secrets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}users\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZhy{}secrets\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}updateStrategy\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}SmartUpdate\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}conditions\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:03Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:39Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:41Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:28:41Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:29:10Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterReady\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:49:46Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:50:00Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:52:31Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:52:43Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Error\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:01Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:05Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterInitializing\PYGZdq{}}
         \PYG{p}{\PYGZcb{},}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}lastTransitionTime\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}24T14:53:05Z\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}True\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}type\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ClusterReady\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}observedGeneration\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}replsets\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}rs0\PYGZdq{}}\PYG{p}{:\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}ready\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}size\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{3}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}status\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}state\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}ready\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Backup PSMDB cluster}
\label{\detokenize{api:backup-psmdb-cluster}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Takes a backup of the PSMDB cluster containers data to be able to recover from disasters or make a roll\PYGZhy{}back later
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/deploy/backup/backup.yaml
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbbackups
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XPOST \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbbackups}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}d \PYG{l+s+s2}{\PYGZdq{}@backup.json\PYGZdq{}} \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body (backup.json):}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDBBackup\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}backup1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}psmdbCluster\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}storageName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}s3\PYGZhy{}us\PYGZhy{}west\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Input:}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxstylestrong{metadata}:
\begin{quote}

name(String, min\sphinxhyphen{}length:1) : \sphinxcode{\sphinxupquote{name of backup to create}}
\end{quote}

\item {} 
\sphinxstylestrong{spec}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
psmdbCluster(String, min\sphinxhyphen{}length:1) : \sphinxcode{\sphinxupquote{name of PSMDB cluster}}

\item {} 
storageName(String, min\sphinxhyphen{}length:1) : \sphinxcode{\sphinxupquote{name of storage claim to use}}

\end{enumerate}

\end{enumerate}

\sphinxstylestrong{Response:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDBBackup\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDBBackup\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}backup1\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}psmdbCluster\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}storageName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}s3\PYGZhy{}us\PYGZhy{}west\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}27T13:45:43Z\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:psmdbCluster\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:storageName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}27T13:45:43Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}backup1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1290243\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbbackups/backup1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}e695d1c7\PYGZhy{}898e\PYGZhy{}44b0\PYGZhy{}b356\PYGZhy{}537284f6c046\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}psmdbCluster\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}storageName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}s3\PYGZhy{}us\PYGZhy{}west\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\section{Restore PSMDB cluster}
\label{\detokenize{api:restore-psmdb-cluster}}
\sphinxstylestrong{Description:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Restores PSMDB cluster data to an earlier version to recover from a problem or to make a roll\PYGZhy{}back
\end{sphinxVerbatim}

\sphinxstylestrong{Kubectl Command:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
kubectl apply \PYGZhy{}f percona\PYGZhy{}server\PYGZhy{}mongodb\PYGZhy{}operator/deploy/backup/restore.yaml
\end{sphinxVerbatim}

\sphinxstylestrong{URL:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbrestores
\end{sphinxVerbatim}

\sphinxstylestrong{Authentication:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Authorization: Bearer \PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}
\end{sphinxVerbatim}

\sphinxstylestrong{cURL Request:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
curl \PYGZhy{}k \PYGZhy{}v \PYGZhy{}XPOST \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://}\PYG{n+nv}{\PYGZdl{}API\PYGZus{}SERVER}\PYG{l+s+s2}{/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbrestores}\PYG{l+s+s2}{\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Accept: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}d \PYG{l+s+s2}{\PYGZdq{}@restore.json\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
            \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Authorization: Bearer }\PYG{n+nv}{\PYGZdl{}KUBE\PYGZus{}TOKEN}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Request Body (restore.json):}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDBRestore\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}restore1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}backupName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}backup1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}clusterName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxstylestrong{Input:}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxstylestrong{metadata}:
\begin{quote}

name(String, min\sphinxhyphen{}length:1): \sphinxcode{\sphinxupquote{name of restore to create}}
\end{quote}

\item {} 
\sphinxstylestrong{spec}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
clusterName(String, min\sphinxhyphen{}length:1) : \sphinxcode{\sphinxupquote{name of PSMDB cluster}}

\item {} 
backupName(String, min\sphinxhyphen{}length:1) : \sphinxcode{\sphinxupquote{name of backup to restore from}}

\end{enumerate}

\end{enumerate}

\sphinxstylestrong{Response:}

JSON:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
   \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}kind\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}PerconaServerMongoDBRestore\PYGZdq{}}\PYG{p}{,}
   \PYG{n+nt}{\PYGZdq{}metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
         \PYG{n+nt}{\PYGZdq{}kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}\PYGZob{}\PYGZbs{}\PYGZdq{}apiVersion\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}psmdb.percona.com/v1\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}kind\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}PerconaServerMongoDBRestore\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}metadata\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}annotations\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZcb{},\PYGZbs{}\PYGZdq{}name\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}restore1\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}namespace\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}default\PYGZbs{}\PYGZdq{}\PYGZcb{},\PYGZbs{}\PYGZdq{}spec\PYGZbs{}\PYGZdq{}:\PYGZob{}\PYGZbs{}\PYGZdq{}backupName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}backup1\PYGZbs{}\PYGZdq{},\PYGZbs{}\PYGZdq{}clusterName\PYGZbs{}\PYGZdq{}:\PYGZbs{}\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZbs{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZbs{}n\PYGZdq{}}
      \PYG{p}{\PYGZcb{},}
      \PYG{n+nt}{\PYGZdq{}creationTimestamp\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}27T13:52:56Z\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}generation\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}managedFields\PYGZdq{}}\PYG{p}{:[}
         \PYG{p}{\PYGZob{}}
            \PYG{n+nt}{\PYGZdq{}apiVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}psmdb.percona.com/v1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsType\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}FieldsV1\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}fieldsV1\PYGZdq{}}\PYG{p}{:\PYGZob{}}
               \PYG{n+nt}{\PYGZdq{}f:metadata\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}f:annotations\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                     \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{},}
                     \PYG{n+nt}{\PYGZdq{}f:kubectl.kubernetes.io/last\PYGZhy{}applied\PYGZhy{}configuration\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                     \PYG{p}{\PYGZcb{}}
                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{},}
               \PYG{n+nt}{\PYGZdq{}f:spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
                  \PYG{n+nt}{\PYGZdq{}.\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:backupName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{},}
                  \PYG{n+nt}{\PYGZdq{}f:clusterName\PYGZdq{}}\PYG{p}{:\PYGZob{}}

                  \PYG{p}{\PYGZcb{}}
               \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{},}
            \PYG{n+nt}{\PYGZdq{}manager\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}kubectl\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}operation\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}Update\PYGZdq{}}\PYG{p}{,}
            \PYG{n+nt}{\PYGZdq{}time\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}07\PYGZhy{}27T13:52:56Z\PYGZdq{}}
         \PYG{p}{\PYGZcb{}}
      \PYG{p}{],}
      \PYG{n+nt}{\PYGZdq{}name\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}restore1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}namespace\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}default\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}resourceVersion\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}1291198\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}selfLink\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}/apis/psmdb.percona.com/v1/namespaces/default/perconaservermongodbrestores/restore1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}uid\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}17e982fe\PYGZhy{}ac41\PYGZhy{}47f4\PYGZhy{}afba\PYGZhy{}fea380b0c76e\PYGZdq{}}
   \PYG{p}{\PYGZcb{},}
   \PYG{n+nt}{\PYGZdq{}spec\PYGZdq{}}\PYG{p}{:\PYGZob{}}
      \PYG{n+nt}{\PYGZdq{}backupName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}backup1\PYGZdq{}}\PYG{p}{,}
      \PYG{n+nt}{\PYGZdq{}clusterName\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}my\PYGZhy{}cluster\PYGZhy{}name\PYGZdq{}}
   \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\chapter{Frequently Asked Questions}
\label{\detokenize{faq:frequently-asked-questions}}\label{\detokenize{faq:faq}}\label{\detokenize{faq::doc}}
\begin{sphinxShadowBox}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{faq:id4}}{\hyperref[\detokenize{faq:why-do-we-need-to-follow-the-kubernetes-way-when-kubernetes-was-never-intended-to-run-databases}]{\sphinxcrossref{Why do we need to follow “the Kubernetes way” when Kubernetes was never intended to run databases?}}}

\item {} 
\phantomsection\label{\detokenize{faq:id5}}{\hyperref[\detokenize{faq:how-can-i-contact-the-developers}]{\sphinxcrossref{How can I contact the developers?}}}

\item {} 
\phantomsection\label{\detokenize{faq:id6}}{\hyperref[\detokenize{faq:what-is-the-difference-between-the-operator-quickstart-and-advanced-installation-ways}]{\sphinxcrossref{What is the difference between the Operator quickstart and advanced installation ways?}}}

\item {} 
\phantomsection\label{\detokenize{faq:id7}}{\hyperref[\detokenize{faq:which-versions-of-mongodb-the-operator-supports}]{\sphinxcrossref{Which versions of MongoDB the Operator supports?}}}

\end{itemize}
\end{sphinxShadowBox}


\section{Why do we need to follow “the Kubernetes way” when Kubernetes was never intended to run databases?}
\label{\detokenize{faq:why-do-we-need-to-follow-the-kubernetes-way-when-kubernetes-was-never-intended-to-run-databases}}
As it is well known, the Kubernetes approach is targeted at stateless
applications but provides ways to store state (in Persistent Volumes, etc.) if
the application needs it. Generally, a stateless mode of operation is supposed
to provide better safety, sustainability, and scalability, it makes the
already\sphinxhyphen{}deployed components interchangeable. You can find more about substantial
benefits brought by Kubernetes to databases in \sphinxhref{https://www.percona.com/blog/2020/10/08/the-criticality-of-a-kubernetes-operator-for-databases/}{this blog post}.

The architecture of state\sphinxhyphen{}centric applications (like databases) should be
composed in a right way to avoid crashes, data loss, or data inconsistencies
during hardware failure. Percona Kubernetes Operator for Percona Server for
MongoDB provides out\sphinxhyphen{}of\sphinxhyphen{}the\sphinxhyphen{}box functionality to automate provisioning and
management of highly available MongoDB database clusters on Kubernetes.


\section{How can I contact the developers?}
\label{\detokenize{faq:how-can-i-contact-the-developers}}
The best place to discuss Percona Kubernetes Operator for Percona Server for
MongoDB with developers and other community members is the \sphinxhref{https://forums.percona.com/categories/kubernetes-operator-percona-server-mongodb}{community forum}.

If you would like to report a bug, use the \sphinxhref{https://jira.percona.com/projects/K8SPSMDB}{Percona Kubernetes Operator for Percona Server for MongoDB project in JIRA}.


\section{What is the difference between the Operator quickstart and advanced installation ways?}
\label{\detokenize{faq:what-is-the-difference-between-the-operator-quickstart-and-advanced-installation-ways}}
As you have noticed, the installation section of docs contains both quickstart
and advanced installation guides.

The quickstart guide is simpler. It has fewer installation steps in favor of
predefined default choices. Particularly, in advanced installation guides, you
separately apply the Custom Resource Definition and Role\sphinxhyphen{}based Access Control
configuration files with possible edits in them. At the same time, quickstart
guides rely on the all\sphinxhyphen{}inclusive bundle configuration.

At another point, quickstart guides are related to specific platforms you are
going to use (Minikube, Google Kubernetes Engine, etc.) and therefore include
some additional steps needed for these platforms.

Generally, rely on the quickstart guide if you are a beginner user of the
specific platform and/or you are new to the Percona Server for MongoDB Operator
as a whole.


\section{Which versions of MongoDB the Operator supports?}
\label{\detokenize{faq:which-versions-of-mongodb-the-operator-supports}}
Percona Operator for Percona Server for MongoDB provides a ready\sphinxhyphen{}to\sphinxhyphen{}use
installation of the MongoDB\sphinxhyphen{}based database cluster inside your Kubernetes
installation. It works with Percona Server for MongoDB 3.6, 4.0, and 4.2, and
the exact version is determined by the Docker image in use.

Percona\sphinxhyphen{}certified Docker images used by the Operator are listed \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/images.html}{here}.
For example, Percona Server for MongoDB 4.2 is supported with the following
recommended version: \{\{\{mongodb42recommended\}\}\}. More details on the exact Percona
Server for MongoDB version can be found in the release notes (\sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/4.2/release\_notes/index.html}{4.2}, \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/4.0/release\_notes/index.html}{4.0},
and \sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/3.6/release\_notes/index.html}{3.6}).


\chapter{Kubernetes Operator for Percona Server for MongoDB Release Notes}
\label{\detokenize{RN/index:kubernetes-operator-for-percona-server-for-mongodb-release-notes}}\label{\detokenize{RN/index:rel-notes}}\label{\detokenize{RN/index::doc}}

\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.6.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-6-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0:k8spsmdb-1-6-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0::doc}}\begin{quote}\begin{description}
\item[{Date}] \leavevmode
December 22, 2020

\item[{Installation}] \leavevmode
\sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/index.html\#installation}{Installing Percona Kubernetes Operator for Percona Server for MongoDB}

\end{description}\end{quote}


\subsection{New Features}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0:new-features}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-273}{K8SPSMDB\sphinxhyphen{}273}: Add support for \sphinxcode{\sphinxupquote{mongos}} service to expose a single
{\hyperref[\detokenize{sharding:operator-sharding}]{\sphinxcrossref{\DUrole{std,std-ref}{shard}}}} of a MongoDB cluster through one entry point instead of
provisioning a load\sphinxhyphen{}balancer per replica set node. In the following release,
we will add support for multiple shards.

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-282}{K8SPSMDB\sphinxhyphen{}282}: Official support for {\hyperref[\detokenize{monitoring:operator-monitoring}]{\sphinxcrossref{\DUrole{std,std-ref}{Percona Monitoring and Management (PMM) v.2}}}}

\begin{sphinxadmonition}{note}{Note:}
Monitoring with PMM v.1 configured according to the \sphinxhref{https://www.percona.com/blog/2020/07/23/using-percona-kubernetes-operators-with-percona-monitoring-and-management/}{unofficial instruction}
will not work after the upgrade. Please switch to PMM v.2.
\end{sphinxadmonition}

\end{itemize}


\subsection{Improvements}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0:improvements}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-258}{K8SPSMDB\sphinxhyphen{}258}: Add support for Percona Server for MongoDB version 4.4

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-319}{K8SPSMDB\sphinxhyphen{}319}: Show Endpoint in the \sphinxcode{\sphinxupquote{kubectl get psmdb}} command output to connect to a MongoDB cluster easily

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-257}{K8SPSMDB\sphinxhyphen{}257}: Store the Operator version as a \sphinxcode{\sphinxupquote{crVersion}} field in the \sphinxcode{\sphinxupquote{deploy/cr.yaml}} configuration file

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-266}{K8SPSMDB\sphinxhyphen{}266}: Use plain\sphinxhyphen{}text passwords instead of base64\sphinxhyphen{}encoded ones when creating {\hyperref[\detokenize{users:users-system-users}]{\sphinxcrossref{\DUrole{std,std-ref}{System Users}}}} secrets for simplicity

\end{itemize}


\subsection{Bugs Fixed}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0:bugs-fixed}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-268}{K8SPSMDB\sphinxhyphen{}268}: Fix a bug affecting the support of TLS certificates issued by \sphinxhref{https://github.com/jetstack/cert-manager}{cert\sphinxhyphen{}manager},
due to which proper rights were not set for the role\sphinxhyphen{}based access control, and
Kubernetes versions newer than 1.15 required other certificate issuing sources

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-261}{K8SPSMDB\sphinxhyphen{}261}: Fix a bug due to which cluster pause/resume functionality didn’t work in previous releases

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-292}{K8SPSMDB\sphinxhyphen{}292}: Fix a bug due to which not all clusters managed by the Operator were upgraded by the automatic update

\end{itemize}


\subsection{Removal}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.6.0:removal}}\begin{itemize}
\item {} 
The \sphinxhref{https://docs.mongodb.com/manual/core/storage-engines/}{MMAPv1 storage engine}
is no longer supported for all MongoDB versions starting from this version of
the Operator. MMAPv1 was already deprecated by MongoDB for a long time.
WiredTiger is the default storage engine since MongoDB 3.2, and MMAPv1 was
completely removed in MongoDB 4.2.

\begin{sphinxadmonition}{note}{Note:}
Upgrade of the Operator from 1.5.0 to 1.6.0 will fail if MMAPv1 is
used, but MongoDB cluster will continue to run. It is recommended to
migrate your clusters to WiredTiger engine before the upgrade.
\end{sphinxadmonition}

\end{itemize}


\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.5.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.5.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-5-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.5.0:k8spsmdb-1-5-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.5.0::doc}}\begin{quote}\begin{description}
\item[{Date}] \leavevmode
September 7, 2020

\item[{Installation}] \leavevmode
\sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/index.html\#installation}{Installing Percona Kubernetes Operator for Percona Server for MongoDB}

\end{description}\end{quote}


\subsection{New Features}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.5.0:new-features}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-233}{K8SPSMDB\sphinxhyphen{}233}: Automatic management of system users for MongoDB on password rotation via Secret

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-226}{K8SPSMDB\sphinxhyphen{}226}: Official Helm chart for the Operator

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-199}{K8SPSMDB\sphinxhyphen{}199}: Support multiple PSMDB minor versions by the Operator

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-198}{K8SPSMDB\sphinxhyphen{}198}: Fully Automate Minor Version Updates (Smart Update)

\end{itemize}


\subsection{Improvements}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.5.0:improvements}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-192}{K8SPSMDB\sphinxhyphen{}192}: The ability to set the mongod cursorTimeoutMillis parameter in YAML (Thanks to user xprt64 for the contribution)

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-234}{K8SPSMDB\sphinxhyphen{}234}: OpenShift 4.5 support

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-197}{K8SPSMDB\sphinxhyphen{}197}: Additional certificate SANs useful for reverse DNS lookups (Thanks to user phin1x for the contribution)

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-190}{K8SPSMDB\sphinxhyphen{}190}: Direct API quering with “curl” instead of using “kubectl” tool in scheduled backup jobs (Thanks to user phin1x for the contribution)

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-133}{K8SPSMDB\sphinxhyphen{}133}: A special Percona Server for MongoDB debug image which avoids restarting on fail and contains additional tools useful for debugging

\item {} 
\sphinxhref{https://jira.percona.com/browse/CLOUD-556}{CLOUD\sphinxhyphen{}556}: Kubernetes 1.17 / Google Kubernetes Engine 1.17 support

\end{itemize}


\subsection{Bugs Fixed}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.5.0:bugs-fixed}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-213}{K8SPSMDB\sphinxhyphen{}213}: Installation instruction not reflecting recent changes in git tags (Thanks to user geraintj for reporting this issue)

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-210}{K8SPSMDB\sphinxhyphen{}210}: Backup documentation not reflecting changes in Percona Backup for MongoDB

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-180}{K8SPSMDB\sphinxhyphen{}180}: Replset and cluster having “ready” status set before mongo initialization and replicasets configuration finished

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-179}{K8SPSMDB\sphinxhyphen{}179}: The “error” cluster status instead of the “initializing” one during the replset initialization

\item {} 
\sphinxhref{https://jira.percona.com/browse/CLOUD-531}{CLOUD\sphinxhyphen{}531}: Wrong usage of \sphinxcode{\sphinxupquote{strings.TrimLeft}} when processing apiVersion

\end{itemize}


\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.4.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.4.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-4-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.4.0:k8spsmdb-1-4-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.4.0::doc}}\begin{quote}\begin{description}
\item[{Date}] \leavevmode
March 31, 2020

\item[{Installation}] \leavevmode
\sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/index.html\#installation}{Installing Percona Kubernetes Operator for PSMDB}

\end{description}\end{quote}


\subsection{New Features}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.4.0:new-features}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-89}{K8SPSMDB\sphinxhyphen{}89}: Amazon Elastic Container Service for Kubernetes (EKS)
was added to the list of the officially supported platforms

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-113}{K8SPSMDB\sphinxhyphen{}113}: Percona Server for MongoDB 4.2 is now supported

\item {} 
OpenShift Container Platform 4.3 is now supported

\end{itemize}


\subsection{Improvements}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.4.0:improvements}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-79}{K8SPSMDB\sphinxhyphen{}79}: The health check algorithm improvements have increased the overall stability of the Operator

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-176}{K8SPSMDB\sphinxhyphen{}176}: The Operator was updated to use Percona Backup for MongoDB version 1.2

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-153}{K8SPSMDB\sphinxhyphen{}153}: Now the user can adjust securityContext, replacing the automatically generated securityContext with the customized one

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-175}{K8SPSMDB\sphinxhyphen{}175}: Operator now updates observedGeneration status message to allow better monitoring of the cluster rollout or backups/restore process

\end{itemize}


\subsection{Bugs Fixed}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.4.0:bugs-fixed}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-182}{K8SPSMDB\sphinxhyphen{}182}: Setting the \sphinxcode{\sphinxupquote{updateStrategy: OnDelete}} didn’t work if was not specified from scratch in CR

\item {} 
\sphinxhref{https://jira.percona.com/browse/K8SPSMDB-174}{K8SPSMDB\sphinxhyphen{}174}: The inability to update or delete existing CRD was possible because of too large records in etcd, resulting in “request is too large” errors. Only 20 last status changes are now stored in etcd to avoid this problem.

\end{itemize}

Help us improve our software quality by reporting any bugs you encounter using
\sphinxhref{https://jira.percona.com/secure/Dashboard.jspa}{our bug tracking system}.


\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.3.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.3.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-3-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.3.0::doc}}
Percona announces the \sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for
MongoDB} 1.3.0 release on December 11, 2019. This release is now the current
GA release in the 1.3 series. \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/kubernetes.html}{Install the Kubernetes Operator for Percona
Server for MongoDB by following the instructions}.

The Operator simplifies the deployment and management of the \sphinxhref{https://www.percona.com/software/mongo-database/percona-server-for-mongodb}{Percona Server
for MongoDB}
in Kubernetes\sphinxhyphen{}based environments. It extends the Kubernetes API with a new
custom resource for deploying, configuring and managing the application through
the whole life cycle.

The Operator source code is available \sphinxhref{https://github.com/percona/percona-server-mongodb-operator}{in our Github repository}.
All of Percona’s software is open\sphinxhyphen{}source and free.


\subsection{New Features and Improvements}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.3.0:new-features-and-improvements}}\begin{itemize}
\item {} 
\sphinxhref{https://jira.percona.com/browse/CLOUD-415}{CLOUD\sphinxhyphen{}415}: Non\sphinxhyphen{}default cluster domain can now be specified with the new
\sphinxcode{\sphinxupquote{ClusterServiceDNSSuffix}} Operator option.

\item {} 
\sphinxhref{https://jira.percona.com/browse/CLOUD-395}{CLOUD\sphinxhyphen{}395}: The Percona Server for MongoDB images size decrease by 42\%
was achieved by removing unnecessary dependencies and modules to reduce the
cluster deployment time.

\item {} 
\sphinxhref{https://jira.percona.com/browse/CLOUD-390}{CLOUD\sphinxhyphen{}390}: Helm chart for Percona Monitoring and Management (PMM) 2.0
have been provided.

\end{itemize}

\sphinxhref{https://www.percona.com/software/mongo-database/percona-server-for-mongodb}{Percona Server for MongoDB}
is an enhanced, open source and highly\sphinxhyphen{}scalable database that is a
fully\sphinxhyphen{}compatible, drop\sphinxhyphen{}in replacement for MongoDB Community Edition. It supports
MongoDB protocols and drivers. Percona Server for MongoDB extends MongoDB
Community Edition functionality by including the Percona Memory Engine, as well
as several enterprise\sphinxhyphen{}grade features. It requires no changes to MongoDB
applications or code.

Help us improve our software quality by reporting any bugs you encounter using
\sphinxhref{https://jira.percona.com/secure/Dashboard.jspa}{our bug tracking system}.


\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.2.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.2.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-2-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.2.0::doc}}
Percona announces the \sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for
MongoDB} 1.2.0 release on September 20, 2019. This release is now the current
GA release in the 1.2 series. \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/kubernetes.html}{Install the Kubernetes Operator for Percona
Server for MongoDB by following the instructions}.

The Operator simplifies the deployment and management of the \sphinxhref{https://www.percona.com/software/mongo-database/percona-server-for-mongodb}{Percona Server
for MongoDB}
in Kubernetes\sphinxhyphen{}based environments. It extends the Kubernetes API with a new
custom resource for deploying, configuring and managing the application through
the whole life cycle.

The Operator source code is available \sphinxhref{https://github.com/percona/percona-server-mongodb-operator}{in our Github repository}.
All of Percona’s software is open\sphinxhyphen{}source and free.


\subsection{New Features and Improvements}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.2.0:new-features-and-improvements}}\begin{itemize}
\item {} 
\sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/broker.html}{A Service Broker was implemented}
for the Operator, allowing a user to deploy Percona XtraDB Cluster on the
OpenShift Platform, configuring it with a standard GUI, following the Open
Service Broker API.

\item {} 
Now the Operator supports \sphinxhref{https://www.percona.com/doc/percona-monitoring-and-management/2.x/index.html}{Percona Monitoring and Management 2},
which means being able to detect and register to PMM Server of both 1.x and
2.0 versions.

\item {} 
Data\sphinxhyphen{}at\sphinxhyphen{}rest encryption is now enabled by default unless
\sphinxcode{\sphinxupquote{EnableEncryption=false}} is explicitly specified in the \sphinxcode{\sphinxupquote{deploy/cr.yaml}}
configuration file.

\item {} 
Now it is possible to set the \sphinxcode{\sphinxupquote{schedulerName}} option in the operator
parameters. This allows using storage which depends on a custom scheduler, or
a cloud provider which optimizes scheduling to run workloads in a
cost\sphinxhyphen{}effective way.

\item {} 
The resource constraint values were refined for all containers to eliminate
the possibility of an out of memory error.

\end{itemize}


\subsection{Fixed Bugs}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.2.0:fixed-bugs}}\begin{itemize}
\item {} 
Oscillations of the cluster status between “initializing” and “ready” took
place after an update.

\item {} 
The Operator was removing other cron jobs in case of the enabled backups
without defined tasks (contributed by \sphinxhref{https://github.com/mheers}{Marcel Heers}).

\end{itemize}

\sphinxhref{https://www.percona.com/software/mongo-database/percona-server-for-mongodb}{Percona Server for MongoDB}
is an enhanced, open source and highly\sphinxhyphen{}scalable database that is a
fully\sphinxhyphen{}compatible, drop\sphinxhyphen{}in replacement for MongoDB Community Edition. It supports
MongoDB protocols and drivers. Percona Server for MongoDB extends MongoDB
Community Edition functionality by including the Percona Memory Engine, as well
as several enterprise\sphinxhyphen{}grade features. It requires no changes to MongoDB
applications or code.

Help us improve our software quality by reporting any bugs you encounter using
\sphinxhref{https://jira.percona.com/secure/Dashboard.jspa}{our bug tracking system}.


\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.1.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.1.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-1-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.1.0::doc}}
Percona announces the general availability of \sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.1.0 on July 15, 2019. This release is now the current GA release in the 1.1 series. \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/kubernetes.html}{Install the Kubernetes Operator for Percona Server for MongoDB by following the instructions}. Please see the \sphinxhref{https://www.percona.com/blog/2019/05/29/percona-kubernetes-operators/}{GA release announcement}.

The Operator simplifies the deployment and management of the \sphinxhref{https://www.percona.com/software/mongo-database/percona-server-for-mongodb}{Percona Server for MongoDB} in Kubernetes\sphinxhyphen{}based environments. It extends the Kubernetes API with a new custom resource for deploying, configuring and managing the application through the whole life cycle.

The Operator source code is available \sphinxhref{https://github.com/percona/percona-server-mongodb-operator}{in our Github repository}. All of Percona’s software is open\sphinxhyphen{}source and free.


\subsection{New Features and Improvements}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.1.0:new-features-and-improvements}}\begin{itemize}
\item {} 
Now the Percona Kubernetes Operator \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/update.html}{allows upgrading} Percona Server for MongoDB to newer versions, either in semi\sphinxhyphen{}automatic or in manual mode.

\item {} 
Also, two modes are implemented for updating the Percona Server for MongoDB \sphinxcode{\sphinxupquote{mongod.conf}} configuration file: in \sphinxstyleemphasis{automatic configuration update} mode Percona Server for MongoDB Pods are immediately re\sphinxhyphen{}created to populate changed options from the Operator YAML file, while in \sphinxstyleemphasis{manual mode} changes are held until Percona Server for MongoDB Pods are re\sphinxhyphen{}created manually.

\item {} 
\sphinxhref{https://www.percona.com/doc/percona-server-for-mongodb/LATEST/data\_at\_rest\_encryption.html}{Percona Server for MongoDB data\sphinxhyphen{}at\sphinxhyphen{}rest encryption} is now supported by the Operator to ensure that encrypted data files cannot be decrypted by anyone except those with the decryption key.

\item {} 
A separate service account is now used by the Operator’s containers which need special privileges, and all other Pods run on default service account with limited permissions.

\item {} 
\sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/users.html}{User secrets} are now generated automatically if don’t exist: this feature especially helps reduce work in repeated development environment testing and reduces the chance of accidentally pushing predefined development passwords to production environments.

\item {} 
The Operator \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/TLS.html}{is now able to generate TLS certificates itself} which removes the need in manual certificate generation.

\item {} 
The list of officially supported platforms now includes the \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/minikube.html}{Minikube}, which provides an easy way to test the Operator locally on your own machine before deploying it on a cloud.

\item {} 
Also, Google Kubernetes Engine 1.14 and OpenShift Platform 4.1 are now supported.

\end{itemize}

\sphinxhref{https://www.percona.com/software/mongo-database/percona-server-for-mongodb}{Percona Server for MongoDB} is an enhanced, open source and highly\sphinxhyphen{}scalable database that is a fully\sphinxhyphen{}compatible, drop\sphinxhyphen{}in replacement for MongoDB Community Edition. It supports MongoDB protocols and drivers. Percona Server for MongoDB extends MongoDB Community Edition functionality by including the Percona Memory Engine, as well as several enterprise\sphinxhyphen{}grade features. It requires no changes to MongoDB applications or code.

Help us improve our software quality by reporting any bugs you encounter using \sphinxhref{https://jira.percona.com/secure/Dashboard.jspa}{our bug tracking system}.


\section{\sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.0.0}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.0.0:percona-kubernetes-operator-for-percona-server-for-mongodb-1-0-0}}\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.0.0::doc}}
Percona announces the general availability of \sphinxstyleemphasis{Percona Kubernetes Operator for Percona Server for MongoDB} 1.0.0 on May 29, 2019. This release is now the current GA release in the 1.0 series. \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/kubernetes.html}{Install the Kubernetes Operator for Percona Server for MongoDB by following the instructions}. Please see the \sphinxhref{https://www.percona.com/blog/2019/05/29/percona-kubernetes-operators/}{GA release announcement}. All of Percona’s software is open\sphinxhyphen{}source and free.

The Percona Kubernetes Operator for Percona Server for MongoDB automates the lifecycle of your Percona Server for MongoDB environment. The Operator can be used to create a Percona Server for MongoDB replica set, or scale an existing replica set.

The Operator creates a Percona Server for MongoDB replica set with the needed settings and provides a consistent Percona Server for MongoDB instance. The Percona Kubernetes Operators are based on best practices for configuration and setup of the Percona Server for MongoDB.

The Kubernetes Operators provide a consistent way to package, deploy, manage, and perform a backup and a restore for a Kubernetes application. Operators deliver automation advantages in cloud\sphinxhyphen{}native applications and may save time while providing a consistent environment.
\begin{description}
\item[{The advantages are the following:}] \leavevmode\begin{itemize}
\item {} 
Deploy a Percona Server for MongoDB environment with no single point of failure and environment can span multiple availability zones (AZs).

\item {} 
Deployment takes about six minutes with the default configuration.

\item {} 
Modify the Percona Server for MongoDB size parameter to add or remove Percona Server for MongoDB replica set members

\item {} 
Integrate with Percona Monitoring and Management (PMM) to seamlessly monitor your Percona Server for MongoDB

\item {} 
Automate backups or perform on\sphinxhyphen{}demand backups as needed with support for performing an automatic restore

\item {} 
Supports using Cloud storage with S3\sphinxhyphen{}compatible APIs for backups

\item {} 
Automate the recovery from failure of a Percona Server for MongoDB replica set member

\item {} 
TLS is enabled by default for replication and client traffic using Cert\sphinxhyphen{}Manager

\item {} 
Access private registries to enhance security

\item {} 
Supports advanced Kubernetes features such as pod disruption budgets, node selector, constraints, tolerations, priority classes, and affinity/anti\sphinxhyphen{}affinity

\item {} 
You can use either PersistentVolumeClaims or local storage with hostPath to store your database

\item {} 
Supports a replica set Arbiter member

\item {} 
Supports Percona Server for MongoDB versions 3.6 and 4.0

\end{itemize}

\end{description}


\subsection{Installation}
\label{\detokenize{RN/Kubernetes-Operator-for-PSMONGODB-RN1.0.0:installation}}
Installation is performed by following the documentation installation instructions \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/kubernetes.html}{for Kubernetes} and \sphinxhref{https://www.percona.com/doc/kubernetes-operator-for-psmongodb/openshift.html}{OpenShift}.



\renewcommand{\indexname}{Index}
\printindex
\end{document}